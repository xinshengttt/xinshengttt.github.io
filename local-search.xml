<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>ruoyi-vue-plus之数据权限</title>
    <link href="/2024/04/20/ruoyi-vue-plus%E4%B9%8B%E6%95%B0%E6%8D%AE%E6%9D%83%E9%99%90/"/>
    <url>/2024/04/20/ruoyi-vue-plus%E4%B9%8B%E6%95%B0%E6%8D%AE%E6%9D%83%E9%99%90/</url>
    
    <content type="html"><![CDATA[<p>文档地址：<a href="https://plus-doc.dromara.org/#/ruoyi-vue-plus/home">点击这里</a></p><p>项目地址：<a href="https://gitee.com/dromara/RuoYi-Vue-Plus/tree/4.X/">点击这里</a></p><p><strong>功能介绍</strong>：<a href="https://plus-doc.dromara.org/#/ruoyi-vue-plus/framework/basic/permissions">点击这里</a></p><hr><p>自行查看<strong>功能介绍</strong>即可，大佬讲的很细致~</p>]]></content>
    
    
    <categories>
      
      <category>ruoyi-vue-plus</category>
      
      <category>数据权限</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ruoyi-vue-plus</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ruoyi-vue-plus之pom文件</title>
    <link href="/2024/04/20/ruoyi-vue-plus%E4%B9%8Bpom%E6%96%87%E4%BB%B6/"/>
    <url>/2024/04/20/ruoyi-vue-plus%E4%B9%8Bpom%E6%96%87%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<h2 id="SpringBoot的pom文件配置解析"><a href="#SpringBoot的pom文件配置解析" class="headerlink" title="SpringBoot的pom文件配置解析"></a>SpringBoot的pom文件配置解析</h2><p>文档地址：<a href="https://plus-doc.dromara.org/#/ruoyi-vue-plus/home">点击这里</a></p><p>项目地址：<a href="https://gitee.com/dromara/RuoYi-Vue-Plus/tree/4.X/">点击这里</a></p><hr><h3 id="profiles-profile"><a href="#profiles-profile" class="headerlink" title="profiles.profile"></a>profiles.profile</h3><p>下面是本项目的ruoyi-admin(父类)的pom文件profiles.profile</p><figure><div class="code-wrapper"><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>profiles</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>profile</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">></span></span>local<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">></span></span>                <span class="token comment">&lt;!-- 环境标识，需要与配置文件的名称相对应 --></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>profiles.active</span><span class="token punctuation">></span></span>local<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>profiles.active</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>logging.level</span><span class="token punctuation">></span></span>info<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>logging.level</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>profile</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>profile</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">></span></span>dev<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">></span></span>                <span class="token comment">&lt;!-- 环境标识，需要与配置文件的名称相对应 --></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>profiles.active</span><span class="token punctuation">></span></span>dev<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>profiles.active</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>logging.level</span><span class="token punctuation">></span></span>info<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>logging.level</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activation</span><span class="token punctuation">></span></span>                <span class="token comment">&lt;!-- 默认环境 --></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activeByDefault</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activeByDefault</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activation</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>profile</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>profile</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">></span></span>prod<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>profiles.active</span><span class="token punctuation">></span></span>prod<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>profiles.active</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>logging.level</span><span class="token punctuation">></span></span>warn<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>logging.level</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>profile</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>profiles</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><h4 id="标签"><a href="#标签" class="headerlink" title="标签 &lt;profiles.active&gt;&lt;&#x2F;profiles.active&gt;"></a>标签 &lt;profiles.active&gt;&lt;&#x2F;profiles.active&gt;</h4><p>在开发项目的过程中，通常一个项目会对应着多个不同的环境，例如测试、开发、生产。其中每个环境的配置可能都不一样，因此在父pom文件引入&lt;profiles.active&gt;&lt;&#x2F;profiles.active&gt;能方便我们进行环境的切换。每一个&lt;profiles.active&gt;&lt;&#x2F;profiles.active&gt;对应不同的环境，每个环境对应不同的配置文件(application)。在maven中可以勾选对应的环境。</p><p><img src="/img/ruoyi-vue-plus%E4%B9%8Bpom%E6%96%87%E4%BB%B6/1.png"></p><p>注意：配置环境一定是要application-开头，加上&lt;profiles.active&gt;&lt;&#x2F;profiles.active&gt;中的内容，例如         &lt;profiles.active&gt;dev&lt;&#x2F;profiles.active&gt;就对应着application-dev</p><h4 id="标签-1"><a href="#标签-1" class="headerlink" title="标签 &lt;logging.level&gt;&lt;&#x2F;logging.level&gt;"></a>标签 &lt;logging.level&gt;&lt;&#x2F;logging.level&gt;</h4><p>表示日志级别，日志打印对应着8中形态，级别顺序为：</p><p><strong>ALL &lt; TRACE &lt; DEBUG &lt; INFO &lt; WARN &lt; ERROR &lt; FAIL &lt; OFF</strong></p><p>假设当前设置的日志级别是INFO,那么控制台以及日志文件只会显示info,warn,erroe,fail,off级别的日志，也就是只会显示日志级别大于等于info的日志，小于等于info的日志则不会显示在控制台以及日志文件中。</p><h3 id="modules和packaging"><a href="#modules和packaging" class="headerlink" title="modules和packaging"></a>modules和packaging</h3><h4 id="modules"><a href="#modules" class="headerlink" title="modules"></a>modules</h4><p>modules下声明的是子模块，没有子模块则不用声明。</p><p><img src="/img/ruoyi-vue-plus%E4%B9%8Bpom%E6%96%87%E4%BB%B6/2.png"></p><p><img src="/img/ruoyi-vue-plus%E4%B9%8Bpom%E6%96%87%E4%BB%B6/3.png"></p><h4 id="packaging"><a href="#packaging" class="headerlink" title="packaging"></a>packaging</h4><p>packaging意为打包方式，本身是父模块(父pom文件)时，打包方式为pom，这样子模块之间才能进行依赖传递。如果自身是非父模块，则使用jar方式进行打包。pom的意思是项目里没有java代码，也不执行任何代码，只是为了聚合工程或传递依赖用的。所以并不会寻找配置文件，若想配置文件生效，改为jar。如果没设置打包方式，默认是jar.</p><h3 id="build"><a href="#build" class="headerlink" title="build"></a>build</h3><h4 id="plugins"><a href="#plugins" class="headerlink" title="plugins"></a>plugins</h4><p>plugins引入的插件其实是本地仓库的一个jar包，<code>&lt;configuration&gt;</code>用来补充插件的配置信息。<code>&lt;annotationProcessorPaths&gt;</code>它用于指定在<strong>编译</strong>过程中使用的注解处理器的路径。这些处理器可以根据源代码的注解生成额外的代码或者执行各种任务。</p><figure><div class="code-wrapper"><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.apache.maven.plugins<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>maven-compiler-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>$&#123;maven-compiler-plugin.verison&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><span class="token punctuation">></span></span>$&#123;java.version&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>source</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>target</span><span class="token punctuation">></span></span>$&#123;java.version&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>target</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoding</span><span class="token punctuation">></span></span>$&#123;project.build.sourceEncoding&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoding</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>annotationProcessorPaths</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.github.therapi<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>therapi-runtime-javadoc-scribe<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>$&#123;therapi-javadoc.version&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>path</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>$&#123;lombok.version&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>path</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-configuration-processor<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>$&#123;spring-boot.version&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>path</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>io.github.linpeilie<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mapstruct-plus-processor<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>$&#123;mapstruct-plus.version&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>path</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>lombok-mapstruct-binding<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>$&#123;mapstruct-plus.lombok.version&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>path</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>annotationProcessorPaths</span><span class="token punctuation">></span></span>                <span class="token comment">&lt;!-- 用于指示编译器保留方法的参数名称，这在使用反射或生成文档时非常有用 --></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>compilerArgs</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span><span class="token punctuation">></span></span>-parameters<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>arg</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>compilerArgs</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!-- 单元测试使用 --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.apache.maven.plugins<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>maven-surefire-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>$&#123;maven-surefire-plugin.version&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span>                <span class="token comment">&lt;!-- 根据打包环境执行对应的@Tag测试方法 --></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groups</span><span class="token punctuation">></span></span>$&#123;profiles.active&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groups</span><span class="token punctuation">></span></span>                <span class="token comment">&lt;!-- 排除标签 --></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>excludedGroups</span><span class="token punctuation">></span></span>exclude<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>excludedGroups</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!-- 统一版本号管理 --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.codehaus.mojo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>flatten-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>$&#123;flatten-maven-plugin.version&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span>                <span class="token comment">&lt;!-- true：在执行flatten时会更新pom文件 --></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>updatePomFile</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>updatePomFile</span><span class="token punctuation">></span></span>                <span class="token comment">&lt;!-- 操作模式 --></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>flattenMode</span><span class="token punctuation">></span></span>resolveCiFriendliesOnly<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>flattenMode</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span>             <span class="token comment">&lt;!-- 在某个生命周期执行一些目标 --></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>executions</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>execution</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">></span></span>flatten<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span>                     <span class="token comment">&lt;!-- 生命周期 --></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phase</span><span class="token punctuation">></span></span>process-resources<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phase</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goals</span><span class="token punctuation">></span></span>                         <span class="token comment">&lt;!-- 执行目标 --></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goal</span><span class="token punctuation">></span></span>flatten<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goal</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goals</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>execution</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>execution</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">></span></span>flatten.clean<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phase</span><span class="token punctuation">></span></span>clean<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phase</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goals</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goal</span><span class="token punctuation">></span></span>clean<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goal</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goals</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>execution</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>executions</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><h4 id="resources"><a href="#resources" class="headerlink" title="resources"></a>resources</h4><p>在Maven中，“过滤”通常指的是再复制资源文件到输出目录（如编译后的目录）之前，将文件中的特定标记和占位符替换为预定的值。例如banner.txt文件下<code>Application Version: $&#123;revision&#125;</code>，<code>$&#123;revision&#125;</code>会被替换。</p><figure><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">&lt;resources&gt;    &lt;resource&gt;        &lt;directory&gt;src&#x2F;main&#x2F;resources&lt;&#x2F;directory&gt;        &lt;!-- 关闭过滤 --&gt;        &lt;filtering&gt;false&lt;&#x2F;filtering&gt;    &lt;&#x2F;resource&gt;    &lt;resource&gt;        &lt;directory&gt;src&#x2F;main&#x2F;resources&lt;&#x2F;directory&gt;        &lt;!-- 引入所有 匹配文件进行过滤 --&gt;        &lt;includes&gt;            &lt;include&gt;application*&lt;&#x2F;include&gt;            &lt;include&gt;bootstrap*&lt;&#x2F;include&gt;            &lt;include&gt;banner*&lt;&#x2F;include&gt;        &lt;&#x2F;includes&gt;        &lt;!-- 启用过滤 即该资源中的变量将会被过滤器中的值替换 --&gt;        &lt;filtering&gt;true&lt;&#x2F;filtering&gt;    &lt;&#x2F;resource&gt;&lt;&#x2F;resources&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>当我把<code>&lt;include&gt;banner*&lt;/include&gt;</code>注释后，运行程序，控制台打印如下：</p><p><img src="/img/ruoyi-vue-plus%E4%B9%8Bpom%E6%96%87%E4%BB%B6/4.png"></p><h4 id="repositories和pluginRepositories"><a href="#repositories和pluginRepositories" class="headerlink" title="repositories和pluginRepositories"></a>repositories和pluginRepositories</h4><figure><div class="code-wrapper"><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repositories</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repository</span><span class="token punctuation">></span></span>            <span class="token comment">&lt;!-- 唯一标识 --></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">></span></span>public<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span>            <span class="token comment">&lt;!-- 可读名称 --></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>huawei nexus<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>            <span class="token comment">&lt;!-- url地址 --></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">></span></span>https://mirrors.huaweicloud.com/repository/maven/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>releases</span><span class="token punctuation">></span></span>                <span class="token comment">&lt;!-- 表示允许从该仓库获取发布版（即稳定版）的依赖 --></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>releases</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repository</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repositories</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pluginRepositories</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pluginRepository</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">></span></span>public<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>huawei nexus<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">></span></span>https://mirrors.huaweicloud.com/repository/maven/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>releases</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>releases</span><span class="token punctuation">></span></span>            <span class="token comment">&lt;!-- 表示不允许从该插件仓库获取快照版（即开发版）的插件 --></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>snapshots</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">></span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>snapshots</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pluginRepository</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pluginRepositories</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p>本文参考了大佬们的文章：</p><p>日志级别：<a href="https://blog.csdn.net/qq_43842093/article/details/120582427">点击这里</a></p><p>packaging：<a href="https://blog.csdn.net/qq_31960623/article/details/123507486">点击这里</a></p>]]></content>
    
    
    <categories>
      
      <category>ruoyi-vue-plus</category>
      
      <category>pom文件</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ruoyi-vue-plus</tag>
      
      <tag>maven</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>PowerJob之邮件报警配置</title>
    <link href="/2024/04/18/PowerJob%E4%B9%8B%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6%E9%85%8D%E7%BD%AE/"/>
    <url>/2024/04/18/PowerJob%E4%B9%8B%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<p>文档地址：<a href="https://www.yuque.com/powerjob/guidence/intro">点击这里</a></p><hr><h4 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h4><figure><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">spring.mail.host&#x3D;smtp.163.comspring.mail.username&#x3D;becant223@163.com# 这里不是邮箱密码，而是授权码，通过下面方式获取spring.mail.password&#x3D;xxxxxxxxspring.mail.properties.mail.smtp.auth&#x3D;truespring.mail.properties.mail.smtp.starttls.enable&#x3D;truespring.mail.properties.mail.smtp.starttls.required&#x3D;true<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>配置文件配置的是 发送邮件的邮箱</p><h4 id="获取授权码"><a href="#获取授权码" class="headerlink" title="获取授权码"></a>获取授权码</h4><p>1.打开163邮箱官网，登录</p><p>2.点击顶部栏设置 —&gt; POP3&#x2F;SMTP&#x2F;IMAP</p><p>3.开启 POP3&#x2F;SMTP服务</p><h4 id="报警用户录入"><a href="#报警用户录入" class="headerlink" title="报警用户录入"></a>报警用户录入</h4><p>图片显示的邮件地址是 接收邮件的地址，(如果录入的是qq邮箱而且接收不到邮件，可以去垃圾箱看一看~~)</p><p><img src="/img/PowerJob%E4%B9%8B%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6%E9%85%8D%E7%BD%AE/1.png"></p><h4 id="代码解析"><a href="#代码解析" class="headerlink" title="代码解析"></a>代码解析</h4><h5 id="1-单机执行"><a href="#1-单机执行" class="headerlink" title="1.单机执行"></a>1.单机执行</h5><p>任务信息：</p><p><img src="/img/PowerJob%E4%B9%8B%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6%E9%85%8D%E7%BD%AE/2.png"></p><p>当任务执行失败时，经过一系列的方法，然后会进入processFinishedInstance()方法。</p><p><img src="/img/PowerJob%E4%B9%8B%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6%E9%85%8D%E7%BD%AE/3.png"></p><p>alert()方法</p><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"> <span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Service</span><span class="token annotation punctuation">@RequiredArgsConstructor</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">InstanceManager</span> <span class="token keyword">implements</span> <span class="token class-name">TransportServiceAware</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// 构造注入</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">AlarmCenter</span> alarmCenter<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token class-name">Long</span> instanceId<span class="token punctuation">,</span> <span class="token class-name">String</span> alertContent<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"alert=--==-=--=-==-=--=-==--==-=--=-==--==-=-=-=-"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 根据instanceId获取任务运行日志表</span>        <span class="token class-name">InstanceInfoDO</span> instanceInfo <span class="token operator">=</span> instanceInfoRepository<span class="token punctuation">.</span><span class="token function">findByInstanceId</span><span class="token punctuation">(</span>instanceId<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 任务信息表</span>        <span class="token class-name">JobInfoDO</span> jobInfo<span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token comment">// fetchJobInfoByInstanceId(instanceId):根据 instanceId 获取 JobInfo</span>            jobInfo <span class="token operator">=</span> instanceMetadataService<span class="token punctuation">.</span><span class="token function">fetchJobInfoByInstanceId</span><span class="token punctuation">(</span>instanceId<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            log<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">"[InstanceManager-&#123;&#125;] can't find jobInfo, alarm failed."</span><span class="token punctuation">,</span> instanceId<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// 获取任务执行失败告警对象</span>        <span class="token class-name">JobInstanceAlarm</span> content <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JobInstanceAlarm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 设置信息</span>        <span class="token class-name">BeanUtils</span><span class="token punctuation">.</span><span class="token function">copyProperties</span><span class="token punctuation">(</span>jobInfo<span class="token punctuation">,</span> content<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">BeanUtils</span><span class="token punctuation">.</span><span class="token function">copyProperties</span><span class="token punctuation">(</span>instanceInfo<span class="token punctuation">,</span> content<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// fetchNotifyUserList(jobInfo.getNotifyUserIds()):根据用户ID字符串获取用户信息详细列表</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserInfoDO</span><span class="token punctuation">></span></span> userList <span class="token operator">=</span> <span class="token class-name">SpringUtils</span><span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">UserService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fetchNotifyUserList</span><span class="token punctuation">(</span>jobInfo<span class="token punctuation">.</span><span class="token function">getNotifyUserIds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>alertContent<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            content<span class="token punctuation">.</span><span class="token function">setResult</span><span class="token punctuation">(</span>alertContent<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        alarmCenter<span class="token punctuation">.</span><span class="token function">alarmFailed</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> <span class="token class-name">AlarmUtils</span><span class="token punctuation">.</span><span class="token function">convertUserInfoList2AlarmTargetList</span><span class="token punctuation">(</span>userList<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>AlarmCenter类</p><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AlarmCenter</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">ExecutorService</span> <span class="token constant">POOL</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Alarmable</span><span class="token punctuation">></span></span> <span class="token constant">BEANS</span> <span class="token operator">=</span> <span class="token class-name">Lists</span><span class="token punctuation">.</span><span class="token function">newLinkedList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 用于构造注入，参数为Alarmble的实现类(DingTalkAlarmService,MailAlarmService,WebHookAlarmService)</span>    <span class="token keyword">public</span> <span class="token class-name">AlarmCenter</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Alarmable</span><span class="token punctuation">></span></span> alarmables<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> cores <span class="token operator">=</span> <span class="token class-name">Runtime</span><span class="token punctuation">.</span><span class="token function">getRuntime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">availableProcessors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">ThreadFactory</span> factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setNameFormat</span><span class="token punctuation">(</span><span class="token string">"AlarmPool-%d"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token constant">POOL</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadPoolExecutor</span><span class="token punctuation">(</span>cores<span class="token punctuation">,</span> cores<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">MINUTES</span><span class="token punctuation">,</span> <span class="token class-name">Queues</span><span class="token punctuation">.</span><span class="token function">newLinkedBlockingQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> factory<span class="token punctuation">)</span><span class="token punctuation">;</span>        alarmables<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>bean <span class="token operator">-></span> <span class="token punctuation">&#123;</span>            <span class="token constant">BEANS</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span>            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"[AlarmCenter] bean(className=&#123;&#125;,obj=&#123;&#125;) register to AlarmCenter successfully!"</span><span class="token punctuation">,</span> bean<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> bean<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">alarmFailed</span><span class="token punctuation">(</span><span class="token class-name">Alarm</span> alarm<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">AlarmTarget</span><span class="token punctuation">></span></span> alarmTargets<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"alarmFailed=--==-=--=-==-=--=-==--==-=--=-==--==-=-=-=-"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 录入警告信息时，只录入了邮件，而没有录入WebHook和钉钉</span>        <span class="token comment">// 故不会进入到DingTalkAlarmService.onFailed()和WebHookAlarmService.onFailed()</span>        <span class="token comment">// 只进入MailAlarmService.onFailed()</span>        <span class="token constant">POOL</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token constant">BEANS</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>alarmable <span class="token operator">-></span> <span class="token punctuation">&#123;</span>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"alarmable:&#123;&#125;"</span><span class="token punctuation">,</span> alarmable<span class="token punctuation">)</span><span class="token punctuation">;</span>                alarmable<span class="token punctuation">.</span><span class="token function">onFailed</span><span class="token punctuation">(</span>alarm<span class="token punctuation">,</span> alarmTargets<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                log<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">"[AlarmCenter] alarm failed."</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>MailAlarmService类</p><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * 邮件通知服务 * * @author tjq * @since 2020/4/30 */</span><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MailAlarmService</span> <span class="token keyword">implements</span> <span class="token class-name">Alarmable</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Resource</span>    <span class="token keyword">private</span> <span class="token class-name">Environment</span> environment<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">JavaMailSender</span> javaMailSender<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"$&#123;spring.mail.username:''&#125;"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> from<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onFailed</span><span class="token punctuation">(</span><span class="token class-name">Alarm</span> alarm<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">AlarmTarget</span><span class="token punctuation">></span></span> targetUserList<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"onFailed=--==-=--=-==-=--=-==--==-=--=-==--==-=-=-=-"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"javaMailSender:&#123;&#125;"</span><span class="token punctuation">,</span> javaMailSender<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">CollectionUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>targetUserList<span class="token punctuation">)</span> <span class="token operator">||</span> javaMailSender <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>from<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token class-name">SimpleMailMessage</span> sm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleMailMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            sm<span class="token punctuation">.</span><span class="token function">setFrom</span><span class="token punctuation">(</span>from<span class="token punctuation">)</span><span class="token punctuation">;</span>            sm<span class="token punctuation">.</span><span class="token function">setTo</span><span class="token punctuation">(</span>targetUserList<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">AlarmTarget</span><span class="token operator">::</span><span class="token function">getEmail</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token class-name">Objects</span><span class="token operator">::</span><span class="token function">nonNull</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>email <span class="token operator">-></span> <span class="token operator">!</span>email<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            sm<span class="token punctuation">.</span><span class="token function">setSubject</span><span class="token punctuation">(</span>alarm<span class="token punctuation">.</span><span class="token function">fetchTitle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            sm<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>alarm<span class="token punctuation">.</span><span class="token function">fetchContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            javaMailSender<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>sm<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            log<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">"[MailAlarmService] send mail failed, reason is &#123;&#125;"</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Autowired</span><span class="token punctuation">(</span>required <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setJavaMailSender</span><span class="token punctuation">(</span><span class="token class-name">JavaMailSender</span> javaMailSender<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>javaMailSender <span class="token operator">=</span> javaMailSender<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>当任务失败后，控制台的输出：</p><p><img src="/img/PowerJob%E4%B9%8B%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6%E9%85%8D%E7%BD%AE/4.png"></p><p>往下滑~~~~</p><p><img src="/img/PowerJob%E4%B9%8B%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6%E9%85%8D%E7%BD%AE/5.png"></p><p>大致流程就是这样了~</p>]]></content>
    
    
    
    <tags>
      
      <tag>PowerJob</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ruoyi-vue-plus之代码生成（二）</title>
    <link href="/2024/04/15/ruoyi-vue-plus%E4%B9%8B%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
    <url>/2024/04/15/ruoyi-vue-plus%E4%B9%8B%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<h3 id="本文主要将分析数据库字段以及下载生成的代码"><a href="#本文主要将分析数据库字段以及下载生成的代码" class="headerlink" title="本文主要将分析数据库字段以及下载生成的代码"></a>本文主要将分析数据库字段以及下载生成的代码</h3><p>文档地址：<a href="https://plus-doc.dromara.org/#/ruoyi-vue-plus/home">点击这里</a></p><p>项目地址：<a href="https://gitee.com/dromara/RuoYi-Vue-Plus/tree/4.X/">点击这里</a></p><p>功能介绍：<a href="https://plus-doc.dromara.org/#/ruoyi-vue-plus/framework/basic/code_generate">点击这里</a></p><hr><h4 id="简单介绍"><a href="#简单介绍" class="headerlink" title="简单介绍"></a>简单介绍</h4><p>对于该项目的代码生成，只需在项目数据库中把表创建好，然后将表添加到生成列表即可。如果表添加成功，则会在gen_table中生成一条数据，这条数据对应着表信息；以及在gen_table_column生成一条数据，这条数据对应表的字段信息。</p><h4 id="数据库字段的分析"><a href="#数据库字段的分析" class="headerlink" title="数据库字段的分析"></a>数据库字段的分析</h4><h5 id="1-代码生成业务表"><a href="#1-代码生成业务表" class="headerlink" title="1.代码生成业务表"></a>1.代码生成业务表</h5><figure><div class="code-wrapper"><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">drop table if exists gen_table;create table gen_table (  table_id          bigint(20)      not null                   comment &#39;编号&#39;,  table_name        varchar(200)    default &#39;&#39;                 comment &#39;表名称&#39;,  table_comment     varchar(500)    default &#39;&#39;                 comment &#39;表描述&#39;,  sub_table_name    varchar(64)     default null               comment &#39;关联子表的表名&#39;,  sub_table_fk_name varchar(64)     default null               comment &#39;子表关联的外键名&#39;,  class_name        varchar(100)    default &#39;&#39;                 comment &#39;实体类名称&#39;,  tpl_category      varchar(200)    default &#39;crud&#39;             comment &#39;使用的模板（crud单表操作 tree树表操作）&#39;,  package_name      varchar(100)                               comment &#39;生成包路径&#39;,  module_name       varchar(30)                                comment &#39;生成模块名&#39;,  business_name     varchar(30)                                comment &#39;生成业务名&#39;,  function_name     varchar(50)                                comment &#39;生成功能名&#39;,  function_author   varchar(50)                                comment &#39;生成功能作者&#39;,  gen_type          char(1)         default &#39;0&#39;                comment &#39;生成代码方式（0zip压缩包 1自定义路径）&#39;,  gen_path          varchar(200)    default &#39;&#x2F;&#39;                comment &#39;生成路径（不填默认项目路径）&#39;,  options           varchar(1000)                              comment &#39;其它生成选项&#39;,  create_by         varchar(64)     default &#39;&#39;                 comment &#39;创建者&#39;,  create_time       datetime                                   comment &#39;创建时间&#39;,  update_by         varchar(64)     default &#39;&#39;                 comment &#39;更新者&#39;,  update_time       datetime                                   comment &#39;更新时间&#39;,  remark            varchar(500)    default null               comment &#39;备注&#39;,  primary key (table_id)) engine&#x3D;innodb comment &#x3D; &#39;代码生成业务表&#39;;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><h5 id="2-代码生成业务表字段"><a href="#2-代码生成业务表字段" class="headerlink" title="2.代码生成业务表字段"></a>2.代码生成业务表字段</h5><figure><div class="code-wrapper"><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">drop table if exists gen_table_column;create table gen_table_column (  column_id         bigint(20)      not null                   comment &#39;编号&#39;,  table_id          bigint(20)                                 comment &#39;归属表编号&#39;,  column_name       varchar(200)                               comment &#39;列名称&#39;,  column_comment    varchar(500)                               comment &#39;列描述&#39;,  column_type       varchar(100)                               comment &#39;列类型&#39;,  java_type         varchar(500)                               comment &#39;JAVA类型&#39;,  java_field        varchar(200)                               comment &#39;JAVA字段名&#39;,  is_pk             char(1)                                    comment &#39;是否主键（1是）&#39;,  is_increment      char(1)                                    comment &#39;是否自增（1是）&#39;,  is_required       char(1)                                    comment &#39;是否必填（1是）&#39;,  is_insert         char(1)                                    comment &#39;是否为插入字段（1是）&#39;,  is_edit           char(1)                                    comment &#39;是否编辑字段（1是）&#39;,  is_list           char(1)                                    comment &#39;是否列表字段（1是）&#39;,  is_query          char(1)                                    comment &#39;是否查询字段（1是）&#39;,  query_type        varchar(200)    default &#39;EQ&#39;               comment &#39;查询方式（等于、不等于、大于、小于、范围）&#39;,  html_type         varchar(200)                               comment &#39;显示类型（文本框、文本域、下拉框、复选框、单选框、日期控件）&#39;,  dict_type         varchar(200)    default &#39;&#39;                 comment &#39;字典类型&#39;,  sort              int                                        comment &#39;排序&#39;,  create_by         varchar(64)     default &#39;&#39;                 comment &#39;创建者&#39;,  create_time       datetime                                   comment &#39;创建时间&#39;,  update_by         varchar(64)     default &#39;&#39;                 comment &#39;更新者&#39;,  update_time       datetime                                   comment &#39;更新时间&#39;,  primary key (column_id)) engine&#x3D;innodb comment &#x3D; &#39;代码生成业务表字段&#39;;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><h5 id="3-字段解释"><a href="#3-字段解释" class="headerlink" title="3.字段解释"></a>3.字段解释</h5><h6 id="引入包以及导入包"><a href="#引入包以及导入包" class="headerlink" title="引入包以及导入包"></a>引入包以及导入包</h6><p><img src="/img/ruoyi-vue-plus%E4%B9%8B%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%EF%BC%88%E4%BA%8C%EF%BC%89/1.png"></p><p>每生成一个类都必须要有的东西：那就是引入包名和导入包。为什么不添加importList字段呢，我个人认为，创建importList需要额外的一些操作。</p><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/**     * 根据列类型获取导入包     *     * @param genTable 业务表对象     * @return 返回需要导入的包列表     */</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> <span class="token function">getImportList</span><span class="token punctuation">(</span><span class="token class-name">GenTable</span> genTable<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">GenTableColumn</span><span class="token punctuation">></span></span> columns <span class="token operator">=</span> genTable<span class="token punctuation">.</span><span class="token function">getColumns</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">GenTable</span> subGenTable <span class="token operator">=</span> genTable<span class="token punctuation">.</span><span class="token function">getSubTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> importList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">ObjectUtil</span><span class="token punctuation">.</span><span class="token function">isNotNull</span><span class="token punctuation">(</span>subGenTable<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            importList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"java.util.List"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">GenTableColumn</span> column <span class="token operator">:</span> columns<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>column<span class="token punctuation">.</span><span class="token function">isSuperColumn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token class-name">GenConstants</span><span class="token punctuation">.</span><span class="token constant">TYPE_DATE</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>column<span class="token punctuation">.</span><span class="token function">getJavaType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                importList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"java.util.Date"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                importList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"com.fasterxml.jackson.annotation.JsonFormat"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>column<span class="token punctuation">.</span><span class="token function">isSuperColumn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token class-name">GenConstants</span><span class="token punctuation">.</span><span class="token constant">TYPE_BIGDECIMAL</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>column<span class="token punctuation">.</span><span class="token function">getJavaType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                importList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"java.math.BigDecimal"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> importList<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><h6 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h6><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * OSS对象存储对象 sys_oss * * @author ruoyi * @date 2024-04-15 */</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>OSS对象存储(function_name) 对象  sys_oss(table_name)</p><p>ruoyi(function_author)</p><p>2024-04-15(dateTimeNow(YYYY_MM_DD)，这里不用create_time，因为会显示时分秒)</p><h6 id="注解"><a href="#注解" class="headerlink" title="注解"></a>注解</h6><figure><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">@Data@EqualsAndHashCode(callSuper &#x3D; true)@TableName(&quot;sys_oss&quot;)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div></figure><p>sys_oss(table_name)</p><h6 id="类名以及属性"><a href="#类名以及属性" class="headerlink" title="类名以及属性"></a>类名以及属性</h6><h6 id="entity"><a href="#entity" class="headerlink" title="entity"></a>entity</h6><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SysOss</span> <span class="token keyword">extends</span> <span class="token class-name">BaseEntity</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID<span class="token operator">=</span><span class="token number">1L</span><span class="token punctuation">;</span>    <span class="token comment">/**     * 对象存储主键     */</span>    <span class="token annotation punctuation">@TableId</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"oss_id"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">Long</span> ossId<span class="token punctuation">;</span>    <span class="token comment">/**     * 文件名     */</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> fileName<span class="token punctuation">;</span>    <span class="token comment">/**     * 原名     */</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> originalName<span class="token punctuation">;</span>    <span class="token comment">/**     * 文件后缀名     */</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> fileSuffix<span class="token punctuation">;</span>    <span class="token comment">/**     * URL地址     */</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> url<span class="token punctuation">;</span>    <span class="token comment">/**     * 服务商     */</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> service<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p><img src="/img/ruoyi-vue-plus%E4%B9%8B%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%EF%BC%88%E4%BA%8C%EF%BC%89/2.png"></p><p>Bo</p><figure><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">public class SysOssBo extends BaseEntity &#123;    &#x2F;**     * 对象存储主键     *&#x2F;    @NotNull(message &#x3D; &quot;对象存储主键不能为空&quot;, groups &#x3D; &#123; EditGroup.class &#125;)    private Long ossId;    &#x2F;**     * 文件名     *&#x2F;    @NotBlank(message &#x3D; &quot;文件名不能为空&quot;, groups &#x3D; &#123; AddGroup.class, EditGroup.class &#125;)    private String fileName;    &#x2F;**     * 原名     *&#x2F;    @NotBlank(message &#x3D; &quot;原名不能为空&quot;, groups &#x3D; &#123; AddGroup.class, EditGroup.class &#125;)    private String originalName;    &#x2F;**     * 文件后缀名     *&#x2F;    @NotBlank(message &#x3D; &quot;文件后缀名不能为空&quot;, groups &#x3D; &#123; AddGroup.class, EditGroup.class &#125;)    private String fileSuffix;    &#x2F;**     * URL地址     *&#x2F;    @NotBlank(message &#x3D; &quot;URL地址不能为空&quot;, groups &#x3D; &#123; AddGroup.class, EditGroup.class &#125;)    private String url;    &#x2F;**     * 服务商     *&#x2F;    @NotBlank(message &#x3D; &quot;服务商不能为空&quot;, groups &#x3D; &#123; AddGroup.class, EditGroup.class &#125;)    private String service;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p> groups &#x3D; { AddGroup.class, EditGroup.class }，中括号里的内容是变量Group，是根据is_edit,is_insert字段的内容来设置的。</p><h6 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h6><p>看哪些内容是与表或类有关联的，则设置字段。剩余的都是固定的，在vm文件上写死即可。</p><p>其他的Controller、Service、Vo等等都是如此。</p><h4 id="4-下载生成的代码"><a href="#4-下载生成的代码" class="headerlink" title="4.下载生成的代码"></a>4.下载生成的代码</h4><h5 id="控制层方法："><a href="#控制层方法：" class="headerlink" title="控制层方法："></a>控制层方法：</h5><p>可以选择多张表，批量生成代码，生成的文件名为：ruoyi.zip</p><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/**     * 批量生成代码（下载方式）     * @param response 响应体     * @param tables 表名串     */</span>    <span class="token annotation punctuation">@SaCheckPermission</span><span class="token punctuation">(</span><span class="token string">"tool:gen:code"</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@Log</span><span class="token punctuation">(</span>title <span class="token operator">=</span> <span class="token string">"代码生成"</span><span class="token punctuation">,</span> businessType <span class="token operator">=</span> <span class="token class-name">BusinessType</span><span class="token punctuation">.</span><span class="token constant">GENCODE</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/batchGenCode"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">batchGenCode</span><span class="token punctuation">(</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> tables<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// 将字符串转换为字符串数组</span>        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> tableNames <span class="token operator">=</span> <span class="token class-name">Convert</span><span class="token punctuation">.</span><span class="token function">toStrArray</span><span class="token punctuation">(</span>tables<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> data <span class="token operator">=</span> genTableService<span class="token punctuation">.</span><span class="token function">downloadCode</span><span class="token punctuation">(</span>tableNames<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">genCode</span><span class="token punctuation">(</span>response<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * 生成zip文件     */</span>    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">genCode</span><span class="token punctuation">(</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> data<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// 清除响应缓冲区中存在的任何数据</span>        response<span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 将CORS标头设置为允许来自任何来源的请求</span>        response<span class="token punctuation">.</span><span class="token function">addHeader</span><span class="token punctuation">(</span><span class="token string">"Access-Control-Allow-Origin"</span><span class="token punctuation">,</span> <span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 表示将Content-Disposition暴露给客户端</span>        response<span class="token punctuation">.</span><span class="token function">addHeader</span><span class="token punctuation">(</span><span class="token string">"Access-Control-Expose-Headers"</span><span class="token punctuation">,</span> <span class="token string">"Content-Disposition"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 将Content-Disposition标头设置为指示响应应被视为附件下载，文件名为ruoyi.zip</span>        response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">"Content-Disposition"</span><span class="token punctuation">,</span> <span class="token string">"attachment; filename=\"ruoyi.zip\""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 将Content-Length标头设置为响应中发送数据的长度</span>        response<span class="token punctuation">.</span><span class="token function">addHeader</span><span class="token punctuation">(</span><span class="token string">"Content-Length"</span><span class="token punctuation">,</span> <span class="token string">""</span> <span class="token operator">+</span> data<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 将Content-Type标头设置为指示发送的内容为application/octet-stream，即二进制文件，并使用UTF-8编码</span>        response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"application/octet-stream; charset=UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">IoUtil</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><h5 id="服务层方法"><a href="#服务层方法" class="headerlink" title="服务层方法:"></a>服务层方法:</h5><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/**     * 批量生成代码（下载方式）     *     * @param tableNames 表数组     * @return 数据     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">downloadCode</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> tableNames<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">ByteArrayOutputStream</span> outputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ByteArrayOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 新建zip输出流对象</span>        <span class="token class-name">ZipOutputStream</span> zip <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ZipOutputStream</span><span class="token punctuation">(</span>outputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 循环每张表</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> tableName <span class="token operator">:</span> tableNames<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token function">generatorCode</span><span class="token punctuation">(</span>tableName<span class="token punctuation">,</span> zip<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// 关闭流</span>        <span class="token class-name">IoUtil</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>zip<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> outputStream<span class="token punctuation">.</span><span class="token function">toByteArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>         <span class="token comment">/**     * 生成代码（自定义路径）     * @param zip ZipOutputStream     * @param tableName 表名称     */</span>    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">generatorCode</span><span class="token punctuation">(</span><span class="token class-name">ZipOutputStream</span> zip<span class="token punctuation">,</span> <span class="token class-name">String</span> tableName<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">LinkedHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span> dataMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 查询表信息</span>        <span class="token class-name">GenTable</span> table <span class="token operator">=</span> genTableMapper<span class="token punctuation">.</span><span class="token function">selectGenTableByName</span><span class="token punctuation">(</span>tableName<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 设置表信息</span>        <span class="token function">setGenTable</span><span class="token punctuation">(</span>table<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 初始化模版引擎</span>        <span class="token class-name">VelocityInitializer</span><span class="token punctuation">.</span><span class="token function">initVelocity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 在上下文中设置模版变量</span>        <span class="token class-name">VelocityContext</span> context <span class="token operator">=</span> <span class="token class-name">VelocityUtils</span><span class="token punctuation">.</span><span class="token function">prepareContext</span><span class="token punctuation">(</span>table<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 获取模版信息</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> templateList <span class="token operator">=</span> <span class="token class-name">VelocityUtils</span><span class="token punctuation">.</span><span class="token function">getTemplateList</span><span class="token punctuation">(</span>tableName<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> template <span class="token operator">:</span> templateList<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token comment">// 渲染模版</span>            <span class="token class-name">StringWriter</span> sw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">Template</span> tp1 <span class="token operator">=</span> <span class="token class-name">Velocity</span><span class="token punctuation">.</span><span class="token function">getTemplate</span><span class="token punctuation">(</span>template<span class="token punctuation">,</span> <span class="token class-name">Constants</span><span class="token punctuation">.</span><span class="token constant">UTF8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// 用于合并模板（template）与上下文（context）并将结果写入到sw对象中</span>            tp1<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> sw<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                <span class="token comment">//添加到zip</span>                zip<span class="token punctuation">.</span><span class="token function">putNextEntry</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ZipEntry</span><span class="token punctuation">(</span><span class="token class-name">VelocityUtils</span><span class="token punctuation">.</span><span class="token function">getFileName</span><span class="token punctuation">(</span>template<span class="token punctuation">,</span> table<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// 把sw.toString()的内容写到zip输出流中，被设置编码为UTF-8，false为不关闭流</span>                <span class="token class-name">IoUtil</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>zip<span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> sw<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">IoUtil</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>sw<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// 刷新</span>                zip<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                zip<span class="token punctuation">.</span><span class="token function">closeEntry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"渲染模板失败，表名："</span> <span class="token operator">+</span> table<span class="token punctuation">.</span><span class="token function">getTableName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span> <span class="token comment">/**     * 设置表信息     * @param table 表     */</span>    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">setGenTable</span><span class="token punctuation">(</span><span class="token class-name">GenTable</span> table<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// 设置菜单id列表</span>        <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">></span></span> menuIds <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">6</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token comment">// 把生成id(雪花算法)添加到列表</span>            menuIds<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>identifierGenerator<span class="token punctuation">.</span><span class="token function">nextId</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">longValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        table<span class="token punctuation">.</span><span class="token function">setMenuIds</span><span class="token punctuation">(</span>menuIds<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 设置主子表信息</span>        <span class="token function">setSubTable</span><span class="token punctuation">(</span>table<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 设置主键信息</span>        <span class="token function">setPKColumn</span><span class="token punctuation">(</span>table<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>]]></content>
    
    
    <categories>
      
      <category>ruoyi-vue-plus</category>
      
      <category>代码生成</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ruoyi-vue-plus</tag>
      
      <tag>Velocity</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ruoyi-vue-plus之代码生成（一）</title>
    <link href="/2024/04/14/ruoyi-vue-plus%E4%B9%8B%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%EF%BC%88%E4%B8%80%EF%BC%89/"/>
    <url>/2024/04/14/ruoyi-vue-plus%E4%B9%8B%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<h3 id="本文主要讲解ruoyi-vue-plus项目-4-X分支-代码生成功能的Velocity模板语言"><a href="#本文主要讲解ruoyi-vue-plus项目-4-X分支-代码生成功能的Velocity模板语言" class="headerlink" title="本文主要讲解ruoyi-vue-plus项目(4.X分支)代码生成功能的Velocity模板语言"></a>本文主要讲解ruoyi-vue-plus项目(4.X分支)代码生成功能的Velocity模板语言</h3><p>文档地址：<a href="https://plus-doc.dromara.org/#/ruoyi-vue-plus/home">点击这里</a></p><p>项目地址：<a href="https://gitee.com/dromara/RuoYi-Vue-Plus/tree/4.X/">点击这里</a></p><p>功能介绍：<a href="https://plus-doc.dromara.org/#/ruoyi-vue-plus/framework/basic/code_generate">点击这里</a></p><hr><h4 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h4><p>以下代码与源代码不一样，该项目不使用主子表，为了方便，故删除关于主子表的代码。</p><h4 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h4><h5 id="1-在java代码中设置模版变量信息"><a href="#1-在java代码中设置模版变量信息" class="headerlink" title="1.在java代码中设置模版变量信息"></a>1.在java代码中设置模版变量信息</h5><h5 id="2-设置模板信息"><a href="#2-设置模板信息" class="headerlink" title="2.设置模板信息"></a>2.设置模板信息</h5><p>源代码地址：<a href="https://gitee.com/dromara/RuoYi-Vue-Plus/blob/4.X/ruoyi-generator/src/main/java/com/ruoyi/generator/util/VelocityUtils.java">点击这里</a></p><h4 id="Velocity模板语言"><a href="#Velocity模板语言" class="headerlink" title="Velocity模板语言"></a>Velocity模板语言</h4><h5 id="bo-java-vm"><a href="#bo-java-vm" class="headerlink" title="bo.java.vm"></a>bo.java.vm</h5><p>bo的简单介绍：前端传给后端的数据。</p><figure><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">package $&#123;packageName&#125;.domain.bo;import com.ruoyi.common.core.validate.AddGroup;import com.ruoyi.common.core.validate.EditGroup;import lombok.Data;import lombok.EqualsAndHashCode;import javax.validation.constraints.*;import java.util.Date;##遍历importList#foreach ($import in $importList)import $&#123;import&#125;;#end## 如果是单表操作#if($table.crud)import com.ruoyi.common.core.domain.BaseEntity;## 如果是树表操作#elseif($table.tree)import com.ruoyi.common.core.domain.TreeEntity;#end## 注释文档&#x2F;** * $&#123;functionName&#125;业务对象 $&#123;tableName&#125; * * @author $&#123;author&#125; * @date $&#123;datetime&#125; *&#x2F; ## 设置Entity变量#if($table.crud)#set($Entity&#x3D;&quot;BaseEntity&quot;)#elseif($table.tree)#set($Entity&#x3D;&quot;TreeEntity&lt;$&#123;ClassName&#125;Bo&gt;&quot;)#end@Data@EqualsAndHashCode(callSuper &#x3D; true)public class $&#123;ClassName&#125;Bo extends $&#123;Entity&#125; &#123;## 遍历Columns#foreach ($column in $columns)## 如果不是父类字段(因为继承了父类，所以不用额外声明)以及是否为查询字段或插入字段或修改字段#if(!$table.isSuperColumn($column.javaField) &amp;&amp; ($column.query || $column.insert || $column.edit))    &#x2F;**     * $column.columnComment     *&#x2F;## 设置校验组变量#if($column.insert &amp;&amp; $column.edit)#set($Group&#x3D;&quot;AddGroup.class, EditGroup.class&quot;)#elseif($column.insert)#set($Group&#x3D;&quot;AddGroup.class&quot;)#elseif($column.edit)#set($Group&#x3D;&quot;EditGroup.class&quot;)#end## 判断字段是否为必填#if($column.required)## 添加校验注解：由于是bo对象，所以要对变量进行校验#if($column.javaType &#x3D;&#x3D; &#39;String&#39;)    @NotBlank(message &#x3D; &quot;$column.columnComment不能为空&quot;, groups &#x3D; &#123; $Group &#125;)#else    @NotNull(message &#x3D; &quot;$column.columnComment不能为空&quot;, groups &#x3D; &#123; $Group &#125;)#end#end    private $column.javaType $column.javaField;    #end#end&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><h5 id="vo-java-vm"><a href="#vo-java-vm" class="headerlink" title="vo.java.vm"></a>vo.java.vm</h5><p>vo的简单介绍：视图层对象，后端传递给前端的数据。</p><p>数据的导出：通过EasyExcel工具将数据导出到excel表格</p><figure><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">package $&#123;packageName&#125;.domain.vo;#foreach ($import in $importList)import $&#123;import&#125;;#endimport com.alibaba.excel.annotation.ExcelIgnoreUnannotated;import com.alibaba.excel.annotation.ExcelProperty;import com.ruoyi.common.annotation.ExcelDictFormat;import com.ruoyi.common.convert.ExcelDictConvert;import lombok.Data;import java.util.Date;import java.io.Serializable;&#x2F;** * $&#123;functionName&#125;视图对象 $&#123;tableName&#125; * * @author $&#123;author&#125; * @date $&#123;datetime&#125; *&#x2F;@Data@ExcelIgnoreUnannotatedpublic class $&#123;ClassName&#125;Vo implements Serializable &#123;    private static final long serialVersionUID &#x3D; 1L;#foreach ($column in $columns)## 判断是否为列表对象#if($column.list)    &#x2F;**     * $column.columnComment     *&#x2F;## column.columnComment的格式为：纯文字 ; 文字(1含义 2含义) ## 例如：公告标题 ; 公告类型（1通知 2公告）## 对于有括号的字段描述，数据库存储的是数字，当导出数据是，需要把数字转换数字对应的文字#set($parentheseIndex&#x3D;$column.columnComment.indexOf(&quot;（&quot;))## 如果有括号#if($parentheseIndex !&#x3D; -1)#set($comment&#x3D;$column.columnComment.substring(0, $parentheseIndex))## 否则#else#set($comment&#x3D;$column.columnComment)#end## 是否是根据字典类型转换#if($&#123;column.dictType&#125; &amp;&amp; $&#123;column.dictType&#125; !&#x3D; &#39;&#39;)    @ExcelProperty(value &#x3D; &quot;$&#123;comment&#125;&quot;, converter &#x3D; ExcelDictConvert.class)    @ExcelDictFormat(dictType &#x3D; &quot;$&#123;column.dictType&#125;&quot;)## 是否是根据自定义表达式转换#elseif($parentheseIndex !&#x3D; -1)    @ExcelProperty(value &#x3D; &quot;$&#123;comment&#125;&quot;, converter &#x3D; ExcelDictConvert.class)    @ExcelDictFormat(readConverterExp &#x3D; &quot;$column.readConverterExp()&quot;)## 不需要转换#else    @ExcelProperty(value &#x3D; &quot;$&#123;comment&#125;&quot;)#end    private $column.javaType $column.javaField;    #end#end&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><h5 id="domain-java-vm"><a href="#domain-java-vm" class="headerlink" title="domain.java.vm"></a>domain.java.vm</h5><figure><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">package $&#123;packageName&#125;.domain;import com.baomidou.mybatisplus.annotation.*;import lombok.Data;import lombok.EqualsAndHashCode;import java.io.Serializable;import java.util.Date;import java.math.BigDecimal;#foreach ($import in $importList)import $&#123;import&#125;;#end#if($table.crud)import com.ruoyi.common.core.domain.BaseEntity;#elseif($table.tree)import com.ruoyi.common.core.domain.TreeEntity;#end&#x2F;** * $&#123;functionName&#125;对象 $&#123;tableName&#125; * * @author $&#123;author&#125; * @date $&#123;datetime&#125; *&#x2F;#if($table.crud)    #set($Entity&#x3D;&quot;BaseEntity&quot;)#elseif($table.tree)    #set($Entity&#x3D;&quot;TreeEntity&lt;$&#123;ClassName&#125;&gt;&quot;)#end@Data@EqualsAndHashCode(callSuper &#x3D; true)@TableName(&quot;$&#123;tableName&#125;&quot;)public class $&#123;ClassName&#125; extends $&#123;Entity&#125; &#123;    private static final long serialVersionUID&#x3D;1L;#foreach ($column in $columns)#if(!$table.isSuperColumn($column.javaField))    &#x2F;**     * $column.columnComment     *&#x2F;## 如果是逻辑删除#if($column.javaField&#x3D;&#x3D;&#39;delFlag&#39;)    @TableLogic#end## 如果是版本信息#if($column.javaField&#x3D;&#x3D;&#39;version&#39;)    @Version#end## 如果是主键#if($column.pk)    @TableId(value &#x3D; &quot;$column.columnName&quot;)#end    private $column.javaType $column.javaField;    #end#end&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><h5 id="controller-java-vm"><a href="#controller-java-vm" class="headerlink" title="controller.java.vm"></a>controller.java.vm</h5><figure><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">package $&#123;packageName&#125;.controller;import java.util.List;import java.util.Arrays;import java.util.concurrent.TimeUnit;import lombok.RequiredArgsConstructor;import javax.servlet.http.HttpServletResponse;import javax.validation.constraints.*;import cn.dev33.satoken.annotation.SaCheckPermission;import org.springframework.web.bind.annotation.*;import org.springframework.validation.annotation.Validated;import com.ruoyi.common.annotation.RepeatSubmit;import com.ruoyi.common.annotation.Log;import com.ruoyi.common.core.controller.BaseController;import com.ruoyi.common.core.domain.PageQuery;import com.ruoyi.common.core.domain.R;import com.ruoyi.common.core.validate.AddGroup;import com.ruoyi.common.core.validate.EditGroup;import com.ruoyi.common.core.validate.QueryGroup;import com.ruoyi.common.enums.BusinessType;import com.ruoyi.common.utils.poi.ExcelUtil;import $&#123;packageName&#125;.domain.vo.$&#123;ClassName&#125;Vo;import $&#123;packageName&#125;.domain.bo.$&#123;ClassName&#125;Bo;import $&#123;packageName&#125;.service.I$&#123;ClassName&#125;Service;#if($table.crud)import com.ruoyi.common.core.page.TableDataInfo;#elseif($table.tree)#end&#x2F;** * $&#123;functionName&#125; * * @author $&#123;author&#125; * @date $&#123;datetime&#125; *&#x2F;@Validated@RequiredArgsConstructor@RestController@RequestMapping(&quot;&#x2F;$&#123;moduleName&#125;&#x2F;$&#123;businessName&#125;&quot;)public class $&#123;ClassName&#125;Controller extends BaseController &#123;    private final I$&#123;ClassName&#125;Service i$&#123;ClassName&#125;Service;    &#x2F;**     * 分页查询$&#123;functionName&#125;列表     *&#x2F;    @SaCheckPermission(&quot;$&#123;permissionPrefix&#125;:list&quot;)    @GetMapping(&quot;&#x2F;list&quot;)#if($table.crud)    public TableDataInfo&lt;$&#123;ClassName&#125;Vo&gt; list($&#123;ClassName&#125;Bo bo, PageQuery pageQuery) &#123;        return i$&#123;ClassName&#125;Service.queryPageList(bo, pageQuery);    &#125;#elseif($table.tree)    public R&lt;List&lt;$&#123;ClassName&#125;Vo&gt;&gt; list($&#123;ClassName&#125;Bo bo) &#123;        List&lt;$&#123;ClassName&#125;Vo&gt; list &#x3D; i$&#123;ClassName&#125;Service.queryList(bo);        return R.ok(list);    &#125;#end    &#x2F;**     * 导出$&#123;functionName&#125;列表     *&#x2F;    @SaCheckPermission(&quot;$&#123;permissionPrefix&#125;:export&quot;)    @Log(title &#x3D; &quot;$&#123;functionName&#125;&quot;, businessType &#x3D; BusinessType.EXPORT)    @PostMapping(&quot;&#x2F;export&quot;)    public void export($&#123;ClassName&#125;Bo bo, HttpServletResponse response) &#123;        List&lt;$&#123;ClassName&#125;Vo&gt; list &#x3D; i$&#123;ClassName&#125;Service.queryList(bo);        ## 导出excel        ExcelUtil.exportExcel(list, &quot;$&#123;functionName&#125;&quot;, $&#123;ClassName&#125;Vo.class, response);    &#125;    &#x2F;**     * 获取$&#123;functionName&#125;详细信息     *     * @param $&#123;pkColumn.javaField&#125; 主键     *&#x2F;    @SaCheckPermission(&quot;$&#123;permissionPrefix&#125;:query&quot;)    @GetMapping(&quot;&#x2F;&#123;$&#123;pkColumn.javaField&#125;&#125;&quot;)    public R&lt;$&#123;ClassName&#125;Vo&gt; getInfo(@NotNull(message &#x3D; &quot;主键不能为空&quot;)                                     @PathVariable $&#123;pkColumn.javaType&#125; $&#123;pkColumn.javaField&#125;) &#123;        return R.ok(i$&#123;ClassName&#125;Service.queryById($&#123;pkColumn.javaField&#125;));    &#125;    &#x2F;**     * 新增$&#123;functionName&#125;     *&#x2F;    @SaCheckPermission(&quot;$&#123;permissionPrefix&#125;:add&quot;)    @Log(title &#x3D; &quot;$&#123;functionName&#125;&quot;, businessType &#x3D; BusinessType.INSERT)    @RepeatSubmit()    @PostMapping()    public R&lt;Void&gt; add(@Validated(AddGroup.class) @RequestBody $&#123;ClassName&#125;Bo bo) &#123;        return toAjax(i$&#123;ClassName&#125;Service.insertByBo(bo));    &#125;    &#x2F;**     * 修改$&#123;functionName&#125;     *&#x2F;    @SaCheckPermission(&quot;$&#123;permissionPrefix&#125;:edit&quot;)    @Log(title &#x3D; &quot;$&#123;functionName&#125;&quot;, businessType &#x3D; BusinessType.UPDATE)    @RepeatSubmit()    @PutMapping()    public R&lt;Void&gt; edit(@Validated(EditGroup.class) @RequestBody $&#123;ClassName&#125;Bo bo) &#123;        return toAjax(i$&#123;ClassName&#125;Service.updateByBo(bo));    &#125;    &#x2F;**     * 删除$&#123;functionName&#125;     *     * @param $&#123;pkColumn.javaField&#125;s 主键串     *&#x2F;    @SaCheckPermission(&quot;$&#123;permissionPrefix&#125;:remove&quot;)    @Log(title &#x3D; &quot;$&#123;functionName&#125;&quot;, businessType &#x3D; BusinessType.DELETE)    @DeleteMapping(&quot;&#x2F;&#123;$&#123;pkColumn.javaField&#125;s&#125;&quot;)    public R&lt;Void&gt; remove(@NotEmpty(message &#x3D; &quot;主键不能为空&quot;)                          @PathVariable $&#123;pkColumn.javaType&#125;[] $&#123;pkColumn.javaField&#125;s) &#123;        return toAjax(i$&#123;ClassName&#125;Service.deleteWithValidByIds(Arrays.asList($&#123;pkColumn.javaField&#125;s), true));    &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><h5 id="service-java-vm"><a href="#service-java-vm" class="headerlink" title="service.java.vm"></a>service.java.vm</h5><figure><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">package $&#123;packageName&#125;.service;import $&#123;packageName&#125;.domain.$&#123;ClassName&#125;;import $&#123;packageName&#125;.domain.vo.$&#123;ClassName&#125;Vo;import $&#123;packageName&#125;.domain.bo.$&#123;ClassName&#125;Bo;#if($table.crud || $table.sub)import com.ruoyi.common.core.page.TableDataInfo;import com.ruoyi.common.core.domain.PageQuery;#endimport java.util.Collection;import java.util.List;&#x2F;** * $&#123;functionName&#125;Service接口 * * @author $&#123;author&#125; * @date $&#123;datetime&#125; *&#x2F;public interface I$&#123;ClassName&#125;Service &#123;    &#x2F;**     * 查询$&#123;functionName&#125;     *&#x2F;    $&#123;ClassName&#125;Vo queryById($&#123;pkColumn.javaType&#125; $&#123;pkColumn.javaField&#125;);#if($table.crud)    &#x2F;**     * 查询$&#123;functionName&#125;列表     *&#x2F;    TableDataInfo&lt;$&#123;ClassName&#125;Vo&gt; queryPageList($&#123;ClassName&#125;Bo bo, PageQuery pageQuery);#end    &#x2F;**     * 查询$&#123;functionName&#125;列表     *&#x2F;    List&lt;$&#123;ClassName&#125;Vo&gt; queryList($&#123;ClassName&#125;Bo bo);    &#x2F;**     * 新增$&#123;functionName&#125;     *&#x2F;    Boolean insertByBo($&#123;ClassName&#125;Bo bo);    &#x2F;**     * 修改$&#123;functionName&#125;     *&#x2F;    Boolean updateByBo($&#123;ClassName&#125;Bo bo);    &#x2F;**     * 校验并批量删除$&#123;functionName&#125;信息     *&#x2F;    Boolean deleteWithValidByIds(Collection&lt;$&#123;pkColumn.javaType&#125;&gt; ids, Boolean isValid);&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><h5 id="serviceImpl-java-vm"><a href="#serviceImpl-java-vm" class="headerlink" title="serviceImpl.java.vm"></a>serviceImpl.java.vm</h5><figure><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">package $&#123;packageName&#125;.service.impl;import cn.hutool.core.bean.BeanUtil;import com.ruoyi.common.utils.StringUtils;#if($table.crud)import com.ruoyi.common.core.page.TableDataInfo;import com.ruoyi.common.core.domain.PageQuery;import com.baomidou.mybatisplus.extension.plugins.pagination.Page;#endimport com.baomidou.mybatisplus.core.conditions.query.LambdaQueryWrapper;import com.baomidou.mybatisplus.core.toolkit.Wrappers;import lombok.RequiredArgsConstructor;import org.springframework.stereotype.Service;import $&#123;packageName&#125;.domain.bo.$&#123;ClassName&#125;Bo;import $&#123;packageName&#125;.domain.vo.$&#123;ClassName&#125;Vo;import $&#123;packageName&#125;.domain.$&#123;ClassName&#125;;import $&#123;packageName&#125;.mapper.$&#123;ClassName&#125;Mapper;import $&#123;packageName&#125;.service.I$&#123;ClassName&#125;Service;import java.util.List;import java.util.Map;import java.util.Collection;&#x2F;** * $&#123;functionName&#125;Service业务层处理 * * @author $&#123;author&#125; * @date $&#123;datetime&#125; *&#x2F;@RequiredArgsConstructor@Servicepublic class $&#123;ClassName&#125;ServiceImpl implements I$&#123;ClassName&#125;Service &#123;    private final $&#123;ClassName&#125;Mapper baseMapper;    &#x2F;**     * 查询$&#123;functionName&#125;     *&#x2F;    @Override    public $&#123;ClassName&#125;Vo queryById($&#123;pkColumn.javaType&#125; $&#123;pkColumn.javaField&#125;)&#123;        return baseMapper.selectVoById($&#123;pkColumn.javaField&#125;);    &#125;#if($table.crud)    &#x2F;**     * 查询$&#123;functionName&#125;列表     *&#x2F;    @Override    public TableDataInfo&lt;$&#123;ClassName&#125;Vo&gt; queryPageList($&#123;ClassName&#125;Bo bo, PageQuery pageQuery) &#123;        LambdaQueryWrapper&lt;$&#123;ClassName&#125;&gt; lqw &#x3D; buildQueryWrapper(bo);        Page&lt;$&#123;ClassName&#125;Vo&gt; result &#x3D; baseMapper.selectVoPage(pageQuery.build(), lqw);        return TableDataInfo.build(result);    &#125;#end    &#x2F;**     * 查询$&#123;functionName&#125;列表     *&#x2F;    @Override    public List&lt;$&#123;ClassName&#125;Vo&gt; queryList($&#123;ClassName&#125;Bo bo) &#123;        LambdaQueryWrapper&lt;$&#123;ClassName&#125;&gt; lqw &#x3D; buildQueryWrapper(bo);        return baseMapper.selectVoList(lqw);    &#125;    private LambdaQueryWrapper&lt;$&#123;ClassName&#125;&gt; buildQueryWrapper($&#123;ClassName&#125;Bo bo) &#123;        Map&lt;String, Object&gt; params &#x3D; bo.getParams();        LambdaQueryWrapper&lt;$&#123;ClassName&#125;&gt; lqw &#x3D; Wrappers.lambdaQuery();#foreach($column in $columns)#if($column.query)#set($queryType&#x3D;$column.queryType)#set($javaField&#x3D;$column.javaField)#set($javaType&#x3D;$column.javaType)#set($columnName&#x3D;$column.columnName)#set($AttrName&#x3D;$column.javaField.substring(0,1).toUpperCase() + $&#123;column.javaField.substring(1)&#125;)#set($mpMethod&#x3D;$column.queryType.toLowerCase())#if($queryType !&#x3D; &#39;BETWEEN&#39;)#if($javaType &#x3D;&#x3D; &#39;String&#39;)#set($condition&#x3D;&#39;StringUtils.isNotBlank(bo.get&#39;+$AttrName+&#39;())&#39;)#else#set($condition&#x3D;&#39;bo.get&#39;+$AttrName+&#39;() !&#x3D; null&#39;)#end        lqw.$mpMethod($condition, $&#123;ClassName&#125;::get$AttrName, bo.get$AttrName());#else        lqw.between(params.get(&quot;begin$AttrName&quot;) !&#x3D; null &amp;&amp; params.get(&quot;end$AttrName&quot;) !&#x3D; null,            $&#123;ClassName&#125;::get$AttrName ,params.get(&quot;begin$AttrName&quot;), params.get(&quot;end$AttrName&quot;));#end#end#end        return lqw;    &#125;    &#x2F;**     * 新增$&#123;functionName&#125;     *&#x2F;    @Override    public Boolean insertByBo($&#123;ClassName&#125;Bo bo) &#123;        $&#123;ClassName&#125; add &#x3D; BeanUtil.toBean(bo, $&#123;ClassName&#125;.class);        validEntityBeforeSave(add);        boolean flag &#x3D; baseMapper.insert(add) &gt; 0;#set($pk&#x3D;$pkColumn.javaField.substring(0,1).toUpperCase() + $&#123;pkColumn.javaField.substring(1)&#125;)        if (flag) &#123;            bo.set$pk(add.get$pk());        &#125;        return flag;    &#125;    &#x2F;**     * 修改$&#123;functionName&#125;     *&#x2F;    @Override    public Boolean updateByBo($&#123;ClassName&#125;Bo bo) &#123;        $&#123;ClassName&#125; update &#x3D; BeanUtil.toBean(bo, $&#123;ClassName&#125;.class);        validEntityBeforeSave(update);        return baseMapper.updateById(update) &gt; 0;    &#125;    &#x2F;**     * 保存前的数据校验     *&#x2F;    private void validEntityBeforeSave($&#123;ClassName&#125; entity)&#123;        &#x2F;&#x2F;TODO 做一些数据校验,如唯一约束    &#125;    &#x2F;**     * 批量删除$&#123;functionName&#125;     *&#x2F;    @Override    public Boolean deleteWithValidByIds(Collection&lt;$&#123;pkColumn.javaType&#125;&gt; ids, Boolean isValid) &#123;        if(isValid)&#123;            &#x2F;&#x2F;TODO 做一些业务上的校验,判断是否需要校验        &#125;        return baseMapper.deleteBatchIds(ids) &gt; 0;    &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><h5 id="mapper-java-vm"><a href="#mapper-java-vm" class="headerlink" title="mapper.java.vm"></a>mapper.java.vm</h5><figure><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">package $&#123;packageName&#125;.mapper;import $&#123;packageName&#125;.domain.$&#123;ClassName&#125;;import $&#123;packageName&#125;.domain.vo.$&#123;ClassName&#125;Vo;import com.ruoyi.common.core.mapper.BaseMapperPlus;&#x2F;** * $&#123;functionName&#125;Mapper接口 * * @author $&#123;author&#125; * @date $&#123;datetime&#125; *&#x2F;public interface $&#123;ClassName&#125;Mapper extends BaseMapperPlus&lt;$&#123;ClassName&#125;Mapper, $&#123;ClassName&#125;, $&#123;ClassName&#125;Vo&gt; &#123;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><h5 id="sql-vm"><a href="#sql-vm" class="headerlink" title="sql.vm"></a>sql.vm</h5><p>由于项目设置了菜单功能，所以生成新的业务时需要把数据设置到菜单表上。</p><figure><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">-- 菜单 SQLinsert into sys_menu (menu_id, menu_name, parent_id, order_num, path, component, is_frame, is_cache, menu_type, visible, status, perms, icon, create_by, create_time, update_by, update_time, remark)values($&#123;table.menuIds[0]&#125;, &#39;$&#123;functionName&#125;&#39;, &#39;$&#123;parentMenuId&#125;&#39;, &#39;1&#39;, &#39;$&#123;businessName&#125;&#39;, &#39;$&#123;moduleName&#125;&#x2F;$&#123;businessName&#125;&#x2F;index&#39;, 1, 0, &#39;C&#39;, &#39;0&#39;, &#39;0&#39;, &#39;$&#123;permissionPrefix&#125;:list&#39;, &#39;#&#39;, &#39;admin&#39;, sysdate(), &#39;&#39;, null, &#39;$&#123;functionName&#125;菜单&#39;);-- 按钮 SQLinsert into sys_menu (menu_id, menu_name, parent_id, order_num, path, component, is_frame, is_cache, menu_type, visible, status, perms, icon, create_by, create_time, update_by, update_time, remark)values($&#123;table.menuIds[1]&#125;, &#39;$&#123;functionName&#125;查询&#39;, $&#123;table.menuIds[0]&#125;, &#39;1&#39;,  &#39;#&#39;, &#39;&#39;, 1, 0, &#39;F&#39;, &#39;0&#39;, &#39;0&#39;, &#39;$&#123;permissionPrefix&#125;:query&#39;,        &#39;#&#39;, &#39;admin&#39;, sysdate(), &#39;&#39;, null, &#39;&#39;);insert into sys_menu (menu_id, menu_name, parent_id, order_num, path, component, is_frame, is_cache, menu_type, visible, status, perms, icon, create_by, create_time, update_by, update_time, remark)values($&#123;table.menuIds[2]&#125;, &#39;$&#123;functionName&#125;新增&#39;, $&#123;table.menuIds[0]&#125;, &#39;2&#39;,  &#39;#&#39;, &#39;&#39;, 1, 0, &#39;F&#39;, &#39;0&#39;, &#39;0&#39;, &#39;$&#123;permissionPrefix&#125;:add&#39;,          &#39;#&#39;, &#39;admin&#39;, sysdate(), &#39;&#39;, null, &#39;&#39;);insert into sys_menu (menu_id, menu_name, parent_id, order_num, path, component, is_frame, is_cache, menu_type, visible, status, perms, icon, create_by, create_time, update_by, update_time, remark)values($&#123;table.menuIds[3]&#125;, &#39;$&#123;functionName&#125;修改&#39;, $&#123;table.menuIds[0]&#125;, &#39;3&#39;,  &#39;#&#39;, &#39;&#39;, 1, 0, &#39;F&#39;, &#39;0&#39;, &#39;0&#39;, &#39;$&#123;permissionPrefix&#125;:edit&#39;,         &#39;#&#39;, &#39;admin&#39;, sysdate(), &#39;&#39;, null, &#39;&#39;);insert into sys_menu (menu_id, menu_name, parent_id, order_num, path, component, is_frame, is_cache, menu_type, visible, status, perms, icon, create_by, create_time, update_by, update_time, remark)values($&#123;table.menuIds[4]&#125;, &#39;$&#123;functionName&#125;删除&#39;, $&#123;table.menuIds[0]&#125;, &#39;4&#39;,  &#39;#&#39;, &#39;&#39;, 1, 0, &#39;F&#39;, &#39;0&#39;, &#39;0&#39;, &#39;$&#123;permissionPrefix&#125;:remove&#39;,       &#39;#&#39;, &#39;admin&#39;, sysdate(), &#39;&#39;, null, &#39;&#39;);insert into sys_menu (menu_id, menu_name, parent_id, order_num, path, component, is_frame, is_cache, menu_type, visible, status, perms, icon, create_by, create_time, update_by, update_time, remark)values($&#123;table.menuIds[5]&#125;, &#39;$&#123;functionName&#125;导出&#39;, $&#123;table.menuIds[0]&#125;, &#39;5&#39;,  &#39;#&#39;, &#39;&#39;, 1, 0, &#39;F&#39;, &#39;0&#39;, &#39;0&#39;, &#39;$&#123;permissionPrefix&#125;:export&#39;,       &#39;#&#39;, &#39;admin&#39;, sysdate(), &#39;&#39;, null, &#39;&#39;);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><h5 id="mapper-xml-vm"><a href="#mapper-xml-vm" class="headerlink" title="mapper.xml.vm"></a>mapper.xml.vm</h5><figure><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot; ?&gt;&lt;!DOCTYPE mapperPUBLIC &quot;-&#x2F;&#x2F;mybatis.org&#x2F;&#x2F;DTD Mapper 3.0&#x2F;&#x2F;EN&quot;&quot;http:&#x2F;&#x2F;mybatis.org&#x2F;dtd&#x2F;mybatis-3-mapper.dtd&quot;&gt;&lt;mapper namespace&#x3D;&quot;$&#123;packageName&#125;.mapper.$&#123;ClassName&#125;Mapper&quot;&gt;    &lt;resultMap type&#x3D;&quot;$&#123;packageName&#125;.domain.$&#123;ClassName&#125;&quot; id&#x3D;&quot;$&#123;ClassName&#125;Result&quot;&gt;#foreach ($column in $columns)        &lt;result property&#x3D;&quot;$&#123;column.javaField&#125;&quot; column&#x3D;&quot;$&#123;column.columnName&#125;&quot;&#x2F;&gt;#end    &lt;&#x2F;resultMap&gt;&lt;&#x2F;mapper&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>以下是前端代码,(代码与源码一样)</p><h5 id="index-vue3-vm"><a href="#index-vue3-vm" class="headerlink" title="index.vue3.vm"></a>index.vue3.vm</h5><figure><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">&lt;template&gt;  &lt;div class&#x3D;&quot;app-container&quot;&gt;    &lt;el-form :model&#x3D;&quot;queryParams&quot; ref&#x3D;&quot;queryRef&quot; :inline&#x3D;&quot;true&quot; v-show&#x3D;&quot;showSearch&quot; label-width&#x3D;&quot;68px&quot;&gt;#foreach($column in $columns)#if($column.query)#set($dictType&#x3D;$column.dictType)#set($AttrName&#x3D;$column.javaField.substring(0,1).toUpperCase() + $&#123;column.javaField.substring(1)&#125;)#set($parentheseIndex&#x3D;$column.columnComment.indexOf(&quot;（&quot;))#if($parentheseIndex !&#x3D; -1)#set($comment&#x3D;$column.columnComment.substring(0, $parentheseIndex))#else#set($comment&#x3D;$column.columnComment)#end#if($column.htmlType &#x3D;&#x3D; &quot;input&quot; || $column.htmlType &#x3D;&#x3D; &quot;textarea&quot;)      &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;column.javaField&#125;&quot;&gt;        &lt;el-input          v-model&#x3D;&quot;queryParams.$&#123;column.javaField&#125;&quot;          placeholder&#x3D;&quot;请输入$&#123;comment&#125;&quot;          clearable          @keyup.enter&#x3D;&quot;handleQuery&quot;        &#x2F;&gt;      &lt;&#x2F;el-form-item&gt;#elseif(($column.htmlType &#x3D;&#x3D; &quot;select&quot; || $column.htmlType &#x3D;&#x3D; &quot;radio&quot;) &amp;&amp; &quot;&quot; !&#x3D; $dictType)      &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;column.javaField&#125;&quot;&gt;        &lt;el-select v-model&#x3D;&quot;queryParams.$&#123;column.javaField&#125;&quot; placeholder&#x3D;&quot;请选择$&#123;comment&#125;&quot; clearable&gt;          &lt;el-option            v-for&#x3D;&quot;dict in $&#123;dictType&#125;&quot;            :key&#x3D;&quot;dict.value&quot;            :label&#x3D;&quot;dict.label&quot;            :value&#x3D;&quot;dict.value&quot;          &#x2F;&gt;        &lt;&#x2F;el-select&gt;      &lt;&#x2F;el-form-item&gt;#elseif(($column.htmlType &#x3D;&#x3D; &quot;select&quot; || $column.htmlType &#x3D;&#x3D; &quot;radio&quot;) &amp;&amp; $dictType)      &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;column.javaField&#125;&quot;&gt;        &lt;el-select v-model&#x3D;&quot;queryParams.$&#123;column.javaField&#125;&quot; placeholder&#x3D;&quot;请选择$&#123;comment&#125;&quot; clearable&gt;          &lt;el-option label&#x3D;&quot;请选择字典生成&quot; value&#x3D;&quot;&quot; &#x2F;&gt;        &lt;&#x2F;el-select&gt;      &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;datetime&quot; &amp;&amp; $column.queryType !&#x3D; &quot;BETWEEN&quot;)      &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;column.javaField&#125;&quot;&gt;        &lt;el-date-picker clearable          v-model&#x3D;&quot;queryParams.$&#123;column.javaField&#125;&quot;          type&#x3D;&quot;date&quot;          value-format&#x3D;&quot;YYYY-MM-DD&quot;          placeholder&#x3D;&quot;请选择$&#123;comment&#125;&quot;&gt;        &lt;&#x2F;el-date-picker&gt;      &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;datetime&quot; &amp;&amp; $column.queryType &#x3D;&#x3D; &quot;BETWEEN&quot;)      &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; style&#x3D;&quot;width: 308px&quot;&gt;        &lt;el-date-picker          v-model&#x3D;&quot;daterange$&#123;AttrName&#125;&quot;          value-format&#x3D;&quot;YYYY-MM-DD HH:mm:ss&quot;          type&#x3D;&quot;daterange&quot;          range-separator&#x3D;&quot;-&quot;          start-placeholder&#x3D;&quot;开始日期&quot;          :default-time&#x3D;&quot;[new Date(2000, 1, 1, 0, 0, 0), new Date(2000, 1, 1, 23, 59, 59)]&quot;        &gt;&lt;&#x2F;el-date-picker&gt;      &lt;&#x2F;el-form-item&gt;#end#end#end      &lt;el-form-item&gt;        &lt;el-button type&#x3D;&quot;primary&quot; icon&#x3D;&quot;Search&quot; @click&#x3D;&quot;handleQuery&quot;&gt;搜索&lt;&#x2F;el-button&gt;        &lt;el-button icon&#x3D;&quot;Refresh&quot; @click&#x3D;&quot;resetQuery&quot;&gt;重置&lt;&#x2F;el-button&gt;      &lt;&#x2F;el-form-item&gt;    &lt;&#x2F;el-form&gt;    &lt;el-row :gutter&#x3D;&quot;10&quot; class&#x3D;&quot;mb8&quot;&gt;      &lt;el-col :span&#x3D;&quot;1.5&quot;&gt;        &lt;el-button          type&#x3D;&quot;primary&quot;          plain          icon&#x3D;&quot;Plus&quot;          @click&#x3D;&quot;handleAdd&quot;          v-hasPermi&#x3D;&quot;[&#39;$&#123;moduleName&#125;:$&#123;businessName&#125;:add&#39;]&quot;        &gt;新增&lt;&#x2F;el-button&gt;      &lt;&#x2F;el-col&gt;      &lt;el-col :span&#x3D;&quot;1.5&quot;&gt;        &lt;el-button          type&#x3D;&quot;success&quot;          plain          icon&#x3D;&quot;Edit&quot;          :disabled&#x3D;&quot;single&quot;          @click&#x3D;&quot;handleUpdate&quot;          v-hasPermi&#x3D;&quot;[&#39;$&#123;moduleName&#125;:$&#123;businessName&#125;:edit&#39;]&quot;        &gt;修改&lt;&#x2F;el-button&gt;      &lt;&#x2F;el-col&gt;      &lt;el-col :span&#x3D;&quot;1.5&quot;&gt;        &lt;el-button          type&#x3D;&quot;danger&quot;          plain          icon&#x3D;&quot;Delete&quot;          :disabled&#x3D;&quot;multiple&quot;          @click&#x3D;&quot;handleDelete&quot;          v-hasPermi&#x3D;&quot;[&#39;$&#123;moduleName&#125;:$&#123;businessName&#125;:remove&#39;]&quot;        &gt;删除&lt;&#x2F;el-button&gt;      &lt;&#x2F;el-col&gt;      &lt;el-col :span&#x3D;&quot;1.5&quot;&gt;        &lt;el-button          type&#x3D;&quot;warning&quot;          plain          icon&#x3D;&quot;Download&quot;          @click&#x3D;&quot;handleExport&quot;          v-hasPermi&#x3D;&quot;[&#39;$&#123;moduleName&#125;:$&#123;businessName&#125;:export&#39;]&quot;        &gt;导出&lt;&#x2F;el-button&gt;      &lt;&#x2F;el-col&gt;      &lt;right-toolbar v-model:showSearch&#x3D;&quot;showSearch&quot; @queryTable&#x3D;&quot;getList&quot;&gt;&lt;&#x2F;right-toolbar&gt;    &lt;&#x2F;el-row&gt;    &lt;el-table v-loading&#x3D;&quot;loading&quot; :data&#x3D;&quot;$&#123;businessName&#125;List&quot; @selection-change&#x3D;&quot;handleSelectionChange&quot;&gt;      &lt;el-table-column type&#x3D;&quot;selection&quot; width&#x3D;&quot;55&quot; align&#x3D;&quot;center&quot; &#x2F;&gt;#foreach($column in $columns)#set($javaField&#x3D;$column.javaField)#set($parentheseIndex&#x3D;$column.columnComment.indexOf(&quot;（&quot;))#if($parentheseIndex !&#x3D; -1)#set($comment&#x3D;$column.columnComment.substring(0, $parentheseIndex))#else#set($comment&#x3D;$column.columnComment)#end#if($column.pk)      &lt;el-table-column label&#x3D;&quot;$&#123;comment&#125;&quot; align&#x3D;&quot;center&quot; prop&#x3D;&quot;$&#123;javaField&#125;&quot; v-if&#x3D;&quot;$&#123;column.list&#125;&quot;&#x2F;&gt;#elseif($column.list &amp;&amp; $column.htmlType &#x3D;&#x3D; &quot;datetime&quot;)      &lt;el-table-column label&#x3D;&quot;$&#123;comment&#125;&quot; align&#x3D;&quot;center&quot; prop&#x3D;&quot;$&#123;javaField&#125;&quot; width&#x3D;&quot;180&quot;&gt;        &lt;template #default&#x3D;&quot;scope&quot;&gt;          &lt;span&gt;&#123;&#123; parseTime(scope.row.$&#123;javaField&#125;, &#39;&#123;y&#125;-&#123;m&#125;-&#123;d&#125;&#39;) &#125;&#125;&lt;&#x2F;span&gt;        &lt;&#x2F;template&gt;      &lt;&#x2F;el-table-column&gt;#elseif($column.list &amp;&amp; $column.htmlType &#x3D;&#x3D; &quot;imageUpload&quot;)      &lt;el-table-column label&#x3D;&quot;$&#123;comment&#125;&quot; align&#x3D;&quot;center&quot; prop&#x3D;&quot;$&#123;javaField&#125;&quot; width&#x3D;&quot;100&quot;&gt;          &lt;template #default&#x3D;&quot;scope&quot;&gt;              &lt;image-preview :src&#x3D;&quot;scope.row.$&#123;javaField&#125;&quot; :width&#x3D;&quot;50&quot; :height&#x3D;&quot;50&quot;&#x2F;&gt;          &lt;&#x2F;template&gt;      &lt;&#x2F;el-table-column&gt;#elseif($column.list &amp;&amp; $column.dictType &amp;&amp; &quot;&quot; !&#x3D; $column.dictType)      &lt;el-table-column label&#x3D;&quot;$&#123;comment&#125;&quot; align&#x3D;&quot;center&quot; prop&#x3D;&quot;$&#123;javaField&#125;&quot;&gt;        &lt;template #default&#x3D;&quot;scope&quot;&gt;#if($column.htmlType &#x3D;&#x3D; &quot;checkbox&quot;)          &lt;dict-tag :options&#x3D;&quot;$&#123;column.dictType&#125;&quot; :value&#x3D;&quot;scope.row.$&#123;javaField&#125; ? scope.row.$&#123;javaField&#125;.split(&#39;,&#39;) : []&quot;&#x2F;&gt;#else          &lt;dict-tag :options&#x3D;&quot;$&#123;column.dictType&#125;&quot; :value&#x3D;&quot;scope.row.$&#123;javaField&#125;&quot;&#x2F;&gt;#end        &lt;&#x2F;template&gt;      &lt;&#x2F;el-table-column&gt;#elseif($column.list &amp;&amp; &quot;&quot; !&#x3D; $javaField)      &lt;el-table-column label&#x3D;&quot;$&#123;comment&#125;&quot; align&#x3D;&quot;center&quot; prop&#x3D;&quot;$&#123;javaField&#125;&quot; &#x2F;&gt;#end#end      &lt;el-table-column label&#x3D;&quot;操作&quot; align&#x3D;&quot;center&quot; class-name&#x3D;&quot;small-padding fixed-width&quot;&gt;          &lt;template #default&#x3D;&quot;scope&quot;&gt;              &lt;el-button link type&#x3D;&quot;primary&quot; icon&#x3D;&quot;Edit&quot; @click&#x3D;&quot;handleUpdate(scope.row)&quot; v-hasPermi&#x3D;&quot;[&#39;$&#123;moduleName&#125;:$&#123;businessName&#125;:edit&#39;]&quot;&gt;修改&lt;&#x2F;el-button&gt;              &lt;el-button link type&#x3D;&quot;primary&quot; icon&#x3D;&quot;Delete&quot; @click&#x3D;&quot;handleDelete(scope.row)&quot; v-hasPermi&#x3D;&quot;[&#39;$&#123;moduleName&#125;:$&#123;businessName&#125;:remove&#39;]&quot;&gt;删除&lt;&#x2F;el-button&gt;          &lt;&#x2F;template&gt;      &lt;&#x2F;el-table-column&gt;    &lt;&#x2F;el-table&gt;    &lt;pagination      v-show&#x3D;&quot;total&gt;0&quot;      :total&#x3D;&quot;total&quot;      v-model:page&#x3D;&quot;queryParams.pageNum&quot;      v-model:limit&#x3D;&quot;queryParams.pageSize&quot;      @pagination&#x3D;&quot;getList&quot;    &#x2F;&gt;    &lt;!-- 添加或修改$&#123;functionName&#125;对话框 --&gt;    &lt;el-dialog :title&#x3D;&quot;title&quot; v-model&#x3D;&quot;open&quot; width&#x3D;&quot;500px&quot; append-to-body&gt;      &lt;el-form ref&#x3D;&quot;$&#123;businessName&#125;Ref&quot; :model&#x3D;&quot;form&quot; :rules&#x3D;&quot;rules&quot; label-width&#x3D;&quot;80px&quot;&gt;#foreach($column in $columns)#set($field&#x3D;$column.javaField)#if($column.insert &amp;&amp; !$column.pk)#set($parentheseIndex&#x3D;$column.columnComment.indexOf(&quot;（&quot;))#if($parentheseIndex !&#x3D; -1)#set($comment&#x3D;$column.columnComment.substring(0, $parentheseIndex))#else#set($comment&#x3D;$column.columnComment)#end#set($dictType&#x3D;$column.dictType)#if($column.htmlType &#x3D;&#x3D; &quot;input&quot;)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;field&#125;&quot;&gt;          &lt;el-input v-model&#x3D;&quot;form.$&#123;field&#125;&quot; placeholder&#x3D;&quot;请输入$&#123;comment&#125;&quot; &#x2F;&gt;        &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;imageUpload&quot;)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;field&#125;&quot;&gt;          &lt;image-upload v-model&#x3D;&quot;form.$&#123;field&#125;&quot;&#x2F;&gt;        &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;fileUpload&quot;)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;field&#125;&quot;&gt;          &lt;file-upload v-model&#x3D;&quot;form.$&#123;field&#125;&quot;&#x2F;&gt;        &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;editor&quot;)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot;&gt;          &lt;editor v-model&#x3D;&quot;form.$&#123;field&#125;&quot; :min-height&#x3D;&quot;192&quot;&#x2F;&gt;        &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;select&quot; &amp;&amp; &quot;&quot; !&#x3D; $dictType)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;field&#125;&quot;&gt;          &lt;el-select v-model&#x3D;&quot;form.$&#123;field&#125;&quot; placeholder&#x3D;&quot;请选择$&#123;comment&#125;&quot;&gt;            &lt;el-option              v-for&#x3D;&quot;dict in $&#123;dictType&#125;&quot;              :key&#x3D;&quot;dict.value&quot;              :label&#x3D;&quot;dict.label&quot;#if($column.javaType &#x3D;&#x3D; &quot;Integer&quot; || $column.javaType &#x3D;&#x3D; &quot;Long&quot;)              :value&#x3D;&quot;parseInt(dict.value)&quot;#else              :value&#x3D;&quot;dict.value&quot;#end            &gt;&lt;&#x2F;el-option&gt;          &lt;&#x2F;el-select&gt;        &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;select&quot; &amp;&amp; $dictType)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;field&#125;&quot;&gt;          &lt;el-select v-model&#x3D;&quot;form.$&#123;field&#125;&quot; placeholder&#x3D;&quot;请选择$&#123;comment&#125;&quot;&gt;            &lt;el-option label&#x3D;&quot;请选择字典生成&quot; value&#x3D;&quot;&quot; &#x2F;&gt;          &lt;&#x2F;el-select&gt;        &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;checkbox&quot; &amp;&amp; &quot;&quot; !&#x3D; $dictType)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;field&#125;&quot;&gt;          &lt;el-checkbox-group v-model&#x3D;&quot;form.$&#123;field&#125;&quot;&gt;            &lt;el-checkbox              v-for&#x3D;&quot;dict in $&#123;dictType&#125;&quot;              :key&#x3D;&quot;dict.value&quot;              :label&#x3D;&quot;dict.value&quot;&gt;              &#123;&#123;dict.label&#125;&#125;            &lt;&#x2F;el-checkbox&gt;          &lt;&#x2F;el-checkbox-group&gt;        &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;checkbox&quot; &amp;&amp; $dictType)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;field&#125;&quot;&gt;          &lt;el-checkbox-group v-model&#x3D;&quot;form.$&#123;field&#125;&quot;&gt;            &lt;el-checkbox&gt;请选择字典生成&lt;&#x2F;el-checkbox&gt;          &lt;&#x2F;el-checkbox-group&gt;        &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;radio&quot; &amp;&amp; &quot;&quot; !&#x3D; $dictType)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;field&#125;&quot;&gt;          &lt;el-radio-group v-model&#x3D;&quot;form.$&#123;field&#125;&quot;&gt;            &lt;el-radio              v-for&#x3D;&quot;dict in $&#123;dictType&#125;&quot;              :key&#x3D;&quot;dict.value&quot;#if($column.javaType &#x3D;&#x3D; &quot;Integer&quot; || $column.javaType &#x3D;&#x3D; &quot;Long&quot;)              :label&#x3D;&quot;parseInt(dict.value)&quot;#else              :label&#x3D;&quot;dict.value&quot;#end            &gt;&#123;&#123;dict.label&#125;&#125;&lt;&#x2F;el-radio&gt;          &lt;&#x2F;el-radio-group&gt;        &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;radio&quot; &amp;&amp; $dictType)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;field&#125;&quot;&gt;          &lt;el-radio-group v-model&#x3D;&quot;form.$&#123;field&#125;&quot;&gt;            &lt;el-radio label&#x3D;&quot;1&quot;&gt;请选择字典生成&lt;&#x2F;el-radio&gt;          &lt;&#x2F;el-radio-group&gt;        &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;datetime&quot;)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;field&#125;&quot;&gt;          &lt;el-date-picker clearable            v-model&#x3D;&quot;form.$&#123;field&#125;&quot;            type&#x3D;&quot;datetime&quot;            value-format&#x3D;&quot;YYYY-MM-DD HH:mm:ss&quot;            placeholder&#x3D;&quot;请选择$&#123;comment&#125;&quot;&gt;          &lt;&#x2F;el-date-picker&gt;        &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;textarea&quot;)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;field&#125;&quot;&gt;          &lt;el-input v-model&#x3D;&quot;form.$&#123;field&#125;&quot; type&#x3D;&quot;textarea&quot; placeholder&#x3D;&quot;请输入内容&quot; &#x2F;&gt;        &lt;&#x2F;el-form-item&gt;#end#end#end#if($table.sub)        &lt;el-divider content-position&#x3D;&quot;center&quot;&gt;$&#123;subTable.functionName&#125;信息&lt;&#x2F;el-divider&gt;        &lt;el-row :gutter&#x3D;&quot;10&quot; class&#x3D;&quot;mb8&quot;&gt;          &lt;el-col :span&#x3D;&quot;1.5&quot;&gt;            &lt;el-button type&#x3D;&quot;primary&quot; icon&#x3D;&quot;Plus&quot; @click&#x3D;&quot;handleAdd$&#123;subClassName&#125;&quot;&gt;添加&lt;&#x2F;el-button&gt;          &lt;&#x2F;el-col&gt;          &lt;el-col :span&#x3D;&quot;1.5&quot;&gt;            &lt;el-button type&#x3D;&quot;danger&quot; icon&#x3D;&quot;Delete&quot; @click&#x3D;&quot;handleDelete$&#123;subClassName&#125;&quot;&gt;删除&lt;&#x2F;el-button&gt;          &lt;&#x2F;el-col&gt;        &lt;&#x2F;el-row&gt;        &lt;el-table :data&#x3D;&quot;$&#123;subclassName&#125;List&quot; :row-class-name&#x3D;&quot;row$&#123;subClassName&#125;Index&quot; @selection-change&#x3D;&quot;handle$&#123;subClassName&#125;SelectionChange&quot; ref&#x3D;&quot;$&#123;subclassName&#125;&quot;&gt;          &lt;el-table-column type&#x3D;&quot;selection&quot; width&#x3D;&quot;50&quot; align&#x3D;&quot;center&quot; &#x2F;&gt;          &lt;el-table-column label&#x3D;&quot;序号&quot; align&#x3D;&quot;center&quot; prop&#x3D;&quot;index&quot; width&#x3D;&quot;50&quot;&#x2F;&gt;#foreach($column in $subTable.columns)#set($javaField&#x3D;$column.javaField)#set($parentheseIndex&#x3D;$column.columnComment.indexOf(&quot;（&quot;))#if($parentheseIndex !&#x3D; -1)#set($comment&#x3D;$column.columnComment.substring(0, $parentheseIndex))#else#set($comment&#x3D;$column.columnComment)#end#if($column.pk || $javaField &#x3D;&#x3D; $&#123;subTableFkclassName&#125;)#elseif($column.list &amp;&amp; $column.htmlType &#x3D;&#x3D; &quot;input&quot;)          &lt;el-table-column label&#x3D;&quot;$comment&quot; prop&#x3D;&quot;$&#123;javaField&#125;&quot; width&#x3D;&quot;150&quot;&gt;            &lt;template #default&#x3D;&quot;scope&quot;&gt;              &lt;el-input v-model&#x3D;&quot;scope.row.$javaField&quot; placeholder&#x3D;&quot;请输入$comment&quot; &#x2F;&gt;            &lt;&#x2F;template&gt;          &lt;&#x2F;el-table-column&gt;#elseif($column.list &amp;&amp; $column.htmlType &#x3D;&#x3D; &quot;datetime&quot;)          &lt;el-table-column label&#x3D;&quot;$comment&quot; prop&#x3D;&quot;$&#123;javaField&#125;&quot; width&#x3D;&quot;240&quot;&gt;            &lt;template #default&#x3D;&quot;scope&quot;&gt;              &lt;el-date-picker clearable                v-model&#x3D;&quot;scope.row.$javaField&quot;                type&#x3D;&quot;date&quot;                value-format&#x3D;&quot;YYYY-MM-DD&quot;                placeholder&#x3D;&quot;请选择$comment&quot;&gt;              &lt;&#x2F;el-date-picker&gt;            &lt;&#x2F;template&gt;          &lt;&#x2F;el-table-column&gt;#elseif($column.list &amp;&amp; ($column.htmlType &#x3D;&#x3D; &quot;select&quot; || $column.htmlType &#x3D;&#x3D; &quot;radio&quot;) &amp;&amp; &quot;&quot; !&#x3D; $column.dictType)          &lt;el-table-column label&#x3D;&quot;$comment&quot; prop&#x3D;&quot;$&#123;javaField&#125;&quot; width&#x3D;&quot;150&quot;&gt;            &lt;template #default&#x3D;&quot;scope&quot;&gt;              &lt;el-select v-model&#x3D;&quot;scope.row.$javaField&quot; placeholder&#x3D;&quot;请选择$comment&quot;&gt;                &lt;el-option                  v-for&#x3D;&quot;dict in $column.dictType&quot;                  :key&#x3D;&quot;dict.value&quot;                  :label&#x3D;&quot;dict.label&quot;                  :value&#x3D;&quot;dict.value&quot;                &gt;&lt;&#x2F;el-option&gt;              &lt;&#x2F;el-select&gt;            &lt;&#x2F;template&gt;          &lt;&#x2F;el-table-column&gt;#elseif($column.list &amp;&amp; ($column.htmlType &#x3D;&#x3D; &quot;select&quot; || $column.htmlType &#x3D;&#x3D; &quot;radio&quot;) &amp;&amp; &quot;&quot; &#x3D;&#x3D; $column.dictType)          &lt;el-table-column label&#x3D;&quot;$comment&quot; prop&#x3D;&quot;$&#123;javaField&#125;&quot; width&#x3D;&quot;150&quot;&gt;            &lt;template #default&#x3D;&quot;scope&quot;&gt;              &lt;el-select v-model&#x3D;&quot;scope.row.$javaField&quot; placeholder&#x3D;&quot;请选择$comment&quot;&gt;                &lt;el-option label&#x3D;&quot;请选择字典生成&quot; value&#x3D;&quot;&quot; &#x2F;&gt;              &lt;&#x2F;el-select&gt;            &lt;&#x2F;template&gt;          &lt;&#x2F;el-table-column&gt;#end#end        &lt;&#x2F;el-table&gt;#end      &lt;&#x2F;el-form&gt;      &lt;template #footer&gt;        &lt;div class&#x3D;&quot;dialog-footer&quot;&gt;          &lt;el-button :loading&#x3D;&quot;buttonLoading&quot; type&#x3D;&quot;primary&quot; @click&#x3D;&quot;submitForm&quot;&gt;确 定&lt;&#x2F;el-button&gt;          &lt;el-button @click&#x3D;&quot;cancel&quot;&gt;取 消&lt;&#x2F;el-button&gt;        &lt;&#x2F;div&gt;      &lt;&#x2F;template&gt;    &lt;&#x2F;el-dialog&gt;  &lt;&#x2F;div&gt;&lt;&#x2F;template&gt;&lt;script setup name&#x3D;&quot;$&#123;BusinessName&#125;&quot;&gt;import &#123; list$&#123;BusinessName&#125;, get$&#123;BusinessName&#125;, del$&#123;BusinessName&#125;, add$&#123;BusinessName&#125;, update$&#123;BusinessName&#125; &#125; from &quot;@&#x2F;api&#x2F;$&#123;moduleName&#125;&#x2F;$&#123;businessName&#125;&quot;;const &#123; proxy &#125; &#x3D; getCurrentInstance();#if($&#123;dicts&#125; !&#x3D; &#39;&#39;)#set($dictsNoSymbol&#x3D;$dicts.replace(&quot;&#39;&quot;, &quot;&quot;))const &#123; $&#123;dictsNoSymbol&#125; &#125; &#x3D; proxy.useDict($&#123;dicts&#125;);#endconst $&#123;businessName&#125;List &#x3D; ref([]);#if($table.sub)const $&#123;subclassName&#125;List &#x3D; ref([]);#endconst open &#x3D; ref(false);const buttonLoading &#x3D; ref(false);const loading &#x3D; ref(true);const showSearch &#x3D; ref(true);const ids &#x3D; ref([]);#if($table.sub)const checked$&#123;subClassName&#125; &#x3D; ref([]);#endconst single &#x3D; ref(true);const multiple &#x3D; ref(true);const total &#x3D; ref(0);const title &#x3D; ref(&quot;&quot;);#foreach ($column in $columns)#if($column.htmlType &#x3D;&#x3D; &quot;datetime&quot; &amp;&amp; $column.queryType &#x3D;&#x3D; &quot;BETWEEN&quot;)#set($AttrName&#x3D;$column.javaField.substring(0,1).toUpperCase() + $&#123;column.javaField.substring(1)&#125;)const daterange$&#123;AttrName&#125; &#x3D; ref([]);#end#endconst data &#x3D; reactive(&#123;  form: &#123;&#125;,  queryParams: &#123;    pageNum: 1,    pageSize: 10,#foreach ($column in $columns)#if($column.query)    $column.javaField: undefined#if($foreach.count !&#x3D; $columns.size()),#end#end#end  &#125;,  rules: &#123;#foreach ($column in $columns)#if($column.required)#set($parentheseIndex&#x3D;$column.columnComment.indexOf(&quot;（&quot;))#if($parentheseIndex !&#x3D; -1)#set($comment&#x3D;$column.columnComment.substring(0, $parentheseIndex))#else#set($comment&#x3D;$column.columnComment)#end    $column.javaField: [      &#123; required: true, message: &quot;$comment不能为空&quot;, trigger: #if($column.htmlType &#x3D;&#x3D; &quot;select&quot; || $column.htmlType &#x3D;&#x3D; &quot;radio&quot;)&quot;change&quot;#else&quot;blur&quot;#end &#125;    ]#if($foreach.count !&#x3D; $columns.size()),#end#end#end  &#125;&#125;);const &#123; queryParams, form, rules &#125; &#x3D; toRefs(data);&#x2F;** 查询$&#123;functionName&#125;列表 *&#x2F;function getList() &#123;  loading.value &#x3D; true;#foreach ($column in $columns)#if($column.htmlType &#x3D;&#x3D; &quot;datetime&quot; &amp;&amp; $column.queryType &#x3D;&#x3D; &quot;BETWEEN&quot;)  queryParams.value.params &#x3D; &#123;&#125;;#break#end#end#foreach ($column in $columns)#if($column.htmlType &#x3D;&#x3D; &quot;datetime&quot; &amp;&amp; $column.queryType &#x3D;&#x3D; &quot;BETWEEN&quot;)#set($AttrName&#x3D;$column.javaField.substring(0,1).toUpperCase() + $&#123;column.javaField.substring(1)&#125;)  if (null !&#x3D; daterange$&#123;AttrName&#125; &amp;&amp; &#39;&#39; !&#x3D; daterange$&#123;AttrName&#125;) &#123;    queryParams.value.params[&quot;begin$&#123;AttrName&#125;&quot;] &#x3D; daterange$&#123;AttrName&#125;.value[0];    queryParams.value.params[&quot;end$&#123;AttrName&#125;&quot;] &#x3D; daterange$&#123;AttrName&#125;.value[1];  &#125;#end#end  list$&#123;BusinessName&#125;(queryParams.value).then(response &#x3D;&gt; &#123;    $&#123;businessName&#125;List.value &#x3D; response.rows;    total.value &#x3D; response.total;    loading.value &#x3D; false;  &#125;);&#125;&#x2F;&#x2F; 取消按钮function cancel() &#123;  open.value &#x3D; false;  reset();&#125;&#x2F;&#x2F; 表单重置function reset() &#123;  form.value &#x3D; &#123;#foreach ($column in $columns)#if($column.htmlType &#x3D;&#x3D; &quot;checkbox&quot;)    $column.javaField: []#if($foreach.count !&#x3D; $columns.size()),#end#else    $column.javaField: null#if($foreach.count !&#x3D; $columns.size()),#end#end#end  &#125;;#if($table.sub)  $&#123;subclassName&#125;List.value &#x3D; [];#end  proxy.resetForm(&quot;$&#123;businessName&#125;Ref&quot;);&#125;&#x2F;** 搜索按钮操作 *&#x2F;function handleQuery() &#123;  queryParams.value.pageNum &#x3D; 1;  getList();&#125;&#x2F;** 重置按钮操作 *&#x2F;function resetQuery() &#123;#foreach ($column in $columns)#if($column.htmlType &#x3D;&#x3D; &quot;datetime&quot; &amp;&amp; $column.queryType &#x3D;&#x3D; &quot;BETWEEN&quot;)#set($AttrName&#x3D;$column.javaField.substring(0,1).toUpperCase() + $&#123;column.javaField.substring(1)&#125;)  daterange$&#123;AttrName&#125;.value &#x3D; [];#end#end  proxy.resetForm(&quot;queryRef&quot;);  handleQuery();&#125;&#x2F;&#x2F; 多选框选中数据function handleSelectionChange(selection) &#123;  ids.value &#x3D; selection.map(item &#x3D;&gt; item.$&#123;pkColumn.javaField&#125;);  single.value &#x3D; selection.length !&#x3D; 1;  multiple.value &#x3D; !selection.length;&#125;&#x2F;** 新增按钮操作 *&#x2F;function handleAdd() &#123;  reset();  open.value &#x3D; true;  title.value &#x3D; &quot;添加$&#123;functionName&#125;&quot;;&#125;&#x2F;** 修改按钮操作 *&#x2F;function handleUpdate(row) &#123;  loading.value &#x3D; true  reset();  const _$&#123;pkColumn.javaField&#125; &#x3D; row.$&#123;pkColumn.javaField&#125; || ids.value  get$&#123;BusinessName&#125;(_$&#123;pkColumn.javaField&#125;).then(response &#x3D;&gt; &#123;    loading.value &#x3D; false;    form.value &#x3D; response.data;#foreach ($column in $columns)#if($column.htmlType &#x3D;&#x3D; &quot;checkbox&quot;)    form.value.$column.javaField &#x3D; form.value.$&#123;column.javaField&#125;.split(&quot;,&quot;);#end#end#if($table.sub)    $&#123;subclassName&#125;List.value &#x3D; response.data.$&#123;subclassName&#125;List;#end    open.value &#x3D; true;    title.value &#x3D; &quot;修改$&#123;functionName&#125;&quot;;  &#125;);&#125;&#x2F;** 提交按钮 *&#x2F;function submitForm() &#123;  proxy.#[[$]]#refs[&quot;$&#123;businessName&#125;Ref&quot;].validate(valid &#x3D;&gt; &#123;    if (valid) &#123;      buttonLoading.value &#x3D; true;#foreach ($column in $columns)#if($column.htmlType &#x3D;&#x3D; &quot;checkbox&quot;)      form.value.$column.javaField &#x3D; form.value.$&#123;column.javaField&#125;.join(&quot;,&quot;);#end#end#if($table.sub)      form.value.$&#123;subclassName&#125;List &#x3D; $&#123;subclassName&#125;List.value;#end      if (form.value.$&#123;pkColumn.javaField&#125; !&#x3D; null) &#123;        update$&#123;BusinessName&#125;(form.value).then(response &#x3D;&gt; &#123;          proxy.#[[$modal]]#.msgSuccess(&quot;修改成功&quot;);          open.value &#x3D; false;          getList();        &#125;).finally(() &#x3D;&gt; &#123;          buttonLoading.value &#x3D; false;        &#125;);      &#125; else &#123;        add$&#123;BusinessName&#125;(form.value).then(response &#x3D;&gt; &#123;          proxy.#[[$modal]]#.msgSuccess(&quot;新增成功&quot;);          open.value &#x3D; false;          getList();        &#125;).finally(() &#x3D;&gt; &#123;          buttonLoading.value &#x3D; false;        &#125;);      &#125;    &#125;  &#125;);&#125;&#x2F;** 删除按钮操作 *&#x2F;function handleDelete(row) &#123;  const _$&#123;pkColumn.javaField&#125;s &#x3D; row.$&#123;pkColumn.javaField&#125; || ids.value;  proxy.#[[$modal]]#.confirm(&#39;是否确认删除$&#123;functionName&#125;编号为&quot;&#39; + _$&#123;pkColumn.javaField&#125;s + &#39;&quot;的数据项？&#39;).then(function() &#123;    loading.value &#x3D; true;    return del$&#123;BusinessName&#125;(_$&#123;pkColumn.javaField&#125;s);  &#125;).then(() &#x3D;&gt; &#123;    loading.value &#x3D; true;    getList();    proxy.#[[$modal]]#.msgSuccess(&quot;删除成功&quot;);  &#125;).catch(() &#x3D;&gt; &#123;  &#125;).finally(() &#x3D;&gt; &#123;    loading.value &#x3D; false;  &#125;);&#125;#if($table.sub)&#x2F;** $&#123;subTable.functionName&#125;序号 *&#x2F;function row$&#123;subClassName&#125;Index(&#123; row, rowIndex &#125;) &#123;  row.index &#x3D; rowIndex + 1;&#125;&#x2F;** $&#123;subTable.functionName&#125;添加按钮操作 *&#x2F;function handleAdd$&#123;subClassName&#125;() &#123;  let obj &#x3D; &#123;&#125;;#foreach($column in $subTable.columns)#if($column.pk || $column.javaField &#x3D;&#x3D; $&#123;subTableFkclassName&#125;)#elseif($column.list &amp;&amp; &quot;&quot; !&#x3D; $javaField)  obj.$column.javaField &#x3D; &quot;&quot;;#end#end  $&#123;subclassName&#125;List.value.push(obj);&#125;&#x2F;** $&#123;subTable.functionName&#125;删除按钮操作 *&#x2F;function handleDelete$&#123;subClassName&#125;() &#123;  if (checked$&#123;subClassName&#125;.value.length &#x3D;&#x3D; 0) &#123;    proxy.#[[$modal]]#.msgError(&quot;请先选择要删除的$&#123;subTable.functionName&#125;数据&quot;);  &#125; else &#123;    const $&#123;subclassName&#125;s &#x3D; $&#123;subclassName&#125;List.value;    const checked$&#123;subClassName&#125;s &#x3D; checked$&#123;subClassName&#125;.value;    $&#123;subclassName&#125;List.value &#x3D; $&#123;subclassName&#125;s.filter(function(item) &#123;      return checked$&#123;subClassName&#125;s.indexOf(item.index) &#x3D;&#x3D; -1    &#125;);  &#125;&#125;&#x2F;** 复选框选中数据 *&#x2F;function handle$&#123;subClassName&#125;SelectionChange(selection) &#123;  checked$&#123;subClassName&#125;.value &#x3D; selection.map(item &#x3D;&gt; item.index)&#125;#end&#x2F;** 导出按钮操作 *&#x2F;function handleExport() &#123;  proxy.download(&#39;$&#123;moduleName&#125;&#x2F;$&#123;businessName&#125;&#x2F;export&#39;, &#123;    ...queryParams.value  &#125;, &#96;$&#123;businessName&#125;_#[[$&#123;new Date().getTime()&#125;]]#.xlsx&#96;)&#125;getList();&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><h5 id="index-tree-vue3-vm"><a href="#index-tree-vue3-vm" class="headerlink" title="index-tree.vue3.vm"></a>index-tree.vue3.vm</h5><figure><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">&lt;template&gt;  &lt;div class&#x3D;&quot;app-container&quot;&gt;    &lt;el-form :model&#x3D;&quot;queryParams&quot; ref&#x3D;&quot;queryRef&quot; :inline&#x3D;&quot;true&quot; v-show&#x3D;&quot;showSearch&quot; label-width&#x3D;&quot;68px&quot;&gt;#foreach($column in $columns)#if($column.query)#set($dictType&#x3D;$column.dictType)#set($AttrName&#x3D;$column.javaField.substring(0,1).toUpperCase() + $&#123;column.javaField.substring(1)&#125;)#set($parentheseIndex&#x3D;$column.columnComment.indexOf(&quot;（&quot;))#if($parentheseIndex !&#x3D; -1)#set($comment&#x3D;$column.columnComment.substring(0, $parentheseIndex))#else#set($comment&#x3D;$column.columnComment)#end#if($column.htmlType &#x3D;&#x3D; &quot;input&quot; || $column.htmlType &#x3D;&#x3D; &quot;textarea&quot;)      &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;column.javaField&#125;&quot;&gt;        &lt;el-input          v-model&#x3D;&quot;queryParams.$&#123;column.javaField&#125;&quot;          placeholder&#x3D;&quot;请输入$&#123;comment&#125;&quot;          clearable          @keyup.enter&#x3D;&quot;handleQuery&quot;        &#x2F;&gt;      &lt;&#x2F;el-form-item&gt;#elseif(($column.htmlType &#x3D;&#x3D; &quot;select&quot; || $column.htmlType &#x3D;&#x3D; &quot;radio&quot;) &amp;&amp; &quot;&quot; !&#x3D; $dictType)      &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;column.javaField&#125;&quot;&gt;        &lt;el-select v-model&#x3D;&quot;queryParams.$&#123;column.javaField&#125;&quot; placeholder&#x3D;&quot;请选择$&#123;comment&#125;&quot; clearable&gt;          &lt;el-option            v-for&#x3D;&quot;dict in $&#123;dictType&#125;&quot;            :key&#x3D;&quot;dict.value&quot;            :label&#x3D;&quot;dict.label&quot;            :value&#x3D;&quot;dict.value&quot;          &#x2F;&gt;        &lt;&#x2F;el-select&gt;      &lt;&#x2F;el-form-item&gt;#elseif(($column.htmlType &#x3D;&#x3D; &quot;select&quot; || $column.htmlType &#x3D;&#x3D; &quot;radio&quot;) &amp;&amp; $dictType)      &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;column.javaField&#125;&quot;&gt;        &lt;el-select v-model&#x3D;&quot;queryParams.$&#123;column.javaField&#125;&quot; placeholder&#x3D;&quot;请选择$&#123;comment&#125;&quot; clearable&gt;          &lt;el-option label&#x3D;&quot;请选择字典生成&quot; value&#x3D;&quot;&quot; &#x2F;&gt;        &lt;&#x2F;el-select&gt;      &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;datetime&quot; &amp;&amp; $column.queryType !&#x3D; &quot;BETWEEN&quot;)      &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;column.javaField&#125;&quot;&gt;        &lt;el-date-picker clearable          v-model&#x3D;&quot;queryParams.$&#123;column.javaField&#125;&quot;          type&#x3D;&quot;date&quot;          value-format&#x3D;&quot;YYYY-MM-DD&quot;          placeholder&#x3D;&quot;选择$&#123;comment&#125;&quot;&gt;        &lt;&#x2F;el-date-picker&gt;      &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;datetime&quot; &amp;&amp; $column.queryType &#x3D;&#x3D; &quot;BETWEEN&quot;)      &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; style&#x3D;&quot;width: 308px&quot;&gt;        &lt;el-date-picker          v-model&#x3D;&quot;daterange$&#123;AttrName&#125;&quot;          value-format&#x3D;&quot;YYYY-MM-DD HH:mm:ss&quot;          type&#x3D;&quot;daterange&quot;          range-separator&#x3D;&quot;-&quot;          start-placeholder&#x3D;&quot;开始日期&quot;          end-placeholder&#x3D;&quot;结束日期&quot;          :default-time&#x3D;&quot;[new Date(2000, 1, 1, 0, 0, 0), new Date(2000, 1, 1, 23, 59, 59)]&quot;        &gt;&lt;&#x2F;el-date-picker&gt;      &lt;&#x2F;el-form-item&gt;#end#end#end      &lt;el-form-item&gt;        &lt;el-button type&#x3D;&quot;primary&quot; icon&#x3D;&quot;Search&quot; @click&#x3D;&quot;handleQuery&quot;&gt;搜索&lt;&#x2F;el-button&gt;        &lt;el-button icon&#x3D;&quot;Refresh&quot; @click&#x3D;&quot;resetQuery&quot;&gt;重置&lt;&#x2F;el-button&gt;      &lt;&#x2F;el-form-item&gt;    &lt;&#x2F;el-form&gt;    &lt;el-row :gutter&#x3D;&quot;10&quot; class&#x3D;&quot;mb8&quot;&gt;      &lt;el-col :span&#x3D;&quot;1.5&quot;&gt;        &lt;el-button          type&#x3D;&quot;primary&quot;          plain          icon&#x3D;&quot;Plus&quot;          @click&#x3D;&quot;handleAdd&quot;          v-hasPermi&#x3D;&quot;[&#39;$&#123;moduleName&#125;:$&#123;businessName&#125;:add&#39;]&quot;        &gt;新增&lt;&#x2F;el-button&gt;      &lt;&#x2F;el-col&gt;      &lt;el-col :span&#x3D;&quot;1.5&quot;&gt;        &lt;el-button          type&#x3D;&quot;info&quot;          plain          icon&#x3D;&quot;Sort&quot;          @click&#x3D;&quot;toggleExpandAll&quot;        &gt;展开&#x2F;折叠&lt;&#x2F;el-button&gt;      &lt;&#x2F;el-col&gt;      &lt;right-toolbar v-model:showSearch&#x3D;&quot;showSearch&quot; @queryTable&#x3D;&quot;getList&quot;&gt;&lt;&#x2F;right-toolbar&gt;    &lt;&#x2F;el-row&gt;    &lt;el-table      v-if&#x3D;&quot;refreshTable&quot;      v-loading&#x3D;&quot;loading&quot;      :data&#x3D;&quot;$&#123;businessName&#125;List&quot;      row-key&#x3D;&quot;$&#123;treeCode&#125;&quot;      :default-expand-all&#x3D;&quot;isExpandAll&quot;      :tree-props&#x3D;&quot;&#123;children: &#39;children&#39;, hasChildren: &#39;hasChildren&#39;&#125;&quot;    &gt;#foreach($column in $columns)#set($javaField&#x3D;$column.javaField)#set($parentheseIndex&#x3D;$column.columnComment.indexOf(&quot;（&quot;))#if($parentheseIndex !&#x3D; -1)#set($comment&#x3D;$column.columnComment.substring(0, $parentheseIndex))#else#set($comment&#x3D;$column.columnComment)#end#if($column.pk)#elseif($column.list &amp;&amp; $column.htmlType &#x3D;&#x3D; &quot;datetime&quot;)      &lt;el-table-column label&#x3D;&quot;$&#123;comment&#125;&quot; align&#x3D;&quot;center&quot; prop&#x3D;&quot;$&#123;javaField&#125;&quot; width&#x3D;&quot;180&quot;&gt;        &lt;template #default&#x3D;&quot;scope&quot;&gt;          &lt;span&gt;&#123;&#123; parseTime(scope.row.$&#123;javaField&#125;, &#39;&#123;y&#125;-&#123;m&#125;-&#123;d&#125;&#39;) &#125;&#125;&lt;&#x2F;span&gt;        &lt;&#x2F;template&gt;      &lt;&#x2F;el-table-column&gt;#elseif($column.list &amp;&amp; $column.htmlType &#x3D;&#x3D; &quot;imageUpload&quot;)      &lt;el-table-column label&#x3D;&quot;$&#123;comment&#125;&quot; align&#x3D;&quot;center&quot; prop&#x3D;&quot;$&#123;javaField&#125;&quot; width&#x3D;&quot;100&quot;&gt;          &lt;template #default&#x3D;&quot;scope&quot;&gt;              &lt;image-preview :src&#x3D;&quot;scope.row.$&#123;javaField&#125;&quot; :width&#x3D;&quot;50&quot; :height&#x3D;&quot;50&quot;&#x2F;&gt;          &lt;&#x2F;template&gt;      &lt;&#x2F;el-table-column&gt;#elseif($column.list &amp;&amp; $column.dictType &amp;&amp; &quot;&quot; !&#x3D; $column.dictType)      &lt;el-table-column label&#x3D;&quot;$&#123;comment&#125;&quot; align&#x3D;&quot;center&quot; prop&#x3D;&quot;$&#123;javaField&#125;&quot;&gt;        &lt;template #default&#x3D;&quot;scope&quot;&gt;#if($column.htmlType &#x3D;&#x3D; &quot;checkbox&quot;)          &lt;dict-tag :options&#x3D;&quot;$&#123;column.dictType&#125;&quot; :value&#x3D;&quot;scope.row.$&#123;javaField&#125; ? scope.row.$&#123;javaField&#125;.split(&#39;,&#39;) : []&quot;&#x2F;&gt;#else          &lt;dict-tag :options&#x3D;&quot;$&#123;column.dictType&#125;&quot; :value&#x3D;&quot;scope.row.$&#123;javaField&#125;&quot;&#x2F;&gt;#end        &lt;&#x2F;template&gt;      &lt;&#x2F;el-table-column&gt;#elseif($column.list &amp;&amp; &quot;&quot; !&#x3D; $javaField)#if($&#123;foreach.index&#125; &#x3D;&#x3D; 1)      &lt;el-table-column label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;javaField&#125;&quot; &#x2F;&gt;#else      &lt;el-table-column label&#x3D;&quot;$&#123;comment&#125;&quot; align&#x3D;&quot;center&quot; prop&#x3D;&quot;$&#123;javaField&#125;&quot; &#x2F;&gt;#end#end#end      &lt;el-table-column label&#x3D;&quot;操作&quot; align&#x3D;&quot;center&quot; class-name&#x3D;&quot;small-padding fixed-width&quot;&gt;          &lt;template #default&#x3D;&quot;scope&quot;&gt;              &lt;el-button link type&#x3D;&quot;primary&quot; icon&#x3D;&quot;Edit&quot; @click&#x3D;&quot;handleUpdate(scope.row)&quot; v-hasPermi&#x3D;&quot;[&#39;$&#123;moduleName&#125;:$&#123;businessName&#125;:edit&#39;]&quot;&gt;修改&lt;&#x2F;el-button&gt;              &lt;el-button link type&#x3D;&quot;primary&quot; icon&#x3D;&quot;Plus&quot; @click&#x3D;&quot;handleAdd(scope.row)&quot; v-hasPermi&#x3D;&quot;[&#39;$&#123;moduleName&#125;:$&#123;businessName&#125;:add&#39;]&quot;&gt;新增&lt;&#x2F;el-button&gt;              &lt;el-button link type&#x3D;&quot;primary&quot; icon&#x3D;&quot;Delete&quot; @click&#x3D;&quot;handleDelete(scope.row)&quot; v-hasPermi&#x3D;&quot;[&#39;$&#123;moduleName&#125;:$&#123;businessName&#125;:remove&#39;]&quot;&gt;删除&lt;&#x2F;el-button&gt;          &lt;&#x2F;template&gt;      &lt;&#x2F;el-table-column&gt;    &lt;&#x2F;el-table&gt;    &lt;!-- 添加或修改$&#123;functionName&#125;对话框 --&gt;    &lt;el-dialog :title&#x3D;&quot;title&quot; v-model&#x3D;&quot;open&quot; width&#x3D;&quot;500px&quot; append-to-body&gt;      &lt;el-form ref&#x3D;&quot;$&#123;businessName&#125;Ref&quot; :model&#x3D;&quot;form&quot; :rules&#x3D;&quot;rules&quot; label-width&#x3D;&quot;80px&quot;&gt;#foreach($column in $columns)#set($field&#x3D;$column.javaField)#if($column.insert &amp;&amp; !$column.pk)#set($parentheseIndex&#x3D;$column.columnComment.indexOf(&quot;（&quot;))#if($parentheseIndex !&#x3D; -1)#set($comment&#x3D;$column.columnComment.substring(0, $parentheseIndex))#else#set($comment&#x3D;$column.columnComment)#end#set($dictType&#x3D;$column.dictType)#if(&quot;&quot; !&#x3D; $treeParentCode &amp;&amp; $column.javaField &#x3D;&#x3D; $treeParentCode)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;treeParentCode&#125;&quot;&gt;          &lt;el-tree-select            v-model&#x3D;&quot;form.$&#123;treeParentCode&#125;&quot;            :data&#x3D;&quot;$&#123;businessName&#125;Options&quot;            :props&#x3D;&quot;&#123; value: &#39;$&#123;treeCode&#125;&#39;, label: &#39;$&#123;treeName&#125;&#39;, children: &#39;children&#39; &#125;&quot;            value-key&#x3D;&quot;$&#123;treeCode&#125;&quot;            placeholder&#x3D;&quot;请选择$&#123;comment&#125;&quot;            check-strictly          &#x2F;&gt;        &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;input&quot;)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;field&#125;&quot;&gt;          &lt;el-input v-model&#x3D;&quot;form.$&#123;field&#125;&quot; placeholder&#x3D;&quot;请输入$&#123;comment&#125;&quot; &#x2F;&gt;        &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;imageUpload&quot;)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;field&#125;&quot;&gt;          &lt;image-upload v-model&#x3D;&quot;form.$&#123;field&#125;&quot;&#x2F;&gt;        &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;fileUpload&quot;)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;field&#125;&quot;&gt;          &lt;file-upload v-model&#x3D;&quot;form.$&#123;field&#125;&quot;&#x2F;&gt;        &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;editor&quot;)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot;&gt;          &lt;editor v-model&#x3D;&quot;form.$&#123;field&#125;&quot; :min-height&#x3D;&quot;192&quot;&#x2F;&gt;        &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;select&quot; &amp;&amp; &quot;&quot; !&#x3D; $dictType)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;field&#125;&quot;&gt;          &lt;el-select v-model&#x3D;&quot;form.$&#123;field&#125;&quot; placeholder&#x3D;&quot;请选择$&#123;comment&#125;&quot;&gt;            &lt;el-option              v-for&#x3D;&quot;dict in $&#123;dictType&#125;&quot;              :key&#x3D;&quot;dict.value&quot;              :label&#x3D;&quot;dict.label&quot;#if($column.javaType &#x3D;&#x3D; &quot;Integer&quot; || $column.javaType &#x3D;&#x3D; &quot;Long&quot;)              :value&#x3D;&quot;parseInt(dict.value)&quot;#else              :value&#x3D;&quot;dict.value&quot;#end            &gt;&lt;&#x2F;el-option&gt;          &lt;&#x2F;el-select&gt;        &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;select&quot; &amp;&amp; $dictType)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;field&#125;&quot;&gt;          &lt;el-select v-model&#x3D;&quot;form.$&#123;field&#125;&quot; placeholder&#x3D;&quot;请选择$&#123;comment&#125;&quot;&gt;            &lt;el-option label&#x3D;&quot;请选择字典生成&quot; value&#x3D;&quot;&quot; &#x2F;&gt;          &lt;&#x2F;el-select&gt;        &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;checkbox&quot; &amp;&amp; &quot;&quot; !&#x3D; $dictType)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;field&#125;&quot;&gt;          &lt;el-checkbox-group v-model&#x3D;&quot;form.$&#123;field&#125;&quot;&gt;            &lt;el-checkbox              v-for&#x3D;&quot;dict in $&#123;dictType&#125;&quot;              :key&#x3D;&quot;dict.value&quot;              :label&#x3D;&quot;dict.value&quot;&gt;              &#123;&#123;dict.label&#125;&#125;            &lt;&#x2F;el-checkbox&gt;          &lt;&#x2F;el-checkbox-group&gt;        &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;checkbox&quot; &amp;&amp; $dictType)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;field&#125;&quot;&gt;          &lt;el-checkbox-group v-model&#x3D;&quot;form.$&#123;field&#125;&quot;&gt;            &lt;el-checkbox&gt;请选择字典生成&lt;&#x2F;el-checkbox&gt;          &lt;&#x2F;el-checkbox-group&gt;        &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;radio&quot; &amp;&amp; &quot;&quot; !&#x3D; $dictType)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;field&#125;&quot;&gt;          &lt;el-radio-group v-model&#x3D;&quot;form.$&#123;field&#125;&quot;&gt;            &lt;el-radio              v-for&#x3D;&quot;dict in $&#123;dictType&#125;&quot;              :key&#x3D;&quot;dict.value&quot;#if($column.javaType &#x3D;&#x3D; &quot;Integer&quot; || $column.javaType &#x3D;&#x3D; &quot;Long&quot;)              :label&#x3D;&quot;parseInt(dict.value)&quot;#else              :label&#x3D;&quot;dict.value&quot;#end            &gt;&#123;&#123;dict.label&#125;&#125;&lt;&#x2F;el-radio&gt;          &lt;&#x2F;el-radio-group&gt;        &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;radio&quot; &amp;&amp; $dictType)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;field&#125;&quot;&gt;          &lt;el-radio-group v-model&#x3D;&quot;form.$&#123;field&#125;&quot;&gt;            &lt;el-radio label&#x3D;&quot;1&quot;&gt;请选择字典生成&lt;&#x2F;el-radio&gt;          &lt;&#x2F;el-radio-group&gt;        &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;datetime&quot;)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;field&#125;&quot;&gt;          &lt;el-date-picker clearable            v-model&#x3D;&quot;form.$&#123;field&#125;&quot;            type&#x3D;&quot;datetime&quot;            value-format&#x3D;&quot;YYYY-MM-DD HH:mm:ss&quot;            placeholder&#x3D;&quot;选择$&#123;comment&#125;&quot;&gt;          &lt;&#x2F;el-date-picker&gt;        &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;textarea&quot;)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;field&#125;&quot;&gt;          &lt;el-input v-model&#x3D;&quot;form.$&#123;field&#125;&quot; type&#x3D;&quot;textarea&quot; placeholder&#x3D;&quot;请输入内容&quot; &#x2F;&gt;        &lt;&#x2F;el-form-item&gt;#end#end#end      &lt;&#x2F;el-form&gt;      &lt;template #footer&gt;        &lt;div class&#x3D;&quot;dialog-footer&quot;&gt;          &lt;el-button type&#x3D;&quot;primary&quot; @click&#x3D;&quot;submitForm&quot;&gt;确 定&lt;&#x2F;el-button&gt;          &lt;el-button @click&#x3D;&quot;cancel&quot;&gt;取 消&lt;&#x2F;el-button&gt;        &lt;&#x2F;div&gt;      &lt;&#x2F;template&gt;    &lt;&#x2F;el-dialog&gt;  &lt;&#x2F;div&gt;&lt;&#x2F;template&gt;&lt;script setup name&#x3D;&quot;$&#123;BusinessName&#125;&quot;&gt;import &#123; list$&#123;BusinessName&#125;, get$&#123;BusinessName&#125;, del$&#123;BusinessName&#125;, add$&#123;BusinessName&#125;, update$&#123;BusinessName&#125; &#125; from &quot;@&#x2F;api&#x2F;$&#123;moduleName&#125;&#x2F;$&#123;businessName&#125;&quot;;const &#123; proxy &#125; &#x3D; getCurrentInstance();#if($&#123;dicts&#125; !&#x3D; &#39;&#39;)#set($dictsNoSymbol&#x3D;$dicts.replace(&quot;&#39;&quot;, &quot;&quot;))const &#123; $&#123;dictsNoSymbol&#125; &#125; &#x3D; proxy.useDict($&#123;dicts&#125;);#endconst $&#123;businessName&#125;List &#x3D; ref([]);const $&#123;businessName&#125;Options &#x3D; ref([]);const open &#x3D; ref(false);const buttonLoading &#x3D; ref(false);const loading &#x3D; ref(true);const showSearch &#x3D; ref(true);const title &#x3D; ref(&quot;&quot;);const isExpandAll &#x3D; ref(true);const refreshTable &#x3D; ref(true);#foreach ($column in $columns)#if($column.htmlType &#x3D;&#x3D; &quot;datetime&quot; &amp;&amp; $column.queryType &#x3D;&#x3D; &quot;BETWEEN&quot;)#set($AttrName&#x3D;$column.javaField.substring(0,1).toUpperCase() + $&#123;column.javaField.substring(1)&#125;)const daterange$&#123;AttrName&#125; &#x3D; ref([]);#end#endconst data &#x3D; reactive(&#123;  form: &#123;&#125;,  queryParams: &#123;#foreach ($column in $columns)#if($column.query)    $column.javaField: undefined#if($foreach.count !&#x3D; $columns.size()),#end#end#end  &#125;,  rules: &#123;#foreach ($column in $columns)#if($column.required)#set($parentheseIndex&#x3D;$column.columnComment.indexOf(&quot;（&quot;))#if($parentheseIndex !&#x3D; -1)#set($comment&#x3D;$column.columnComment.substring(0, $parentheseIndex))#else#set($comment&#x3D;$column.columnComment)#end    $column.javaField: [      &#123; required: true, message: &quot;$comment不能为空&quot;, trigger: #if($column.htmlType &#x3D;&#x3D; &quot;select&quot; || $column.htmlType &#x3D;&#x3D; &quot;radio&quot;)&quot;change&quot;#else&quot;blur&quot;#end &#125;    ]#if($foreach.count !&#x3D; $columns.size()),#end#end#end  &#125;&#125;);const &#123; queryParams, form, rules &#125; &#x3D; toRefs(data);&#x2F;** 查询$&#123;functionName&#125;列表 *&#x2F;function getList() &#123;  loading.value &#x3D; true;#foreach ($column in $columns)#if($column.htmlType &#x3D;&#x3D; &quot;datetime&quot; &amp;&amp; $column.queryType &#x3D;&#x3D; &quot;BETWEEN&quot;)  queryParams.value.params &#x3D; &#123;&#125;;#break#end#end#foreach ($column in $columns)#if($column.htmlType &#x3D;&#x3D; &quot;datetime&quot; &amp;&amp; $column.queryType &#x3D;&#x3D; &quot;BETWEEN&quot;)#set($AttrName&#x3D;$column.javaField.substring(0,1).toUpperCase() + $&#123;column.javaField.substring(1)&#125;)  if (null !&#x3D; daterange$&#123;AttrName&#125; &amp;&amp; &#39;&#39; !&#x3D; daterange$&#123;AttrName&#125;) &#123;    queryParams.value.params[&quot;begin$&#123;AttrName&#125;&quot;] &#x3D; daterange$&#123;AttrName&#125;.value[0];    queryParams.value.params[&quot;end$&#123;AttrName&#125;&quot;] &#x3D; daterange$&#123;AttrName&#125;.value[1];  &#125;#end#end  list$&#123;BusinessName&#125;(queryParams.value).then(response &#x3D;&gt; &#123;    $&#123;businessName&#125;List.value &#x3D; proxy.handleTree(response.data, &quot;$&#123;treeCode&#125;&quot;, &quot;$&#123;treeParentCode&#125;&quot;);    loading.value &#x3D; false;  &#125;);&#125;&#x2F;** 查询$&#123;functionName&#125;下拉树结构 *&#x2F;function getTreeselect() &#123;  list$&#123;BusinessName&#125;().then(response &#x3D;&gt; &#123;    $&#123;businessName&#125;Options.value &#x3D; [];    const data &#x3D; &#123; $&#123;treeCode&#125;: 0, $&#123;treeName&#125;: &#39;顶级节点&#39;, children: [] &#125;;    data.children &#x3D; proxy.handleTree(response.data, &quot;$&#123;treeCode&#125;&quot;, &quot;$&#123;treeParentCode&#125;&quot;);    $&#123;businessName&#125;Options.value.push(data);  &#125;);&#125;&#x2F;&#x2F; 取消按钮function cancel() &#123;  open.value &#x3D; false;  reset();&#125;&#x2F;&#x2F; 表单重置function reset() &#123;  form.value &#x3D; &#123;#foreach ($column in $columns)#if($column.htmlType &#x3D;&#x3D; &quot;checkbox&quot;)    $column.javaField: []#if($foreach.count !&#x3D; $columns.size()),#end#else    $column.javaField: null#if($foreach.count !&#x3D; $columns.size()),#end#end#end  &#125;;  proxy.resetForm(&quot;$&#123;businessName&#125;Ref&quot;);&#125;&#x2F;** 搜索按钮操作 *&#x2F;function handleQuery() &#123;  getList();&#125;&#x2F;** 重置按钮操作 *&#x2F;function resetQuery() &#123;#foreach ($column in $columns)#if($column.htmlType &#x3D;&#x3D; &quot;datetime&quot; &amp;&amp; $column.queryType &#x3D;&#x3D; &quot;BETWEEN&quot;)#set($AttrName&#x3D;$column.javaField.substring(0,1).toUpperCase() + $&#123;column.javaField.substring(1)&#125;)  daterange$&#123;AttrName&#125;.value &#x3D; [];#end#end  proxy.resetForm(&quot;queryRef&quot;);  handleQuery();&#125;&#x2F;** 新增按钮操作 *&#x2F;function handleAdd(row) &#123;  reset();  getTreeselect();  if (row !&#x3D; null &amp;&amp; row.$&#123;treeCode&#125;) &#123;    form.value.$&#123;treeParentCode&#125; &#x3D; row.$&#123;treeCode&#125;;  &#125; else &#123;    form.value.$&#123;treeParentCode&#125; &#x3D; 0;  &#125;  open.value &#x3D; true;  title.value &#x3D; &quot;添加$&#123;functionName&#125;&quot;;&#125;&#x2F;** 展开&#x2F;折叠操作 *&#x2F;function toggleExpandAll() &#123;  refreshTable.value &#x3D; false;  isExpandAll.value &#x3D; !isExpandAll.value;  nextTick(() &#x3D;&gt; &#123;    refreshTable.value &#x3D; true;  &#125;);&#125;&#x2F;** 修改按钮操作 *&#x2F;async function handleUpdate(row) &#123;  loading.value &#x3D; true;  reset();  await getTreeselect();  if (row !&#x3D; null) &#123;    form.value.$&#123;treeParentCode&#125; &#x3D; row.$&#123;treeParentCode&#125;;  &#125;  get$&#123;BusinessName&#125;(row.$&#123;pkColumn.javaField&#125;).then(response &#x3D;&gt; &#123;    loading.value &#x3D; false;    form.value &#x3D; response.data;#foreach ($column in $columns)#if($column.htmlType &#x3D;&#x3D; &quot;checkbox&quot;)    form.value.$column.javaField &#x3D; form.value.$&#123;column.javaField&#125;.split(&quot;,&quot;);#end#end    open.value &#x3D; true;    title.value &#x3D; &quot;修改$&#123;functionName&#125;&quot;;  &#125;);&#125;&#x2F;** 提交按钮 *&#x2F;function submitForm() &#123;  proxy.#[[$]]#refs[&quot;$&#123;businessName&#125;Ref&quot;].validate(valid &#x3D;&gt; &#123;    if (valid) &#123;      buttonLoading.value &#x3D; true;#foreach ($column in $columns)#if($column.htmlType &#x3D;&#x3D; &quot;checkbox&quot;)      form.value.$column.javaField &#x3D; form.value.$&#123;column.javaField&#125;.join(&quot;,&quot;);#end#end      if (form.value.$&#123;pkColumn.javaField&#125; !&#x3D; null) &#123;        update$&#123;BusinessName&#125;(form.value).then(response &#x3D;&gt; &#123;          proxy.#[[$modal]]#.msgSuccess(&quot;修改成功&quot;);          open.value &#x3D; false;          getList();        &#125;).finally(() &#x3D;&gt; &#123;          buttonLoading.value &#x3D; false;        &#125;);      &#125; else &#123;        add$&#123;BusinessName&#125;(form.value).then(response &#x3D;&gt; &#123;          proxy.#[[$modal]]#.msgSuccess(&quot;新增成功&quot;);          open.value &#x3D; false;          getList();        &#125;).finally(() &#x3D;&gt; &#123;          buttonLoading.value &#x3D; false;        &#125;);      &#125;    &#125;  &#125;);&#125;&#x2F;** 删除按钮操作 *&#x2F;function handleDelete(row) &#123;  proxy.#[[$modal]]#.confirm(&#39;是否确认删除$&#123;functionName&#125;编号为&quot;&#39; + row.$&#123;pkColumn.javaField&#125; + &#39;&quot;的数据项？&#39;).then(function() &#123;    loading.value &#x3D; true;    return del$&#123;BusinessName&#125;(row.$&#123;pkColumn.javaField&#125;);  &#125;).then(() &#x3D;&gt; &#123;    loading.value &#x3D; false;    getList();    proxy.#[[$modal]]#.msgSuccess(&quot;删除成功&quot;);  &#125;).catch(() &#x3D;&gt; &#123;  &#125;).finally(() &#x3D;&gt; &#123;    loading.value &#x3D; false;  &#125;);&#125;getList();&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><h5 id="index-vue2-vm"><a href="#index-vue2-vm" class="headerlink" title="index.vue2.vm"></a>index.vue2.vm</h5><figure><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">&lt;template&gt;  &lt;div class&#x3D;&quot;app-container&quot;&gt;    &lt;el-form :model&#x3D;&quot;queryParams&quot; ref&#x3D;&quot;queryForm&quot; size&#x3D;&quot;small&quot; :inline&#x3D;&quot;true&quot; v-show&#x3D;&quot;showSearch&quot; label-width&#x3D;&quot;68px&quot;&gt;#foreach($column in $columns)#if($column.query)#set($dictType&#x3D;$column.dictType)#set($AttrName&#x3D;$column.javaField.substring(0,1).toUpperCase() + $&#123;column.javaField.substring(1)&#125;)#set($parentheseIndex&#x3D;$column.columnComment.indexOf(&quot;（&quot;))#if($parentheseIndex !&#x3D; -1)#set($comment&#x3D;$column.columnComment.substring(0, $parentheseIndex))#else#set($comment&#x3D;$column.columnComment)#end#if($column.htmlType &#x3D;&#x3D; &quot;input&quot; || $column.htmlType &#x3D;&#x3D; &quot;textarea&quot;)      &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;column.javaField&#125;&quot;&gt;        &lt;el-input          v-model&#x3D;&quot;queryParams.$&#123;column.javaField&#125;&quot;          placeholder&#x3D;&quot;请输入$&#123;comment&#125;&quot;          clearable          @keyup.enter.native&#x3D;&quot;handleQuery&quot;        &#x2F;&gt;      &lt;&#x2F;el-form-item&gt;#elseif(($column.htmlType &#x3D;&#x3D; &quot;select&quot; || $column.htmlType &#x3D;&#x3D; &quot;radio&quot;) &amp;&amp; &quot;&quot; !&#x3D; $dictType)      &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;column.javaField&#125;&quot;&gt;        &lt;el-select v-model&#x3D;&quot;queryParams.$&#123;column.javaField&#125;&quot; placeholder&#x3D;&quot;请选择$&#123;comment&#125;&quot; clearable&gt;          &lt;el-option            v-for&#x3D;&quot;dict in dict.type.$&#123;dictType&#125;&quot;            :key&#x3D;&quot;dict.value&quot;            :label&#x3D;&quot;dict.label&quot;            :value&#x3D;&quot;dict.value&quot;          &#x2F;&gt;        &lt;&#x2F;el-select&gt;      &lt;&#x2F;el-form-item&gt;#elseif(($column.htmlType &#x3D;&#x3D; &quot;select&quot; || $column.htmlType &#x3D;&#x3D; &quot;radio&quot;) &amp;&amp; $dictType)      &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;column.javaField&#125;&quot;&gt;        &lt;el-select v-model&#x3D;&quot;queryParams.$&#123;column.javaField&#125;&quot; placeholder&#x3D;&quot;请选择$&#123;comment&#125;&quot; clearable&gt;          &lt;el-option label&#x3D;&quot;请选择字典生成&quot; value&#x3D;&quot;&quot; &#x2F;&gt;        &lt;&#x2F;el-select&gt;      &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;datetime&quot; &amp;&amp; $column.queryType !&#x3D; &quot;BETWEEN&quot;)      &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;column.javaField&#125;&quot;&gt;        &lt;el-date-picker clearable          v-model&#x3D;&quot;queryParams.$&#123;column.javaField&#125;&quot;          type&#x3D;&quot;date&quot;          value-format&#x3D;&quot;yyyy-MM-dd&quot;          placeholder&#x3D;&quot;请选择$&#123;comment&#125;&quot;&gt;        &lt;&#x2F;el-date-picker&gt;      &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;datetime&quot; &amp;&amp; $column.queryType &#x3D;&#x3D; &quot;BETWEEN&quot;)      &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot;&gt;        &lt;el-date-picker          v-model&#x3D;&quot;daterange$&#123;AttrName&#125;&quot;          style&#x3D;&quot;width: 240px&quot;          value-format&#x3D;&quot;yyyy-MM-dd HH:mm:ss&quot;          type&#x3D;&quot;daterange&quot;          range-separator&#x3D;&quot;-&quot;          start-placeholder&#x3D;&quot;开始日期&quot;          end-placeholder&#x3D;&quot;结束日期&quot;          :default-time&#x3D;&quot;[&#39;00:00:00&#39;, &#39;23:59:59&#39;]&quot;        &gt;&lt;&#x2F;el-date-picker&gt;      &lt;&#x2F;el-form-item&gt;#end#end#end      &lt;el-form-item&gt;        &lt;el-button type&#x3D;&quot;primary&quot; icon&#x3D;&quot;el-icon-search&quot; size&#x3D;&quot;mini&quot; @click&#x3D;&quot;handleQuery&quot;&gt;搜索&lt;&#x2F;el-button&gt;        &lt;el-button icon&#x3D;&quot;el-icon-refresh&quot; size&#x3D;&quot;mini&quot; @click&#x3D;&quot;resetQuery&quot;&gt;重置&lt;&#x2F;el-button&gt;      &lt;&#x2F;el-form-item&gt;    &lt;&#x2F;el-form&gt;    &lt;el-row :gutter&#x3D;&quot;10&quot; class&#x3D;&quot;mb8&quot;&gt;      &lt;el-col :span&#x3D;&quot;1.5&quot;&gt;        &lt;el-button          type&#x3D;&quot;primary&quot;          plain          icon&#x3D;&quot;el-icon-plus&quot;          size&#x3D;&quot;mini&quot;          @click&#x3D;&quot;handleAdd&quot;          v-hasPermi&#x3D;&quot;[&#39;$&#123;moduleName&#125;:$&#123;businessName&#125;:add&#39;]&quot;        &gt;新增&lt;&#x2F;el-button&gt;      &lt;&#x2F;el-col&gt;      &lt;el-col :span&#x3D;&quot;1.5&quot;&gt;        &lt;el-button          type&#x3D;&quot;success&quot;          plain          icon&#x3D;&quot;el-icon-edit&quot;          size&#x3D;&quot;mini&quot;          :disabled&#x3D;&quot;single&quot;          @click&#x3D;&quot;handleUpdate&quot;          v-hasPermi&#x3D;&quot;[&#39;$&#123;moduleName&#125;:$&#123;businessName&#125;:edit&#39;]&quot;        &gt;修改&lt;&#x2F;el-button&gt;      &lt;&#x2F;el-col&gt;      &lt;el-col :span&#x3D;&quot;1.5&quot;&gt;        &lt;el-button          type&#x3D;&quot;danger&quot;          plain          icon&#x3D;&quot;el-icon-delete&quot;          size&#x3D;&quot;mini&quot;          :disabled&#x3D;&quot;multiple&quot;          @click&#x3D;&quot;handleDelete&quot;          v-hasPermi&#x3D;&quot;[&#39;$&#123;moduleName&#125;:$&#123;businessName&#125;:remove&#39;]&quot;        &gt;删除&lt;&#x2F;el-button&gt;      &lt;&#x2F;el-col&gt;      &lt;el-col :span&#x3D;&quot;1.5&quot;&gt;        &lt;el-button          type&#x3D;&quot;warning&quot;          plain          icon&#x3D;&quot;el-icon-download&quot;          size&#x3D;&quot;mini&quot;          @click&#x3D;&quot;handleExport&quot;          v-hasPermi&#x3D;&quot;[&#39;$&#123;moduleName&#125;:$&#123;businessName&#125;:export&#39;]&quot;        &gt;导出&lt;&#x2F;el-button&gt;      &lt;&#x2F;el-col&gt;      &lt;right-toolbar :showSearch.sync&#x3D;&quot;showSearch&quot; @queryTable&#x3D;&quot;getList&quot;&gt;&lt;&#x2F;right-toolbar&gt;    &lt;&#x2F;el-row&gt;    &lt;el-table v-loading&#x3D;&quot;loading&quot; :data&#x3D;&quot;$&#123;businessName&#125;List&quot; @selection-change&#x3D;&quot;handleSelectionChange&quot;&gt;      &lt;el-table-column type&#x3D;&quot;selection&quot; width&#x3D;&quot;55&quot; align&#x3D;&quot;center&quot; &#x2F;&gt;#foreach($column in $columns)#set($javaField&#x3D;$column.javaField)#set($parentheseIndex&#x3D;$column.columnComment.indexOf(&quot;（&quot;))#if($parentheseIndex !&#x3D; -1)#set($comment&#x3D;$column.columnComment.substring(0, $parentheseIndex))#else#set($comment&#x3D;$column.columnComment)#end#if($column.pk)      &lt;el-table-column label&#x3D;&quot;$&#123;comment&#125;&quot; align&#x3D;&quot;center&quot; prop&#x3D;&quot;$&#123;javaField&#125;&quot; v-if&#x3D;&quot;$&#123;column.list&#125;&quot;&#x2F;&gt;#elseif($column.list &amp;&amp; $column.htmlType &#x3D;&#x3D; &quot;datetime&quot;)      &lt;el-table-column label&#x3D;&quot;$&#123;comment&#125;&quot; align&#x3D;&quot;center&quot; prop&#x3D;&quot;$&#123;javaField&#125;&quot; width&#x3D;&quot;180&quot;&gt;        &lt;template slot-scope&#x3D;&quot;scope&quot;&gt;          &lt;span&gt;&#123;&#123; parseTime(scope.row.$&#123;javaField&#125;, &#39;&#123;y&#125;-&#123;m&#125;-&#123;d&#125;&#39;) &#125;&#125;&lt;&#x2F;span&gt;        &lt;&#x2F;template&gt;      &lt;&#x2F;el-table-column&gt;#elseif($column.list &amp;&amp; $column.htmlType &#x3D;&#x3D; &quot;imageUpload&quot;)      &lt;el-table-column label&#x3D;&quot;$&#123;comment&#125;&quot; align&#x3D;&quot;center&quot; prop&#x3D;&quot;$&#123;javaField&#125;&quot; width&#x3D;&quot;100&quot;&gt;        &lt;template slot-scope&#x3D;&quot;scope&quot;&gt;          &lt;image-preview :src&#x3D;&quot;scope.row.$&#123;javaField&#125;&quot; :width&#x3D;&quot;50&quot; :height&#x3D;&quot;50&quot;&#x2F;&gt;        &lt;&#x2F;template&gt;      &lt;&#x2F;el-table-column&gt;#elseif($column.list &amp;&amp; $column.dictType &amp;&amp; &quot;&quot; !&#x3D; $column.dictType)      &lt;el-table-column label&#x3D;&quot;$&#123;comment&#125;&quot; align&#x3D;&quot;center&quot; prop&#x3D;&quot;$&#123;javaField&#125;&quot;&gt;        &lt;template slot-scope&#x3D;&quot;scope&quot;&gt;#if($column.htmlType &#x3D;&#x3D; &quot;checkbox&quot;)          &lt;dict-tag :options&#x3D;&quot;dict.type.$&#123;column.dictType&#125;&quot; :value&#x3D;&quot;scope.row.$&#123;javaField&#125; ? scope.row.$&#123;javaField&#125;.split(&#39;,&#39;) : []&quot;&#x2F;&gt;#else          &lt;dict-tag :options&#x3D;&quot;dict.type.$&#123;column.dictType&#125;&quot; :value&#x3D;&quot;scope.row.$&#123;javaField&#125;&quot;&#x2F;&gt;#end        &lt;&#x2F;template&gt;      &lt;&#x2F;el-table-column&gt;#elseif($column.list &amp;&amp; &quot;&quot; !&#x3D; $javaField)      &lt;el-table-column label&#x3D;&quot;$&#123;comment&#125;&quot; align&#x3D;&quot;center&quot; prop&#x3D;&quot;$&#123;javaField&#125;&quot; &#x2F;&gt;#end#end      &lt;el-table-column label&#x3D;&quot;操作&quot; align&#x3D;&quot;center&quot; class-name&#x3D;&quot;small-padding fixed-width&quot;&gt;        &lt;template slot-scope&#x3D;&quot;scope&quot;&gt;          &lt;el-button            size&#x3D;&quot;mini&quot;            type&#x3D;&quot;text&quot;            icon&#x3D;&quot;el-icon-edit&quot;            @click&#x3D;&quot;handleUpdate(scope.row)&quot;            v-hasPermi&#x3D;&quot;[&#39;$&#123;moduleName&#125;:$&#123;businessName&#125;:edit&#39;]&quot;          &gt;修改&lt;&#x2F;el-button&gt;          &lt;el-button            size&#x3D;&quot;mini&quot;            type&#x3D;&quot;text&quot;            icon&#x3D;&quot;el-icon-delete&quot;            @click&#x3D;&quot;handleDelete(scope.row)&quot;            v-hasPermi&#x3D;&quot;[&#39;$&#123;moduleName&#125;:$&#123;businessName&#125;:remove&#39;]&quot;          &gt;删除&lt;&#x2F;el-button&gt;        &lt;&#x2F;template&gt;      &lt;&#x2F;el-table-column&gt;    &lt;&#x2F;el-table&gt;    &lt;pagination      v-show&#x3D;&quot;total&gt;0&quot;      :total&#x3D;&quot;total&quot;      :page.sync&#x3D;&quot;queryParams.pageNum&quot;      :limit.sync&#x3D;&quot;queryParams.pageSize&quot;      @pagination&#x3D;&quot;getList&quot;    &#x2F;&gt;    &lt;!-- 添加或修改$&#123;functionName&#125;对话框 --&gt;    &lt;el-dialog :title&#x3D;&quot;title&quot; :visible.sync&#x3D;&quot;open&quot; width&#x3D;&quot;500px&quot; append-to-body&gt;      &lt;el-form ref&#x3D;&quot;form&quot; :model&#x3D;&quot;form&quot; :rules&#x3D;&quot;rules&quot; label-width&#x3D;&quot;80px&quot;&gt;#foreach($column in $columns)#set($field&#x3D;$column.javaField)#if($column.insert &amp;&amp; !$column.pk)#set($parentheseIndex&#x3D;$column.columnComment.indexOf(&quot;（&quot;))#if($parentheseIndex !&#x3D; -1)#set($comment&#x3D;$column.columnComment.substring(0, $parentheseIndex))#else#set($comment&#x3D;$column.columnComment)#end#set($dictType&#x3D;$column.dictType)#if($column.htmlType &#x3D;&#x3D; &quot;input&quot;)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;field&#125;&quot;&gt;          &lt;el-input v-model&#x3D;&quot;form.$&#123;field&#125;&quot; placeholder&#x3D;&quot;请输入$&#123;comment&#125;&quot; &#x2F;&gt;        &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;imageUpload&quot;)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;field&#125;&quot;&gt;          &lt;image-upload v-model&#x3D;&quot;form.$&#123;field&#125;&quot;&#x2F;&gt;        &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;fileUpload&quot;)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;field&#125;&quot;&gt;          &lt;file-upload v-model&#x3D;&quot;form.$&#123;field&#125;&quot;&#x2F;&gt;        &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;editor&quot;)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot;&gt;          &lt;editor v-model&#x3D;&quot;form.$&#123;field&#125;&quot; :min-height&#x3D;&quot;192&quot;&#x2F;&gt;        &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;select&quot; &amp;&amp; &quot;&quot; !&#x3D; $dictType)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;field&#125;&quot;&gt;          &lt;el-select v-model&#x3D;&quot;form.$&#123;field&#125;&quot; placeholder&#x3D;&quot;请选择$&#123;comment&#125;&quot;&gt;            &lt;el-option              v-for&#x3D;&quot;dict in dict.type.$&#123;dictType&#125;&quot;              :key&#x3D;&quot;dict.value&quot;              :label&#x3D;&quot;dict.label&quot;#if($column.javaType &#x3D;&#x3D; &quot;Integer&quot; || $column.javaType &#x3D;&#x3D; &quot;Long&quot;)              :value&#x3D;&quot;parseInt(dict.value)&quot;#else              :value&#x3D;&quot;dict.value&quot;#end            &gt;&lt;&#x2F;el-option&gt;          &lt;&#x2F;el-select&gt;        &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;select&quot; &amp;&amp; $dictType)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;field&#125;&quot;&gt;          &lt;el-select v-model&#x3D;&quot;form.$&#123;field&#125;&quot; placeholder&#x3D;&quot;请选择$&#123;comment&#125;&quot;&gt;            &lt;el-option label&#x3D;&quot;请选择字典生成&quot; value&#x3D;&quot;&quot; &#x2F;&gt;          &lt;&#x2F;el-select&gt;        &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;checkbox&quot; &amp;&amp; &quot;&quot; !&#x3D; $dictType)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;field&#125;&quot;&gt;          &lt;el-checkbox-group v-model&#x3D;&quot;form.$&#123;field&#125;&quot;&gt;            &lt;el-checkbox              v-for&#x3D;&quot;dict in dict.type.$&#123;dictType&#125;&quot;              :key&#x3D;&quot;dict.value&quot;              :label&#x3D;&quot;dict.value&quot;&gt;              &#123;&#123;dict.label&#125;&#125;            &lt;&#x2F;el-checkbox&gt;          &lt;&#x2F;el-checkbox-group&gt;        &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;checkbox&quot; &amp;&amp; $dictType)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;field&#125;&quot;&gt;          &lt;el-checkbox-group v-model&#x3D;&quot;form.$&#123;field&#125;&quot;&gt;            &lt;el-checkbox&gt;请选择字典生成&lt;&#x2F;el-checkbox&gt;          &lt;&#x2F;el-checkbox-group&gt;        &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;radio&quot; &amp;&amp; &quot;&quot; !&#x3D; $dictType)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;field&#125;&quot;&gt;          &lt;el-radio-group v-model&#x3D;&quot;form.$&#123;field&#125;&quot;&gt;            &lt;el-radio              v-for&#x3D;&quot;dict in dict.type.$&#123;dictType&#125;&quot;              :key&#x3D;&quot;dict.value&quot;#if($column.javaType &#x3D;&#x3D; &quot;Integer&quot; || $column.javaType &#x3D;&#x3D; &quot;Long&quot;)              :label&#x3D;&quot;parseInt(dict.value)&quot;#else              :label&#x3D;&quot;dict.value&quot;#end            &gt;&#123;&#123;dict.label&#125;&#125;&lt;&#x2F;el-radio&gt;          &lt;&#x2F;el-radio-group&gt;        &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;radio&quot; &amp;&amp; $dictType)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;field&#125;&quot;&gt;          &lt;el-radio-group v-model&#x3D;&quot;form.$&#123;field&#125;&quot;&gt;            &lt;el-radio label&#x3D;&quot;1&quot;&gt;请选择字典生成&lt;&#x2F;el-radio&gt;          &lt;&#x2F;el-radio-group&gt;        &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;datetime&quot;)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;field&#125;&quot;&gt;          &lt;el-date-picker clearable            v-model&#x3D;&quot;form.$&#123;field&#125;&quot;            type&#x3D;&quot;datetime&quot;            value-format&#x3D;&quot;yyyy-MM-dd HH:mm:ss&quot;            placeholder&#x3D;&quot;请选择$&#123;comment&#125;&quot;&gt;          &lt;&#x2F;el-date-picker&gt;        &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;textarea&quot;)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;field&#125;&quot;&gt;          &lt;el-input v-model&#x3D;&quot;form.$&#123;field&#125;&quot; type&#x3D;&quot;textarea&quot; placeholder&#x3D;&quot;请输入内容&quot; &#x2F;&gt;        &lt;&#x2F;el-form-item&gt;#end#end#end#if($table.sub)        &lt;el-divider content-position&#x3D;&quot;center&quot;&gt;$&#123;subTable.functionName&#125;信息&lt;&#x2F;el-divider&gt;        &lt;el-row :gutter&#x3D;&quot;10&quot; class&#x3D;&quot;mb8&quot;&gt;          &lt;el-col :span&#x3D;&quot;1.5&quot;&gt;            &lt;el-button type&#x3D;&quot;primary&quot; icon&#x3D;&quot;el-icon-plus&quot; size&#x3D;&quot;mini&quot; @click&#x3D;&quot;handleAdd$&#123;subClassName&#125;&quot;&gt;添加&lt;&#x2F;el-button&gt;          &lt;&#x2F;el-col&gt;          &lt;el-col :span&#x3D;&quot;1.5&quot;&gt;            &lt;el-button type&#x3D;&quot;danger&quot; icon&#x3D;&quot;el-icon-delete&quot; size&#x3D;&quot;mini&quot; @click&#x3D;&quot;handleDelete$&#123;subClassName&#125;&quot;&gt;删除&lt;&#x2F;el-button&gt;          &lt;&#x2F;el-col&gt;        &lt;&#x2F;el-row&gt;        &lt;el-table :data&#x3D;&quot;$&#123;subclassName&#125;List&quot; :row-class-name&#x3D;&quot;row$&#123;subClassName&#125;Index&quot; @selection-change&#x3D;&quot;handle$&#123;subClassName&#125;SelectionChange&quot; ref&#x3D;&quot;$&#123;subclassName&#125;&quot;&gt;          &lt;el-table-column type&#x3D;&quot;selection&quot; width&#x3D;&quot;50&quot; align&#x3D;&quot;center&quot; &#x2F;&gt;          &lt;el-table-column label&#x3D;&quot;序号&quot; align&#x3D;&quot;center&quot; prop&#x3D;&quot;index&quot; width&#x3D;&quot;50&quot;&#x2F;&gt;#foreach($column in $subTable.columns)#set($javaField&#x3D;$column.javaField)#set($parentheseIndex&#x3D;$column.columnComment.indexOf(&quot;（&quot;))#if($parentheseIndex !&#x3D; -1)#set($comment&#x3D;$column.columnComment.substring(0, $parentheseIndex))#else#set($comment&#x3D;$column.columnComment)#end#if($column.pk || $javaField &#x3D;&#x3D; $&#123;subTableFkclassName&#125;)#elseif($column.list &amp;&amp; $column.htmlType &#x3D;&#x3D; &quot;input&quot;)          &lt;el-table-column label&#x3D;&quot;$comment&quot; prop&#x3D;&quot;$&#123;javaField&#125;&quot; width&#x3D;&quot;150&quot;&gt;            &lt;template slot-scope&#x3D;&quot;scope&quot;&gt;              &lt;el-input v-model&#x3D;&quot;scope.row.$javaField&quot; placeholder&#x3D;&quot;请输入$comment&quot; &#x2F;&gt;            &lt;&#x2F;template&gt;          &lt;&#x2F;el-table-column&gt;#elseif($column.list &amp;&amp; $column.htmlType &#x3D;&#x3D; &quot;datetime&quot;)          &lt;el-table-column label&#x3D;&quot;$comment&quot; prop&#x3D;&quot;$&#123;javaField&#125;&quot; width&#x3D;&quot;240&quot;&gt;            &lt;template slot-scope&#x3D;&quot;scope&quot;&gt;              &lt;el-date-picker clearable v-model&#x3D;&quot;scope.row.$javaField&quot; type&#x3D;&quot;date&quot; value-format&#x3D;&quot;yyyy-MM-dd&quot; placeholder&#x3D;&quot;请选择$comment&quot; &#x2F;&gt;            &lt;&#x2F;template&gt;          &lt;&#x2F;el-table-column&gt;#elseif($column.list &amp;&amp; ($column.htmlType &#x3D;&#x3D; &quot;select&quot; || $column.htmlType &#x3D;&#x3D; &quot;radio&quot;) &amp;&amp; &quot;&quot; !&#x3D; $column.dictType)          &lt;el-table-column label&#x3D;&quot;$comment&quot; prop&#x3D;&quot;$&#123;javaField&#125;&quot; width&#x3D;&quot;150&quot;&gt;            &lt;template slot-scope&#x3D;&quot;scope&quot;&gt;              &lt;el-select v-model&#x3D;&quot;scope.row.$javaField&quot; placeholder&#x3D;&quot;请选择$comment&quot;&gt;                &lt;el-option                  v-for&#x3D;&quot;dict in dict.type.$column.dictType&quot;                  :key&#x3D;&quot;dict.value&quot;                  :label&#x3D;&quot;dict.label&quot;                  :value&#x3D;&quot;dict.value&quot;                &gt;&lt;&#x2F;el-option&gt;              &lt;&#x2F;el-select&gt;            &lt;&#x2F;template&gt;          &lt;&#x2F;el-table-column&gt;#elseif($column.list &amp;&amp; ($column.htmlType &#x3D;&#x3D; &quot;select&quot; || $column.htmlType &#x3D;&#x3D; &quot;radio&quot;) &amp;&amp; &quot;&quot; &#x3D;&#x3D; $column.dictType)          &lt;el-table-column label&#x3D;&quot;$comment&quot; prop&#x3D;&quot;$&#123;javaField&#125;&quot; width&#x3D;&quot;150&quot;&gt;            &lt;template slot-scope&#x3D;&quot;scope&quot;&gt;              &lt;el-select v-model&#x3D;&quot;scope.row.$javaField&quot; placeholder&#x3D;&quot;请选择$comment&quot;&gt;                &lt;el-option label&#x3D;&quot;请选择字典生成&quot; value&#x3D;&quot;&quot; &#x2F;&gt;              &lt;&#x2F;el-select&gt;            &lt;&#x2F;template&gt;          &lt;&#x2F;el-table-column&gt;#end#end        &lt;&#x2F;el-table&gt;#end      &lt;&#x2F;el-form&gt;      &lt;div slot&#x3D;&quot;footer&quot; class&#x3D;&quot;dialog-footer&quot;&gt;        &lt;el-button :loading&#x3D;&quot;buttonLoading&quot; type&#x3D;&quot;primary&quot; @click&#x3D;&quot;submitForm&quot;&gt;确 定&lt;&#x2F;el-button&gt;        &lt;el-button @click&#x3D;&quot;cancel&quot;&gt;取 消&lt;&#x2F;el-button&gt;      &lt;&#x2F;div&gt;    &lt;&#x2F;el-dialog&gt;  &lt;&#x2F;div&gt;&lt;&#x2F;template&gt;&lt;script&gt;import &#123; list$&#123;BusinessName&#125;, get$&#123;BusinessName&#125;, del$&#123;BusinessName&#125;, add$&#123;BusinessName&#125;, update$&#123;BusinessName&#125; &#125; from &quot;@&#x2F;api&#x2F;$&#123;moduleName&#125;&#x2F;$&#123;businessName&#125;&quot;;export default &#123;  name: &quot;$&#123;BusinessName&#125;&quot;,#if($&#123;dicts&#125; !&#x3D; &#39;&#39;)  dicts: [$&#123;dicts&#125;],#end  data() &#123;    return &#123;      &#x2F;&#x2F; 按钮loading      buttonLoading: false,      &#x2F;&#x2F; 遮罩层      loading: true,      &#x2F;&#x2F; 选中数组      ids: [],#if($table.sub)      &#x2F;&#x2F; 子表选中数据      checked$&#123;subClassName&#125;: [],#end      &#x2F;&#x2F; 非单个禁用      single: true,      &#x2F;&#x2F; 非多个禁用      multiple: true,      &#x2F;&#x2F; 显示搜索条件      showSearch: true,      &#x2F;&#x2F; 总条数      total: 0,      &#x2F;&#x2F; $&#123;functionName&#125;表格数据      $&#123;businessName&#125;List: [],#if($table.sub)      &#x2F;&#x2F; $&#123;subTable.functionName&#125;表格数据      $&#123;subclassName&#125;List: [],#end      &#x2F;&#x2F; 弹出层标题      title: &quot;&quot;,      &#x2F;&#x2F; 是否显示弹出层      open: false,#foreach ($column in $columns)#if($column.htmlType &#x3D;&#x3D; &quot;datetime&quot; &amp;&amp; $column.queryType &#x3D;&#x3D; &quot;BETWEEN&quot;)#set($AttrName&#x3D;$column.javaField.substring(0,1).toUpperCase() + $&#123;column.javaField.substring(1)&#125;)      &#x2F;&#x2F; $comment时间范围      daterange$&#123;AttrName&#125;: [],#end#end      &#x2F;&#x2F; 查询参数      queryParams: &#123;        pageNum: 1,        pageSize: 10,#foreach ($column in $columns)#if($column.query)        $column.javaField: undefined#if($foreach.count !&#x3D; $columns.size()),#end#end#end      &#125;,      &#x2F;&#x2F; 表单参数      form: &#123;&#125;,      &#x2F;&#x2F; 表单校验      rules: &#123;#foreach ($column in $columns)#if($column.required)#set($parentheseIndex&#x3D;$column.columnComment.indexOf(&quot;（&quot;))#if($parentheseIndex !&#x3D; -1)#set($comment&#x3D;$column.columnComment.substring(0, $parentheseIndex))#else#set($comment&#x3D;$column.columnComment)#end        $column.javaField: [          &#123; required: true, message: &quot;$comment不能为空&quot;, trigger: #if($column.htmlType &#x3D;&#x3D; &quot;select&quot; || $column.htmlType &#x3D;&#x3D; &quot;radio&quot;)&quot;change&quot;#else&quot;blur&quot;#end &#125;        ]#if($foreach.count !&#x3D; $columns.size()),#end#end#end      &#125;    &#125;;  &#125;,  created() &#123;    this.getList();  &#125;,  methods: &#123;    &#x2F;** 查询$&#123;functionName&#125;列表 *&#x2F;    getList() &#123;      this.loading &#x3D; true;#foreach ($column in $columns)#if($column.htmlType &#x3D;&#x3D; &quot;datetime&quot; &amp;&amp; $column.queryType &#x3D;&#x3D; &quot;BETWEEN&quot;)      this.queryParams.params &#x3D; &#123;&#125;;#break#end#end#foreach ($column in $columns)#if($column.htmlType &#x3D;&#x3D; &quot;datetime&quot; &amp;&amp; $column.queryType &#x3D;&#x3D; &quot;BETWEEN&quot;)#set($AttrName&#x3D;$column.javaField.substring(0,1).toUpperCase() + $&#123;column.javaField.substring(1)&#125;)      if (null !&#x3D; this.daterange$&#123;AttrName&#125; &amp;&amp; &#39;&#39; !&#x3D; this.daterange$&#123;AttrName&#125;) &#123;        this.queryParams.params[&quot;begin$&#123;AttrName&#125;&quot;] &#x3D; this.daterange$&#123;AttrName&#125;[0];        this.queryParams.params[&quot;end$&#123;AttrName&#125;&quot;] &#x3D; this.daterange$&#123;AttrName&#125;[1];      &#125;#end#end      list$&#123;BusinessName&#125;(this.queryParams).then(response &#x3D;&gt; &#123;        this.$&#123;businessName&#125;List &#x3D; response.rows;        this.total &#x3D; response.total;        this.loading &#x3D; false;      &#125;);    &#125;,    &#x2F;&#x2F; 取消按钮    cancel() &#123;      this.open &#x3D; false;      this.reset();    &#125;,    &#x2F;&#x2F; 表单重置    reset() &#123;      this.form &#x3D; &#123;#foreach ($column in $columns)#if($column.htmlType &#x3D;&#x3D; &quot;checkbox&quot;)        $column.javaField: []#if($foreach.count !&#x3D; $columns.size()),#end#else        $column.javaField: undefined#if($foreach.count !&#x3D; $columns.size()),#end#end#end      &#125;;#if($table.sub)      this.$&#123;subclassName&#125;List &#x3D; [];#end      this.resetForm(&quot;form&quot;);    &#125;,    &#x2F;** 搜索按钮操作 *&#x2F;    handleQuery() &#123;      this.queryParams.pageNum &#x3D; 1;      this.getList();    &#125;,    &#x2F;** 重置按钮操作 *&#x2F;    resetQuery() &#123;#foreach ($column in $columns)#if($column.htmlType &#x3D;&#x3D; &quot;datetime&quot; &amp;&amp; $column.queryType &#x3D;&#x3D; &quot;BETWEEN&quot;)#set($AttrName&#x3D;$column.javaField.substring(0,1).toUpperCase() + $&#123;column.javaField.substring(1)&#125;)      this.daterange$&#123;AttrName&#125; &#x3D; [];#end#end      this.resetForm(&quot;queryForm&quot;);      this.handleQuery();    &#125;,    &#x2F;&#x2F; 多选框选中数据    handleSelectionChange(selection) &#123;      this.ids &#x3D; selection.map(item &#x3D;&gt; item.$&#123;pkColumn.javaField&#125;)      this.single &#x3D; selection.length!&#x3D;&#x3D;1      this.multiple &#x3D; !selection.length    &#125;,    &#x2F;** 新增按钮操作 *&#x2F;    handleAdd() &#123;      this.reset();      this.open &#x3D; true;      this.title &#x3D; &quot;添加$&#123;functionName&#125;&quot;;    &#125;,    &#x2F;** 修改按钮操作 *&#x2F;    handleUpdate(row) &#123;      this.loading &#x3D; true;      this.reset();      const $&#123;pkColumn.javaField&#125; &#x3D; row.$&#123;pkColumn.javaField&#125; || this.ids      get$&#123;BusinessName&#125;($&#123;pkColumn.javaField&#125;).then(response &#x3D;&gt; &#123;        this.loading &#x3D; false;        this.form &#x3D; response.data;#foreach ($column in $columns)#if($column.htmlType &#x3D;&#x3D; &quot;checkbox&quot;)        this.form.$column.javaField &#x3D; this.form.$&#123;column.javaField&#125;.split(&quot;,&quot;);#end#end#if($table.sub)        this.$&#123;subclassName&#125;List &#x3D; response.data.$&#123;subclassName&#125;List;#end        this.open &#x3D; true;        this.title &#x3D; &quot;修改$&#123;functionName&#125;&quot;;      &#125;);    &#125;,    &#x2F;** 提交按钮 *&#x2F;    submitForm() &#123;      this.#[[$]]#refs[&quot;form&quot;].validate(valid &#x3D;&gt; &#123;        if (valid) &#123;          this.buttonLoading &#x3D; true;#foreach ($column in $columns)#if($column.htmlType &#x3D;&#x3D; &quot;checkbox&quot;)          this.form.$column.javaField &#x3D; this.form.$&#123;column.javaField&#125;.join(&quot;,&quot;);#end#end#if($table.sub)          this.form.$&#123;subclassName&#125;List &#x3D; this.$&#123;subclassName&#125;List;#end          if (this.form.$&#123;pkColumn.javaField&#125; !&#x3D; null) &#123;            update$&#123;BusinessName&#125;(this.form).then(response &#x3D;&gt; &#123;              this.#[[$modal]]#.msgSuccess(&quot;修改成功&quot;);              this.open &#x3D; false;              this.getList();            &#125;).finally(() &#x3D;&gt; &#123;              this.buttonLoading &#x3D; false;            &#125;);          &#125; else &#123;            add$&#123;BusinessName&#125;(this.form).then(response &#x3D;&gt; &#123;              this.#[[$modal]]#.msgSuccess(&quot;新增成功&quot;);              this.open &#x3D; false;              this.getList();            &#125;).finally(() &#x3D;&gt; &#123;              this.buttonLoading &#x3D; false;            &#125;);          &#125;        &#125;      &#125;);    &#125;,    &#x2F;** 删除按钮操作 *&#x2F;    handleDelete(row) &#123;      const $&#123;pkColumn.javaField&#125;s &#x3D; row.$&#123;pkColumn.javaField&#125; || this.ids;      this.#[[$modal]]#.confirm(&#39;是否确认删除$&#123;functionName&#125;编号为&quot;&#39; + $&#123;pkColumn.javaField&#125;s + &#39;&quot;的数据项？&#39;).then(() &#x3D;&gt; &#123;        this.loading &#x3D; true;        return del$&#123;BusinessName&#125;($&#123;pkColumn.javaField&#125;s);      &#125;).then(() &#x3D;&gt; &#123;        this.loading &#x3D; false;        this.getList();        this.#[[$modal]]#.msgSuccess(&quot;删除成功&quot;);      &#125;).catch(() &#x3D;&gt; &#123;      &#125;).finally(() &#x3D;&gt; &#123;        this.loading &#x3D; false;      &#125;);    &#125;,#if($table.sub)    &#x2F;** $&#123;subTable.functionName&#125;序号 *&#x2F;    row$&#123;subClassName&#125;Index(&#123; row, rowIndex &#125;) &#123;      row.index &#x3D; rowIndex + 1;    &#125;,    &#x2F;** $&#123;subTable.functionName&#125;添加按钮操作 *&#x2F;    handleAdd$&#123;subClassName&#125;() &#123;      let obj &#x3D; &#123;&#125;;#foreach($column in $subTable.columns)#if($column.pk || $column.javaField &#x3D;&#x3D; $&#123;subTableFkclassName&#125;)#elseif($column.list &amp;&amp; &quot;&quot; !&#x3D; $javaField)      obj.$column.javaField &#x3D; &quot;&quot;;#end#end      this.$&#123;subclassName&#125;List.push(obj);    &#125;,    &#x2F;** $&#123;subTable.functionName&#125;删除按钮操作 *&#x2F;    handleDelete$&#123;subClassName&#125;() &#123;      if (this.checked$&#123;subClassName&#125;.length &#x3D;&#x3D; 0) &#123;        this.#[[$modal]]#.msgError(&quot;请先选择要删除的$&#123;subTable.functionName&#125;数据&quot;);      &#125; else &#123;        const $&#123;subclassName&#125;List &#x3D; this.$&#123;subclassName&#125;List;        const checked$&#123;subClassName&#125; &#x3D; this.checked$&#123;subClassName&#125;;        this.$&#123;subclassName&#125;List &#x3D; $&#123;subclassName&#125;List.filter(function(item) &#123;          return checked$&#123;subClassName&#125;.indexOf(item.index) &#x3D;&#x3D; -1        &#125;);      &#125;    &#125;,    &#x2F;** 复选框选中数据 *&#x2F;    handle$&#123;subClassName&#125;SelectionChange(selection) &#123;      this.checked$&#123;subClassName&#125; &#x3D; selection.map(item &#x3D;&gt; item.index)    &#125;,#end    &#x2F;** 导出按钮操作 *&#x2F;    handleExport() &#123;      this.download(&#39;$&#123;moduleName&#125;&#x2F;$&#123;businessName&#125;&#x2F;export&#39;, &#123;        ...this.queryParams      &#125;, &#96;$&#123;businessName&#125;_#[[$&#123;new Date().getTime()&#125;]]#.xlsx&#96;)    &#125;  &#125;&#125;;&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><h5 id="index-tree-vue2-vm"><a href="#index-tree-vue2-vm" class="headerlink" title="index-tree.vue2.vm"></a>index-tree.vue2.vm</h5><figure><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">&lt;template&gt;  &lt;div class&#x3D;&quot;app-container&quot;&gt;    &lt;el-form :model&#x3D;&quot;queryParams&quot; ref&#x3D;&quot;queryForm&quot; size&#x3D;&quot;small&quot; :inline&#x3D;&quot;true&quot; v-show&#x3D;&quot;showSearch&quot; label-width&#x3D;&quot;68px&quot;&gt;#foreach($column in $columns)#if($column.query)#set($dictType&#x3D;$column.dictType)#set($AttrName&#x3D;$column.javaField.substring(0,1).toUpperCase() + $&#123;column.javaField.substring(1)&#125;)#set($parentheseIndex&#x3D;$column.columnComment.indexOf(&quot;（&quot;))#if($parentheseIndex !&#x3D; -1)#set($comment&#x3D;$column.columnComment.substring(0, $parentheseIndex))#else#set($comment&#x3D;$column.columnComment)#end#if($column.htmlType &#x3D;&#x3D; &quot;input&quot; || $column.htmlType &#x3D;&#x3D; &quot;textarea&quot;)      &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;column.javaField&#125;&quot;&gt;        &lt;el-input          v-model&#x3D;&quot;queryParams.$&#123;column.javaField&#125;&quot;          placeholder&#x3D;&quot;请输入$&#123;comment&#125;&quot;          clearable          @keyup.enter.native&#x3D;&quot;handleQuery&quot;        &#x2F;&gt;      &lt;&#x2F;el-form-item&gt;#elseif(($column.htmlType &#x3D;&#x3D; &quot;select&quot; || $column.htmlType &#x3D;&#x3D; &quot;radio&quot;) &amp;&amp; &quot;&quot; !&#x3D; $dictType)      &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;column.javaField&#125;&quot;&gt;        &lt;el-select v-model&#x3D;&quot;queryParams.$&#123;column.javaField&#125;&quot; placeholder&#x3D;&quot;请选择$&#123;comment&#125;&quot; clearable&gt;          &lt;el-option            v-for&#x3D;&quot;dict in dict.type.$&#123;dictType&#125;&quot;            :key&#x3D;&quot;dict.value&quot;            :label&#x3D;&quot;dict.label&quot;            :value&#x3D;&quot;dict.value&quot;          &#x2F;&gt;        &lt;&#x2F;el-select&gt;      &lt;&#x2F;el-form-item&gt;#elseif(($column.htmlType &#x3D;&#x3D; &quot;select&quot; || $column.htmlType &#x3D;&#x3D; &quot;radio&quot;) &amp;&amp; $dictType)      &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;column.javaField&#125;&quot;&gt;        &lt;el-select v-model&#x3D;&quot;queryParams.$&#123;column.javaField&#125;&quot; placeholder&#x3D;&quot;请选择$&#123;comment&#125;&quot; clearable&gt;          &lt;el-option label&#x3D;&quot;请选择字典生成&quot; value&#x3D;&quot;&quot; &#x2F;&gt;        &lt;&#x2F;el-select&gt;      &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;datetime&quot; &amp;&amp; $column.queryType !&#x3D; &quot;BETWEEN&quot;)      &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;column.javaField&#125;&quot;&gt;        &lt;el-date-picker clearable          v-model&#x3D;&quot;queryParams.$&#123;column.javaField&#125;&quot;          type&#x3D;&quot;date&quot;          value-format&#x3D;&quot;yyyy-MM-dd&quot;          placeholder&#x3D;&quot;选择$&#123;comment&#125;&quot;&gt;        &lt;&#x2F;el-date-picker&gt;      &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;datetime&quot; &amp;&amp; $column.queryType &#x3D;&#x3D; &quot;BETWEEN&quot;)      &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot;&gt;        &lt;el-date-picker          v-model&#x3D;&quot;daterange$&#123;AttrName&#125;&quot;          style&#x3D;&quot;width: 240px&quot;          value-format&#x3D;&quot;yyyy-MM-dd HH:mm:ss&quot;          type&#x3D;&quot;daterange&quot;          range-separator&#x3D;&quot;-&quot;          start-placeholder&#x3D;&quot;开始日期&quot;          end-placeholder&#x3D;&quot;结束日期&quot;          :default-time&#x3D;&quot;[&#39;00:00:00&#39;, &#39;23:59:59&#39;]&quot;        &gt;&lt;&#x2F;el-date-picker&gt;      &lt;&#x2F;el-form-item&gt;#end#end#end      &lt;el-form-item&gt;    &lt;el-button type&#x3D;&quot;primary&quot; icon&#x3D;&quot;el-icon-search&quot; size&#x3D;&quot;mini&quot; @click&#x3D;&quot;handleQuery&quot;&gt;搜索&lt;&#x2F;el-button&gt;        &lt;el-button icon&#x3D;&quot;el-icon-refresh&quot; size&#x3D;&quot;mini&quot; @click&#x3D;&quot;resetQuery&quot;&gt;重置&lt;&#x2F;el-button&gt;      &lt;&#x2F;el-form-item&gt;    &lt;&#x2F;el-form&gt;    &lt;el-row :gutter&#x3D;&quot;10&quot; class&#x3D;&quot;mb8&quot;&gt;      &lt;el-col :span&#x3D;&quot;1.5&quot;&gt;        &lt;el-button          type&#x3D;&quot;primary&quot;          plain          icon&#x3D;&quot;el-icon-plus&quot;          size&#x3D;&quot;mini&quot;          @click&#x3D;&quot;handleAdd&quot;          v-hasPermi&#x3D;&quot;[&#39;$&#123;moduleName&#125;:$&#123;businessName&#125;:add&#39;]&quot;        &gt;新增&lt;&#x2F;el-button&gt;      &lt;&#x2F;el-col&gt;      &lt;el-col :span&#x3D;&quot;1.5&quot;&gt;        &lt;el-button          type&#x3D;&quot;info&quot;          plain          icon&#x3D;&quot;el-icon-sort&quot;          size&#x3D;&quot;mini&quot;          @click&#x3D;&quot;toggleExpandAll&quot;        &gt;展开&#x2F;折叠&lt;&#x2F;el-button&gt;      &lt;&#x2F;el-col&gt;      &lt;right-toolbar :showSearch.sync&#x3D;&quot;showSearch&quot; @queryTable&#x3D;&quot;getList&quot;&gt;&lt;&#x2F;right-toolbar&gt;    &lt;&#x2F;el-row&gt;    &lt;el-table      v-if&#x3D;&quot;refreshTable&quot;      v-loading&#x3D;&quot;loading&quot;      :data&#x3D;&quot;$&#123;businessName&#125;List&quot;      row-key&#x3D;&quot;$&#123;treeCode&#125;&quot;      :default-expand-all&#x3D;&quot;isExpandAll&quot;      :tree-props&#x3D;&quot;&#123;children: &#39;children&#39;, hasChildren: &#39;hasChildren&#39;&#125;&quot;    &gt;#foreach($column in $columns)#set($javaField&#x3D;$column.javaField)#set($parentheseIndex&#x3D;$column.columnComment.indexOf(&quot;（&quot;))#if($parentheseIndex !&#x3D; -1)#set($comment&#x3D;$column.columnComment.substring(0, $parentheseIndex))#else#set($comment&#x3D;$column.columnComment)#end#if($column.pk)#elseif($column.list &amp;&amp; $column.htmlType &#x3D;&#x3D; &quot;datetime&quot;)      &lt;el-table-column label&#x3D;&quot;$&#123;comment&#125;&quot; align&#x3D;&quot;center&quot; prop&#x3D;&quot;$&#123;javaField&#125;&quot; width&#x3D;&quot;180&quot;&gt;        &lt;template slot-scope&#x3D;&quot;scope&quot;&gt;          &lt;span&gt;&#123;&#123; parseTime(scope.row.$&#123;javaField&#125;, &#39;&#123;y&#125;-&#123;m&#125;-&#123;d&#125;&#39;) &#125;&#125;&lt;&#x2F;span&gt;        &lt;&#x2F;template&gt;      &lt;&#x2F;el-table-column&gt;#elseif($column.list &amp;&amp; $column.htmlType &#x3D;&#x3D; &quot;imageUpload&quot;)      &lt;el-table-column label&#x3D;&quot;$&#123;comment&#125;&quot; align&#x3D;&quot;center&quot; prop&#x3D;&quot;$&#123;javaField&#125;&quot; width&#x3D;&quot;100&quot;&gt;          &lt;template #default&#x3D;&quot;scope&quot;&gt;              &lt;image-preview :src&#x3D;&quot;scope.row.$&#123;javaField&#125;&quot; :width&#x3D;&quot;50&quot; :height&#x3D;&quot;50&quot;&#x2F;&gt;          &lt;&#x2F;template&gt;      &lt;&#x2F;el-table-column&gt;#elseif($column.list &amp;&amp; $column.dictType &amp;&amp; &quot;&quot; !&#x3D; $column.dictType)      &lt;el-table-column label&#x3D;&quot;$&#123;comment&#125;&quot; align&#x3D;&quot;center&quot; prop&#x3D;&quot;$&#123;javaField&#125;&quot;&gt;        &lt;template slot-scope&#x3D;&quot;scope&quot;&gt;#if($column.htmlType &#x3D;&#x3D; &quot;checkbox&quot;)          &lt;dict-tag :options&#x3D;&quot;dict.type.$&#123;column.dictType&#125;&quot; :value&#x3D;&quot;scope.row.$&#123;javaField&#125; ? scope.row.$&#123;javaField&#125;.split(&#39;,&#39;) : []&quot;&#x2F;&gt;#else          &lt;dict-tag :options&#x3D;&quot;dict.type.$&#123;column.dictType&#125;&quot; :value&#x3D;&quot;scope.row.$&#123;javaField&#125;&quot;&#x2F;&gt;#end        &lt;&#x2F;template&gt;      &lt;&#x2F;el-table-column&gt;#elseif($column.list &amp;&amp; &quot;&quot; !&#x3D; $javaField)#if($&#123;foreach.index&#125; &#x3D;&#x3D; 1)      &lt;el-table-column label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;javaField&#125;&quot; &#x2F;&gt;#else      &lt;el-table-column label&#x3D;&quot;$&#123;comment&#125;&quot; align&#x3D;&quot;center&quot; prop&#x3D;&quot;$&#123;javaField&#125;&quot; &#x2F;&gt;#end#end#end      &lt;el-table-column label&#x3D;&quot;操作&quot; align&#x3D;&quot;center&quot; class-name&#x3D;&quot;small-padding fixed-width&quot;&gt;        &lt;template slot-scope&#x3D;&quot;scope&quot;&gt;          &lt;el-button            size&#x3D;&quot;mini&quot;            type&#x3D;&quot;text&quot;            icon&#x3D;&quot;el-icon-edit&quot;            @click&#x3D;&quot;handleUpdate(scope.row)&quot;            v-hasPermi&#x3D;&quot;[&#39;$&#123;moduleName&#125;:$&#123;businessName&#125;:edit&#39;]&quot;          &gt;修改&lt;&#x2F;el-button&gt;          &lt;el-button            size&#x3D;&quot;mini&quot;            type&#x3D;&quot;text&quot;            icon&#x3D;&quot;el-icon-plus&quot;            @click&#x3D;&quot;handleAdd(scope.row)&quot;            v-hasPermi&#x3D;&quot;[&#39;$&#123;moduleName&#125;:$&#123;businessName&#125;:add&#39;]&quot;          &gt;新增&lt;&#x2F;el-button&gt;          &lt;el-button            size&#x3D;&quot;mini&quot;            type&#x3D;&quot;text&quot;            icon&#x3D;&quot;el-icon-delete&quot;            @click&#x3D;&quot;handleDelete(scope.row)&quot;            v-hasPermi&#x3D;&quot;[&#39;$&#123;moduleName&#125;:$&#123;businessName&#125;:remove&#39;]&quot;          &gt;删除&lt;&#x2F;el-button&gt;        &lt;&#x2F;template&gt;      &lt;&#x2F;el-table-column&gt;    &lt;&#x2F;el-table&gt;    &lt;!-- 添加或修改$&#123;functionName&#125;对话框 --&gt;    &lt;el-dialog :title&#x3D;&quot;title&quot; :visible.sync&#x3D;&quot;open&quot; width&#x3D;&quot;500px&quot; append-to-body&gt;      &lt;el-form ref&#x3D;&quot;form&quot; :model&#x3D;&quot;form&quot; :rules&#x3D;&quot;rules&quot; label-width&#x3D;&quot;80px&quot;&gt;#foreach($column in $columns)#set($field&#x3D;$column.javaField)#if($column.insert &amp;&amp; !$column.pk)#set($parentheseIndex&#x3D;$column.columnComment.indexOf(&quot;（&quot;))#if($parentheseIndex !&#x3D; -1)#set($comment&#x3D;$column.columnComment.substring(0, $parentheseIndex))#else#set($comment&#x3D;$column.columnComment)#end#set($dictType&#x3D;$column.dictType)#if(&quot;&quot; !&#x3D; $treeParentCode &amp;&amp; $column.javaField &#x3D;&#x3D; $treeParentCode)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;treeParentCode&#125;&quot;&gt;          &lt;treeselect v-model&#x3D;&quot;form.$&#123;treeParentCode&#125;&quot; :options&#x3D;&quot;$&#123;businessName&#125;Options&quot; :normalizer&#x3D;&quot;normalizer&quot; placeholder&#x3D;&quot;请选择$&#123;comment&#125;&quot; &#x2F;&gt;        &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;input&quot;)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;field&#125;&quot;&gt;          &lt;el-input v-model&#x3D;&quot;form.$&#123;field&#125;&quot; placeholder&#x3D;&quot;请输入$&#123;comment&#125;&quot; &#x2F;&gt;        &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;imageUpload&quot;)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;field&#125;&quot;&gt;          &lt;image-upload v-model&#x3D;&quot;form.$&#123;field&#125;&quot;&#x2F;&gt;        &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;fileUpload&quot;)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;field&#125;&quot;&gt;          &lt;file-upload v-model&#x3D;&quot;form.$&#123;field&#125;&quot;&#x2F;&gt;        &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;editor&quot;)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot;&gt;          &lt;editor v-model&#x3D;&quot;form.$&#123;field&#125;&quot; :min-height&#x3D;&quot;192&quot;&#x2F;&gt;        &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;select&quot; &amp;&amp; &quot;&quot; !&#x3D; $dictType)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;field&#125;&quot;&gt;          &lt;el-select v-model&#x3D;&quot;form.$&#123;field&#125;&quot; placeholder&#x3D;&quot;请选择$&#123;comment&#125;&quot;&gt;            &lt;el-option              v-for&#x3D;&quot;dict in dict.type.$&#123;dictType&#125;&quot;              :key&#x3D;&quot;dict.value&quot;              :label&#x3D;&quot;dict.label&quot;#if($column.javaType &#x3D;&#x3D; &quot;Integer&quot; || $column.javaType &#x3D;&#x3D; &quot;Long&quot;)              :value&#x3D;&quot;parseInt(dict.value)&quot;#else              :value&#x3D;&quot;dict.value&quot;#end            &gt;&lt;&#x2F;el-option&gt;          &lt;&#x2F;el-select&gt;        &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;select&quot; &amp;&amp; $dictType)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;field&#125;&quot;&gt;          &lt;el-select v-model&#x3D;&quot;form.$&#123;field&#125;&quot; placeholder&#x3D;&quot;请选择$&#123;comment&#125;&quot;&gt;            &lt;el-option label&#x3D;&quot;请选择字典生成&quot; value&#x3D;&quot;&quot; &#x2F;&gt;          &lt;&#x2F;el-select&gt;        &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;checkbox&quot; &amp;&amp; &quot;&quot; !&#x3D; $dictType)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;field&#125;&quot;&gt;          &lt;el-checkbox-group v-model&#x3D;&quot;form.$&#123;field&#125;&quot;&gt;            &lt;el-checkbox              v-for&#x3D;&quot;dict in dict.type.$&#123;dictType&#125;&quot;              :key&#x3D;&quot;dict.value&quot;              :label&#x3D;&quot;dict.value&quot;&gt;              &#123;&#123;dict.label&#125;&#125;            &lt;&#x2F;el-checkbox&gt;          &lt;&#x2F;el-checkbox-group&gt;        &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;checkbox&quot; &amp;&amp; $dictType)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;field&#125;&quot;&gt;          &lt;el-checkbox-group v-model&#x3D;&quot;form.$&#123;field&#125;&quot;&gt;            &lt;el-checkbox&gt;请选择字典生成&lt;&#x2F;el-checkbox&gt;          &lt;&#x2F;el-checkbox-group&gt;        &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;radio&quot; &amp;&amp; &quot;&quot; !&#x3D; $dictType)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;field&#125;&quot;&gt;          &lt;el-radio-group v-model&#x3D;&quot;form.$&#123;field&#125;&quot;&gt;            &lt;el-radio              v-for&#x3D;&quot;dict in dict.type.$&#123;dictType&#125;&quot;              :key&#x3D;&quot;dict.value&quot;#if($column.javaType &#x3D;&#x3D; &quot;Integer&quot; || $column.javaType &#x3D;&#x3D; &quot;Long&quot;)              :label&#x3D;&quot;parseInt(dict.value)&quot;#else              :label&#x3D;&quot;dict.value&quot;#end            &gt;&#123;&#123;dict.label&#125;&#125;&lt;&#x2F;el-radio&gt;          &lt;&#x2F;el-radio-group&gt;        &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;radio&quot; &amp;&amp; $dictType)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;field&#125;&quot;&gt;          &lt;el-radio-group v-model&#x3D;&quot;form.$&#123;field&#125;&quot;&gt;            &lt;el-radio label&#x3D;&quot;1&quot;&gt;请选择字典生成&lt;&#x2F;el-radio&gt;          &lt;&#x2F;el-radio-group&gt;        &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;datetime&quot;)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;field&#125;&quot;&gt;          &lt;el-date-picker clearable            v-model&#x3D;&quot;form.$&#123;field&#125;&quot;            type&#x3D;&quot;datetime&quot;            value-format&#x3D;&quot;yyyy-MM-dd HH:mm:ss&quot;            placeholder&#x3D;&quot;选择$&#123;comment&#125;&quot;&gt;          &lt;&#x2F;el-date-picker&gt;        &lt;&#x2F;el-form-item&gt;#elseif($column.htmlType &#x3D;&#x3D; &quot;textarea&quot;)        &lt;el-form-item label&#x3D;&quot;$&#123;comment&#125;&quot; prop&#x3D;&quot;$&#123;field&#125;&quot;&gt;          &lt;el-input v-model&#x3D;&quot;form.$&#123;field&#125;&quot; type&#x3D;&quot;textarea&quot; placeholder&#x3D;&quot;请输入内容&quot; &#x2F;&gt;        &lt;&#x2F;el-form-item&gt;#end#end#end      &lt;&#x2F;el-form&gt;      &lt;div slot&#x3D;&quot;footer&quot; class&#x3D;&quot;dialog-footer&quot;&gt;        &lt;el-button :loading&#x3D;&quot;buttonLoading&quot; type&#x3D;&quot;primary&quot; @click&#x3D;&quot;submitForm&quot;&gt;确 定&lt;&#x2F;el-button&gt;        &lt;el-button @click&#x3D;&quot;cancel&quot;&gt;取 消&lt;&#x2F;el-button&gt;      &lt;&#x2F;div&gt;    &lt;&#x2F;el-dialog&gt;  &lt;&#x2F;div&gt;&lt;&#x2F;template&gt;&lt;script&gt;import &#123; list$&#123;BusinessName&#125;, get$&#123;BusinessName&#125;, del$&#123;BusinessName&#125;, add$&#123;BusinessName&#125;, update$&#123;BusinessName&#125; &#125; from &quot;@&#x2F;api&#x2F;$&#123;moduleName&#125;&#x2F;$&#123;businessName&#125;&quot;;import Treeselect from &quot;@riophae&#x2F;vue-treeselect&quot;;import &quot;@riophae&#x2F;vue-treeselect&#x2F;dist&#x2F;vue-treeselect.css&quot;;export default &#123;  name: &quot;$&#123;BusinessName&#125;&quot;,#if($&#123;dicts&#125; !&#x3D; &#39;&#39;)  dicts: [$&#123;dicts&#125;],#end  components: &#123;    Treeselect  &#125;,  data() &#123;    return &#123;      &#x2F;&#x2F; 按钮loading      buttonLoading: false,      &#x2F;&#x2F; 遮罩层      loading: true,      &#x2F;&#x2F; 显示搜索条件      showSearch: true,      &#x2F;&#x2F; $&#123;functionName&#125;表格数据      $&#123;businessName&#125;List: [],      &#x2F;&#x2F; $&#123;functionName&#125;树选项      $&#123;businessName&#125;Options: [],      &#x2F;&#x2F; 弹出层标题      title: &quot;&quot;,      &#x2F;&#x2F; 是否显示弹出层      open: false,      &#x2F;&#x2F; 是否展开，默认全部展开      isExpandAll: true,      &#x2F;&#x2F; 重新渲染表格状态      refreshTable: true,#foreach ($column in $columns)#if($column.htmlType &#x3D;&#x3D; &quot;datetime&quot; &amp;&amp; $column.queryType &#x3D;&#x3D; &quot;BETWEEN&quot;)#set($AttrName&#x3D;$column.javaField.substring(0,1).toUpperCase() + $&#123;column.javaField.substring(1)&#125;)      &#x2F;&#x2F; $comment时间范围      daterange$&#123;AttrName&#125;: [],#end#end      &#x2F;&#x2F; 查询参数      queryParams: &#123;#foreach ($column in $columns)#if($column.query)        $column.javaField: undefined#if($foreach.count !&#x3D; $columns.size()),#end#end#end      &#125;,      &#x2F;&#x2F; 表单参数      form: &#123;&#125;,      &#x2F;&#x2F; 表单校验      rules: &#123;#foreach ($column in $columns)#if($column.required)#set($parentheseIndex&#x3D;$column.columnComment.indexOf(&quot;（&quot;))#if($parentheseIndex !&#x3D; -1)#set($comment&#x3D;$column.columnComment.substring(0, $parentheseIndex))#else#set($comment&#x3D;$column.columnComment)#end        $column.javaField: [          &#123; required: true, message: &quot;$comment不能为空&quot;, trigger: #if($column.htmlType &#x3D;&#x3D; &quot;select&quot; || $column.htmlType &#x3D;&#x3D; &quot;radio&quot;)&quot;change&quot;#else&quot;blur&quot;#end &#125;        ]#if($foreach.count !&#x3D; $columns.size()),#end#end#end      &#125;    &#125;;  &#125;,  created() &#123;    this.getList();  &#125;,  methods: &#123;    &#x2F;** 查询$&#123;functionName&#125;列表 *&#x2F;    getList() &#123;      this.loading &#x3D; true;#foreach ($column in $columns)#if($column.htmlType &#x3D;&#x3D; &quot;datetime&quot; &amp;&amp; $column.queryType &#x3D;&#x3D; &quot;BETWEEN&quot;)      this.queryParams.params &#x3D; &#123;&#125;;#break#end#end#foreach ($column in $columns)#if($column.htmlType &#x3D;&#x3D; &quot;datetime&quot; &amp;&amp; $column.queryType &#x3D;&#x3D; &quot;BETWEEN&quot;)#set($AttrName&#x3D;$column.javaField.substring(0,1).toUpperCase() + $&#123;column.javaField.substring(1)&#125;)      if (null !&#x3D; this.daterange$&#123;AttrName&#125; &amp;&amp; &#39;&#39; !&#x3D; this.daterange$&#123;AttrName&#125;) &#123;        this.queryParams.params[&quot;begin$&#123;AttrName&#125;&quot;] &#x3D; this.daterange$&#123;AttrName&#125;[0];        this.queryParams.params[&quot;end$&#123;AttrName&#125;&quot;] &#x3D; this.daterange$&#123;AttrName&#125;[1];      &#125;#end#end      list$&#123;BusinessName&#125;(this.queryParams).then(response &#x3D;&gt; &#123;        this.$&#123;businessName&#125;List &#x3D; this.handleTree(response.data, &quot;$&#123;treeCode&#125;&quot;, &quot;$&#123;treeParentCode&#125;&quot;);        this.loading &#x3D; false;      &#125;);    &#125;,    &#x2F;** 转换$&#123;functionName&#125;数据结构 *&#x2F;    normalizer(node) &#123;      if (node.children &amp;&amp; !node.children.length) &#123;        delete node.children;      &#125;      return &#123;        id: node.$&#123;treeCode&#125;,        label: node.$&#123;treeName&#125;,        children: node.children      &#125;;    &#125;,&#x2F;** 查询$&#123;functionName&#125;下拉树结构 *&#x2F;    getTreeselect() &#123;      list$&#123;BusinessName&#125;().then(response &#x3D;&gt; &#123;        this.$&#123;businessName&#125;Options &#x3D; [];        const data &#x3D; &#123; $&#123;treeCode&#125;: 0, $&#123;treeName&#125;: &#39;顶级节点&#39;, children: [] &#125;;        data.children &#x3D; this.handleTree(response.data, &quot;$&#123;treeCode&#125;&quot;, &quot;$&#123;treeParentCode&#125;&quot;);        this.$&#123;businessName&#125;Options.push(data);      &#125;);    &#125;,    &#x2F;&#x2F; 取消按钮    cancel() &#123;      this.open &#x3D; false;      this.reset();    &#125;,    &#x2F;&#x2F; 表单重置    reset() &#123;      this.form &#x3D; &#123;#foreach ($column in $columns)#if($column.htmlType &#x3D;&#x3D; &quot;checkbox&quot;)        $column.javaField: []#if($foreach.count !&#x3D; $columns.size()),#end#else        $column.javaField: null#if($foreach.count !&#x3D; $columns.size()),#end#end#end      &#125;;      this.resetForm(&quot;form&quot;);    &#125;,    &#x2F;** 搜索按钮操作 *&#x2F;    handleQuery() &#123;      this.getList();    &#125;,    &#x2F;** 重置按钮操作 *&#x2F;    resetQuery() &#123;#foreach ($column in $columns)#if($column.htmlType &#x3D;&#x3D; &quot;datetime&quot; &amp;&amp; $column.queryType &#x3D;&#x3D; &quot;BETWEEN&quot;)#set($AttrName&#x3D;$column.javaField.substring(0,1).toUpperCase() + $&#123;column.javaField.substring(1)&#125;)      this.daterange$&#123;AttrName&#125; &#x3D; [];#end#end      this.resetForm(&quot;queryForm&quot;);      this.handleQuery();    &#125;,    &#x2F;** 新增按钮操作 *&#x2F;    handleAdd(row) &#123;      this.reset();      this.getTreeselect();      if (row !&#x3D; null &amp;&amp; row.$&#123;treeCode&#125;) &#123;        this.form.$&#123;treeParentCode&#125; &#x3D; row.$&#123;treeCode&#125;;      &#125; else &#123;        this.form.$&#123;treeParentCode&#125; &#x3D; 0;      &#125;      this.open &#x3D; true;      this.title &#x3D; &quot;添加$&#123;functionName&#125;&quot;;    &#125;,    &#x2F;** 展开&#x2F;折叠操作 *&#x2F;    toggleExpandAll() &#123;      this.refreshTable &#x3D; false;      this.isExpandAll &#x3D; !this.isExpandAll;      this.$nextTick(() &#x3D;&gt; &#123;        this.refreshTable &#x3D; true;      &#125;);    &#125;,    &#x2F;** 修改按钮操作 *&#x2F;    handleUpdate(row) &#123;  this.loading &#x3D; true;      this.reset();      this.getTreeselect();      if (row !&#x3D; null) &#123;        this.form.$&#123;treeParentCode&#125; &#x3D; row.$&#123;treeParentCode&#125;;      &#125;      get$&#123;BusinessName&#125;(row.$&#123;pkColumn.javaField&#125;).then(response &#x3D;&gt; &#123;    this.loading &#x3D; false;        this.form &#x3D; response.data;#foreach ($column in $columns)#if($column.htmlType &#x3D;&#x3D; &quot;checkbox&quot;)        this.form.$column.javaField &#x3D; this.form.$&#123;column.javaField&#125;.split(&quot;,&quot;);#end#end        this.open &#x3D; true;        this.title &#x3D; &quot;修改$&#123;functionName&#125;&quot;;      &#125;);    &#125;,    &#x2F;** 提交按钮 *&#x2F;    submitForm() &#123;      this.#[[$]]#refs[&quot;form&quot;].validate(valid &#x3D;&gt; &#123;        if (valid) &#123;  this.buttonLoading &#x3D; true;#foreach ($column in $columns)#if($column.htmlType &#x3D;&#x3D; &quot;checkbox&quot;)          this.form.$column.javaField &#x3D; this.form.$&#123;column.javaField&#125;.join(&quot;,&quot;);#end#end          if (this.form.$&#123;pkColumn.javaField&#125; !&#x3D; null) &#123;            update$&#123;BusinessName&#125;(this.form).then(response &#x3D;&gt; &#123;              this.#[[$modal]]#.msgSuccess(&quot;修改成功&quot;);              this.open &#x3D; false;              this.getList();            &#125;).finally(() &#x3D;&gt; &#123;              this.buttonLoading &#x3D; false;            &#125;);          &#125; else &#123;            add$&#123;BusinessName&#125;(this.form).then(response &#x3D;&gt; &#123;              this.#[[$modal]]#.msgSuccess(&quot;新增成功&quot;);              this.open &#x3D; false;              this.getList();            &#125;).finally(() &#x3D;&gt; &#123;              this.buttonLoading &#x3D; false;            &#125;);          &#125;        &#125;      &#125;);    &#125;,    &#x2F;** 删除按钮操作 *&#x2F;    handleDelete(row) &#123;      this.#[[$modal]]#.confirm(&#39;是否确认删除$&#123;functionName&#125;编号为&quot;&#39; + row.$&#123;pkColumn.javaField&#125; + &#39;&quot;的数据项？&#39;).then(() &#x3D;&gt; &#123;        this.loading &#x3D; true;        return del$&#123;BusinessName&#125;(row.$&#123;pkColumn.javaField&#125;);      &#125;).then(() &#x3D;&gt; &#123;        this.loading &#x3D; false;        this.getList();        this.#[[$modal]]#.msgSuccess(&quot;删除成功&quot;);      &#125;).catch(() &#x3D;&gt; &#123;      &#125;).finally(() &#x3D;&gt; &#123;        this.loading &#x3D; false;      &#125;);    &#125;  &#125;&#125;;&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>]]></content>
    
    
    <categories>
      
      <category>ruoyi-vue-plus</category>
      
      <category>代码生成</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ruoyi-vue-plus</tag>
      
      <tag>Velocity</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>MySq系统数据库：information_schema</title>
    <link href="/2024/04/13/MySq%E7%B3%BB%E7%BB%9F%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%9Ainformation-schema/"/>
    <url>/2024/04/13/MySq%E7%B3%BB%E7%BB%9F%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%9Ainformation-schema/</url>
    
    <content type="html"><![CDATA[<h3 id="简单介绍"><a href="#简单介绍" class="headerlink" title="简单介绍"></a>简单介绍</h3><p>information_schema：mysql自带的数据库，用于存储数据库元数据，例如数据库名、表名、列的数据类型、访问权限等。通过查询information_schema中的视图和表，用户可以获取数据库架构的详细信息，以便进行元数据管理、数据字典生成、权限管理等。</p><h4 id="数据库的部分表结构"><a href="#数据库的部分表结构" class="headerlink" title="数据库的部分表结构"></a>数据库的部分表结构</h4><h5 id="information-schema-tables"><a href="#information-schema-tables" class="headerlink" title="information_schema.tables"></a>information_schema.tables</h5><p>表示查询数据库information_schema的表tables。</p><p>tables：information_schema的一张表，用于存储数据库的表信息，包括表属于哪个数据库、表的名称、表的类型、创建时间、存储引擎。</p><h5 id="information-schema-columns"><a href="#information-schema-columns" class="headerlink" title="information_schema.columns"></a>information_schema.columns</h5><p>information_schema.columns: 数据库information_schema的表columns，存储了关于数据库中所有表的列的信息。</p><p>下面来看一段mysql代码：</p><figure><div class="code-wrapper"><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select column_name,                   (case when (is_nullable &#x3D; &#39;no&#39; &lt;![CDATA[ &amp;&amp; ]]&gt; column_key !&#x3D; &#39;PRI&#39;) then &#39;1&#39; else &#39;0&#39; end) as is_required,                   (case when column_key &#x3D; &#39;PRI&#39; then &#39;1&#39; else &#39;0&#39; end) as is_pk,                   ordinal_position as sort,                   column_comment,                   (case when extra &#x3D; &#39;auto_increment&#39; then &#39;1&#39; else &#39;0&#39; end) as is_increment,                   column_type            from information_schema.columns where table_schema &#x3D; (select database()) and table_name &#x3D; (#&#123;tableName&#125;)            order by ordinal_position<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><h6 id="解释字段："><a href="#解释字段：" class="headerlink" title="解释字段："></a>解释字段：</h6><p>is_nulable: 如果列有关键字NOT NULL修饰，则结果为no，表示不能为空，反之则为yes.</p><p>column_key: 判断列是否为主键，是则显示’PRI’.</p><p>ordinal_position: 排列顺序</p><p>column_comment: 列注释</p><p>extra: 额外信息</p><p>column_type: 列类型</p><p><img src="/img/MySq%E7%B3%BB%E7%BB%9F%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%9Ainformation_schema/1.png"></p><p>select database()：查询当前使用的是哪个数据库</p><p>case when: 这是在sql中启动了一个条件语句，如果条件成立，则执行then语句内容，否则实行else语句内容。</p><p><code>&lt;![CDATA[ &amp;&amp; ]]&gt;</code>: 目的是为了让XML解析器让将’&amp;&amp;’视为纯文本而不是XML标记。</p>]]></content>
    
    
    <categories>
      
      <category>MySql</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySql</tag>
      
      <tag>ruoyi-vue-plus</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Velocity模板引擎和模板语法基础</title>
    <link href="/2024/04/11/Velocity%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E%E5%92%8C%E6%A8%A1%E6%9D%BF%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/"/>
    <url>/2024/04/11/Velocity%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E%E5%92%8C%E6%A8%A1%E6%9D%BF%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/</url>
    
    <content type="html"><![CDATA[<h3 id="1-Velocity简介"><a href="#1-Velocity简介" class="headerlink" title="1.Velocity简介"></a>1.Velocity简介</h3><p>Velocity是一个基于Java的<a href="https://so.csdn.net/so/search?q=%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E&spm=1001.2101.3001.7020">模板引擎</a>，可以通过特定的语法获取在java对象的数据 , 填充到模板中，从而实现界面和java代码的分离 !</p><h3 id="2-Velocity使用"><a href="#2-Velocity使用" class="headerlink" title="2.Velocity使用"></a>2.Velocity使用</h3><h4 id="2-1添加依赖"><a href="#2-1添加依赖" class="headerlink" title="2.1添加依赖"></a>2.1添加依赖</h4><p>在使用Velocity之前，我们要在pom.xml文件引入依赖</p><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> velocity代码生成使用模板 <span class="token operator">--</span><span class="token operator">></span><span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">></span></span>                <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">></span></span>org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>velocity<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">></span>                <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">></span></span>velocity<span class="token operator">-</span>engine<span class="token operator">-</span>core<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">></span>                <span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">></span></span>$<span class="token punctuation">&#123;</span>velocity<span class="token punctuation">.</span>version<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><h4 id="2-2在java代码中使用Velocity"><a href="#2-2在java代码中使用Velocity" class="headerlink" title="2.2在java代码中使用Velocity"></a>2.2在java代码中使用Velocity</h4><p>使用步骤：</p><p>​1.设置velocity资源加载器</p><p>​2.创建velocity容器</p><p>​3.加载模板</p><p>​4.合并数据到模板</p><p>​5.释放资源</p><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * @author Becant * 2024-04-11-23:07 * @version 1.0.0 * velocity测试 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">VelocityTest</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//1.设置velocity资源加载器</span>        <span class="token class-name">Properties</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        p<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"file.resource.loader.class"</span><span class="token punctuation">,</span> <span class="token string">"org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Velocity</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//2.创建velocity容器</span>        <span class="token class-name">VelocityContext</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VelocityContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        context<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"张三"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">SysUser</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SysUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        user<span class="token punctuation">.</span><span class="token function">setUserName</span><span class="token punctuation">(</span><span class="token string">"李四"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        context<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>        context<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"names"</span><span class="token punctuation">,</span> <span class="token string">"张三、李四"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//3.加载模板</span>        <span class="token class-name">Template</span> template <span class="token operator">=</span> <span class="token class-name">Velocity</span><span class="token punctuation">.</span><span class="token function">getTemplate</span><span class="token punctuation">(</span><span class="token string">"vm/index.vm"</span><span class="token punctuation">,</span> <span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">FileWriter</span> writer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span><span class="token string">"E:\\javaproject\\ruoyi-vue-plus-4x\\ruoyi-demo\\src\\main\\resources\\vm\\index.html"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//4.合并数据到模板</span>        template<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> writer<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//5.释放资源</span>        writer<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>个人理解：<code>template.merge(context, writer);</code>上下文内容合并到模板然后解析到writer</p><p>需要注意的是要在resources中创建如下文件</p><p><img src="/img/Velocity%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E%E5%92%8C%E6%A8%A1%E6%9D%BF%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/1.png"></p><p>context.put(“name”, “张三”); 这段代码表示在上下文中设置了name变量，值为张三。这样就可以从index.vm中获得name变量的值。</p><p>运行VelocityTest后，就生成了index.html文件。index.html文件是index.vm文件的解析。</p><p><img src="/img/Velocity%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E%E5%92%8C%E6%A8%A1%E6%9D%BF%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/2.png"></p><p>接着，就开始解析index.vm文件的内容</p><p><img src="/img/Velocity%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E%E5%92%8C%E6%A8%A1%E6%9D%BF%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/3.png"></p><p>解析之后，在index.html中显示</p><p><img src="/img/Velocity%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E%E5%92%8C%E6%A8%A1%E6%9D%BF%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/4.png"></p><p>$name 就代表获取变量name，还可以这样表示${name}。两者的区别是：当需要拼接某个字符串(如 abc)时，$name就变成了$nameabc会形成一个新的变量;而${name}则变成${name}abc.</p><p><img src="/img/Velocity%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E%E5%92%8C%E6%A8%A1%E6%9D%BF%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/5.png"></p><p>从上图我们可以知道，如果一个变量不存在，则不会被解析。那么当解析时，如何让一个不存在的变量不显示的呢，只需在前边加上!</p><p><img src="/img/Velocity%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E%E5%92%8C%E6%A8%A1%E6%9D%BF%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/6.png"></p><h4 id="2-3Velocity基础语法的使用"><a href="#2-3Velocity基础语法的使用" class="headerlink" title="2.3Velocity基础语法的使用"></a>2.3Velocity基础语法的使用</h4><h5 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h5><p>注释有三种使用方法:</p><p><img src="/img/Velocity%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E%E5%92%8C%E6%A8%A1%E6%9D%BF%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/16.png"></p><h5 id="非解析内容"><a href="#非解析内容" class="headerlink" title="非解析内容"></a>非解析内容</h5><p>如果我们想使用$name这个字符串而不进行解析，可以这样实现：#[[$name]]#</p><p><img src="/img/Velocity%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E%E5%92%8C%E6%A8%A1%E6%9D%BF%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/17.png"></p><h5 id="属性引用以及方法引用"><a href="#属性引用以及方法引用" class="headerlink" title="属性引用以及方法引用"></a>属性引用以及方法引用</h5><p>user.userName即是从上下文中设置的user的一个属性值。names.split(“、”)，分割，与java中的split()方法类似，names也是从上下文中设置的。</p><p><img src="/img/Velocity%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E%E5%92%8C%E6%A8%A1%E6%9D%BF%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/7.png"></p><h5 id="在index-vm中定义变量"><a href="#在index-vm中定义变量" class="headerlink" title="在index.vm中定义变量"></a>在index.vm中定义变量</h5><p><img src="/img/Velocity%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E%E5%92%8C%E6%A8%A1%E6%9D%BF%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/8.png"></p><h5 id="逻辑判断"><a href="#逻辑判断" class="headerlink" title="逻辑判断"></a>逻辑判断</h5><p><img src="/img/Velocity%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E%E5%92%8C%E6%A8%A1%E6%9D%BF%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/9.png"></p><h5 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h5><p>#foreach($a in $arr)与java中 for(ArrayList a : arr)类似</p><p>使用$foreach.index，索引值从0开始，使用$foreach.count，索引值从1开始</p><p><img src="/img/Velocity%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E%E5%92%8C%E6%A8%A1%E6%9D%BF%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/10.png"></p><h5 id="引入资源"><a href="#引入资源" class="headerlink" title="引入资源"></a>引入资源</h5><p>A引入B：即把B的所有内容代码放到A执行</p><h6 id="1-通过-include-引入模板"><a href="#1-通过-include-引入模板" class="headerlink" title="1.通过#include()引入模板"></a>1.通过#include()引入模板</h6><p>通过#include()引入模板不会进行解析。例如在vm&#x2F;index.vm中引入vm&#x2F;index2.vm，即#include(“vm&#x2F;index2.vm”)，但不能对vm&#x2F;index2.vm解析。</p><p><img src="/img/Velocity%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E%E5%92%8C%E6%A8%A1%E6%9D%BF%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/11.png"></p><h6 id="2-通过-parse-引入模板"><a href="#2-通过-parse-引入模板" class="headerlink" title="2.通过#parse()引入模板"></a>2.通过#parse()引入模板</h6><p>通过#parse()引入模板则会进行解析。</p><p><img src="/img/Velocity%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E%E5%92%8C%E6%A8%A1%E6%9D%BF%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/12.png"></p><h5 id="声明模块"><a href="#声明模块" class="headerlink" title="声明模块"></a>声明模块</h5><p>声明模块有点类似java中的方法，但是模块内声明的变量，在模块外也可以使用。</p><p><img src="/img/Velocity%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E%E5%92%8C%E6%A8%A1%E6%9D%BF%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/13.png"></p><h5 id="动态计算指令"><a href="#动态计算指令" class="headerlink" title="动态计算指令"></a>动态计算指令</h5><p><img src="/img/Velocity%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E%E5%92%8C%E6%A8%A1%E6%9D%BF%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/14.png"></p><h5 id="定义宏指令"><a href="#定义宏指令" class="headerlink" title="定义宏指令"></a>定义宏指令</h5><p><img src="/img/Velocity%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E%E5%92%8C%E6%A8%A1%E6%9D%BF%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/15.png"></p><p>如果本文出现错误或有歧义，劳烦大家指出，谢谢！</p><p>本文到此结束！</p>]]></content>
    
    
    <categories>
      
      <category>Velocity</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ruoyi-vue-plus</tag>
      
      <tag>Velocity</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
